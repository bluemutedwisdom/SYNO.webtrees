(function(){if(!window.CKEDITOR||!window.CKEDITOR.dom){if(!window.CKEDITOR){var aK=window,ar=Math.floor(900*Math.random())+100,h7=window.CKEDITOR_BASEPATH||"";if(!h7){for(var cr=document.getElementsByTagName("script"),jp=0;jp<cr.length;jp++){var bQ=cr[jp].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(bQ){h7=bQ[1];break}}}-1==h7.indexOf(":/")&&"//"!=h7.slice(0,2)&&(h7=0===h7.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+h7:location.href.match(/^[^\?]*\/(?:)/)[0]+h7);if(!h7){throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.'}var i8=function(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",i8,!1),dD()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",i8),dD())}catch(t){}},dD=function(){for(var t;t=iM.shift();){t()}},iM=[],w={timestamp:"E0LB",version:"4.3.2",revision:"ba625e6",rnd:ar,_:{pending:[]},status:"unloaded",basePath:h7,getUrl:function(t){-1==t.indexOf(":/")&&0!==t.indexOf("/")&&(t=this.basePath+t);this.timestamp&&"/"!=t.charAt(t.length-1)&&!/[&?]t=/.test(t)&&(t+=(0<=t.indexOf("?")?"&":"?")+"t="+this.timestamp);return t},domReady:function(v){iM.push(v);"complete"===document.readyState&&setTimeout(i8,1);if(1==iM.length){if(document.addEventListener){document.addEventListener("DOMContentLoaded",i8,!1),window.addEventListener("load",i8,!1)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",i8);window.attachEvent("onload",i8);v=!1;try{v=!window.frameElement}catch(t){}if(document.documentElement.doScroll&&v){var x=function(){try{document.documentElement.doScroll("left")}catch(y){setTimeout(x,1);return}i8()};x()}}}}}},i3=window.CKEDITOR_GETURL;if(i3){var o=w.getUrl;w.getUrl=function(t){return i3.call(w,t)||o.call(w,t)}}aK.CKEDITOR=w}if(!CKEDITOR.event){CKEDITOR.event=function(){};CKEDITOR.event.implementOn=function(v){var t=CKEDITOR.event.prototype,x;for(x in t){void 0==v[x]&&(v[x]=t[x])}};var jB=CKEDITOR.event,hJ=function(v){var t=bK(this);return t[v]||(t[v]=new iz(v))},bK=function(t){t=t.getPrivate&&t.getPrivate()||t._||(t._={});return t.events||(t.events={})},iz=function(t){this.name=t;this.listeners=[]};iz.prototype={getListenerIndex:function(v){for(var t=0,x=this.listeners;t<x.length;t++){if(x[t].fn==v){return t}}return -1}};var c=0,hm=function(){c=1},gF=0,gT=function(){gF=1};jB.prototype={define:function(v,t){var x=hJ.call(this,v);CKEDITOR.tools.extend(x,t,!0)},on:function(I,H,G,F,E){function B(M,L,K,J){M={name:I,sender:this,editor:M,data:L,listenerData:F,stop:K,cancel:J,removeListener:y};return !1===H.call(G,M)?!1:M.data}function y(){v.removeListener(I,H)}var x=hJ.call(this,I);if(0>x.getListenerIndex(H)){x=x.listeners;G||(G=this);isNaN(E)&&(E=10);var v=this;B.fn=H;B.priority=E;for(var t=x.length-1;0<=t;t--){if(x[t].priority<=E){return x.splice(t+1,0,B),{removeListener:y}}}x.unshift(B)}return{removeListener:y}},once:function(){var t=arguments[1];arguments[1]=function(v){v.removeListener();return t.apply(this,arguments)};return this.on.apply(this,arguments)},capture:function(){CKEDITOR.event.useCapture=1;var t=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return t},fire:function(H,G,F){var E=bK(this)[H];H=c;var B=gF;c=gF=0;if(E){var y=E.listeners;if(y.length){for(var y=y.slice(0),x,v=0;v<y.length;v++){if(E.errorProof){try{x=y[v].call(this,F,G,hm,gT)}catch(t){}}else{x=y[v].call(this,F,G,hm,gT)}!1===x?gF=1:"undefined"!=typeof x&&(G=x);if(c||gF){break}}}}G=gF?!1:"undefined"==typeof G?!0:G;c=H;gF=B;return G},fireOnce:function(v,t,x){t=this.fire(v,t,x);delete bK(this)[v];return t},removeListener:function(v,t){var y=bK(this)[v];if(y){var x=y.getListenerIndex(t);0<=x&&y.listeners.splice(x,1)}},removeAllListeners:function(){var v=bK(this),t;for(t in v){delete v[t]}},hasListeners:function(t){return(t=bK(this)[t])&&0<t.listeners.length}}}CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(v,t){v in {instanceReady:1,loaded:1}&&(this[v]=!0);return CKEDITOR.event.prototype.fire.call(this,v,t,this)},CKEDITOR.editor.prototype.fireOnce=function(v,t){v in {instanceReady:1,loaded:1}&&(this[v]=!0);return CKEDITOR.event.prototype.fireOnce.call(this,v,t,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype));if(!CKEDITOR.env){var jk=CKEDITOR,h8=navigator.userAgent.toLowerCase(),hU=window.opera,hC={ie:-1<h8.indexOf("trident/"),opera:!!hU&&hU.version,webkit:-1<h8.indexOf(" applewebkit/"),air:-1<h8.indexOf(" adobeair/"),mac:-1<h8.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode&&(!document.documentMode||10>document.documentMode),mobile:-1<h8.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(h8),isCustomDomain:function(){if(!this.ie){return !1}var v=document.domain,t=window.location.hostname;return v!=t&&v!="["+t+"]"},secure:"https:"==location.protocol};hC.gecko="Gecko"==navigator.product&&!hC.webkit&&!hC.opera&&!hC.ie;hC.webkit&&(-1<h8.indexOf("chrome")?hC.chrome=!0:hC.safari=!0);var iA=0;hC.ie&&(iA=hC.quirks||!document.documentMode?parseFloat(h8.match(/msie (\d+)/)[1]):document.documentMode,hC.ie9Compat=9==iA,hC.ie8Compat=8==iA,hC.ie7Compat=7==iA,hC.ie6Compat=7>iA||hC.quirks);if(hC.gecko){var br=h8.match(/rv:([\d\.]+)/);br&&(br=br[1].split("."),iA=10000*br[0]+100*(br[1]||0)+1*(br[2]||0))}hC.opera&&(iA=parseFloat(hU.version()));hC.air&&(iA=parseFloat(h8.match(/ adobeair\/(\d+)/)[1]));hC.webkit&&(iA=parseFloat(h8.match(/ applewebkit\/(\d+)/)[1]));hC.version=iA;hC.isCompatible=hC.iOS&&534<=iA||!hC.mobile&&(hC.ie&&6<iA||hC.gecko&&10801<=iA||hC.opera&&9.5<=iA||hC.air&&1<=iA||hC.webkit&&522<=iA||!1);hC.hidpi=2<=window.devicePixelRatio;hC.needsBrFiller=hC.gecko||hC.webkit||hC.ie&&10<iA;hC.needsNbspFiller=hC.ie&&11>iA;hC.cssClass="cke_browser_"+(hC.ie?"ie":hC.gecko?"gecko":hC.opera?"opera":hC.webkit?"webkit":"unknown");hC.quirks&&(hC.cssClass+=" cke_browser_quirks");hC.ie&&(hC.cssClass+=" cke_browser_ie"+(hC.quirks||7>hC.version?"6":hC.version),hC.quirks&&(hC.cssClass+=" cke_browser_iequirks"));hC.gecko&&(10900>iA?hC.cssClass+=" cke_browser_gecko18":11000>=iA&&(hC.cssClass+=" cke_browser_gecko19"));hC.air&&(hC.cssClass+=" cke_browser_air");hC.iOS&&(hC.cssClass+=" cke_browser_ios");hC.hidpi&&(hC.cssClass+=" cke_hidpi");jk.env=hC}"unloaded"==CKEDITOR.status&&(CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status){CKEDITOR.loadFullCore._load=1}else{delete CKEDITOR.loadFullCore;var t=document.createElement("script");t.type="text/javascript";t.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(t)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(t){(this._.pending||(this._.pending=[])).push(t)},CKEDITOR.domReady(function(){var v=CKEDITOR.loadFullCore,t=CKEDITOR.loadFullCoreTimeout;v&&(CKEDITOR.status="basic_ready",v&&v._load?v():t&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1000*t))}),CKEDITOR.status="basic_loaded");CKEDITOR.dom={};var dw=[],gB=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.opera?"-o-":CKEDITOR.env.ie?"-ms-":"";CKEDITOR.on("reset",function(){dw=[]});var iH=CKEDITOR,f8=document.createElement("div").style,hP="undefined"!=typeof f8.cssFloat?"cssFloat":"undefined"!=typeof f8.styleFloat?"styleFloat":"float",hs=0,gZ=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,gH=/^[ \t\n\r]+/g,go=/[ \t\n\r]+$/g,fW=/^-?\d+\.?\d*px$/,hx,jq;iH.tools={arrayCompare:function(v,t){if(!v&&!t){return !0}if(!v||!t||v.length!=t.length){return !1}for(var x=0;x<v.length;x++){if(v[x]!=t[x]){return !1}}return !0},clone:function(v){var t;if(v&&v instanceof Array){t=[];for(var x=0;x<v.length;x++){t[x]=CKEDITOR.tools.clone(v[x])}return t}if(null===v||"object"!=typeof v||v instanceof String||v instanceof Number||v instanceof Boolean||v instanceof Date||v instanceof RegExp){return v}t=new v.constructor;for(x in v){t[x]=CKEDITOR.tools.clone(v[x])}return t},capitalize:function(v,t){return v.charAt(0).toUpperCase()+(t?v.slice(1):v.slice(1).toLowerCase())},extend:function(v){var t=arguments.length,F,E;if("boolean"==typeof(F=arguments[t-1])){t--}else{if("boolean"==typeof(F=arguments[t-2])){E=arguments[t-1],t-=2}}for(var B=1;B<t;B++){var y=arguments[B],x;for(x in y){if(!0===F||void 0==v[x]){if(!E||x in E){v[x]=y[x]}}}}return v},prototypedCopy:function(v){var t=function(){};t.prototype=v;return new t},copy:function(v){var t={},x;for(x in v){t[x]=v[x]}return t},isArray:function(t){return"[object Array]"==Object.prototype.toString.call(t)},isEmpty:function(v){for(var t in v){if(v.hasOwnProperty(t)){return !1}}return !0},cssVendorPrefix:function(v,t,x){if(x){return gB+v+":"+t+";"+v+":"+t}x={};x[v]=t;x[gB+v]=t;return x},cssStyleToDomStyle:function(t){return"float"==t?hP:t.replace(/-./g,function(v){return v.substr(1).toUpperCase()})},buildStyleHtml:function(v){v=[].concat(v);for(var t,y=[],x=0;x<v.length;x++){if(t=v[x]){/@import|[{}]/.test(t)?y.push("<style>"+t+"</style>"):y.push('<link type="text/css" rel=stylesheet href="'+t+'">')}}return y.join("")},htmlEncode:function(t){return(""+t).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")},htmlEncodeAttr:function(t){return t.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlDecodeAttr:function(t){return t.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")},getNextNumber:function(){return ++hs},getNextId:function(){return"cke_"+this.getNextNumber()},override:function(v,t){var x=t(v);x.prototype=v.prototype;return x},setTimeout:function(v,t,B,y,x){x||(x=window);B||(B=x);return x.setTimeout(function(){y?v.apply(B,[].concat(y)):v.apply(B)},t||0)},trim:function(t){return t.replace(gZ,"")},ltrim:function(t){return t.replace(gH,"")},rtrim:function(t){return t.replace(go,"")},indexOf:function(v,t){if("function"==typeof t){for(var y=0,x=v.length;y<x;y++){if(t(v[y])){return y}}}else{if(v.indexOf){return v.indexOf(t)}y=0;for(x=v.length;y<x;y++){if(v[y]===t){return y}}}return -1},search:function(v,t){var x=CKEDITOR.tools.indexOf(v,t);return 0<=x?v[x]:null},bind:function(v,t){return function(){return v.apply(t,arguments)}},createClass:function(v){var t=v.$,E=v.base,B=v.privates||v._,y=v.proto;v=v.statics;!t&&(t=function(){E&&this.base.apply(this,arguments)});if(B){var x=t,t=function(){var G=this._||(this._={}),F;for(F in B){var H=B[F];G[F]="function"==typeof H?CKEDITOR.tools.bind(H,this):H}x.apply(this,arguments)}}E&&(t.prototype=this.prototypedCopy(E.prototype),t.prototype.constructor=t,t.base=E,t.baseProto=E.prototype,t.prototype.base=function(){this.base=E.prototype.base;E.apply(this,arguments);this.base=arguments.callee});y&&this.extend(t.prototype,y,!0);v&&this.extend(t,v,!0);return t},addFunction:function(v,t){return dw.push(function(){return v.apply(t||this,arguments)})-1},removeFunction:function(t){dw[t]=null},callFunction:function(v){var t=dw[v];return t&&t.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(t){hx=CKEDITOR.tools.trim(t+"")+"px";return fW.test(hx)?hx:t||""},convertToPx:function(t){jq||(jq=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(jq));return !/%$/.test(t)?(jq.setStyle("width",t),jq.$.clientWidth):t},repeat:function(v,t){return Array(t+1).join(v)},tryThese:function(){for(var v,t=0,B=arguments.length;t<B;t++){var y=arguments[t];try{v=y();break}catch(x){}}return v},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(t){return function(){var v=arguments,x=this;window.setTimeout(function(){t.apply(x,v)},0)}},normalizeCssText:function(v,t){var B=[],y,x=CKEDITOR.tools.parseCssText(v,!0,t);for(y in x){B.push(y+":"+x[y])}B.sort();return B.length?B.join(";")+";":""},convertRgbToHex:function(t){return t.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(v,B,y,x){v=[B,y,x];for(B=0;3>B;B++){v[B]=("0"+parseInt(v[B],10).toString(16)).slice(-2)}return"#"+v.join("")})},parseCssText:function(v,t,y){var x={};y&&(y=new CKEDITOR.dom.element("span"),y.setAttribute("style",v),v=CKEDITOR.tools.convertRgbToHex(y.getAttribute("style")||""));if(!v||";"==v){return x}v.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(B,F,E){t&&(F=F.toLowerCase(),"font-family"==F&&(E=E.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),E=CKEDITOR.tools.trim(E));x[F]=E});return x},writeCssText:function(v,t){var y,x=[];for(y in v){x.push(y+":"+v[y])}t&&x.sort();return x.join("; ")},objectCompare:function(v,t,y){var x;if(!v&&!t){return !0}if(!v||!t){return !1}for(x in v){if(v[x]!=t[x]){return !1}}if(!y){for(x in t){if(v[x]!=t[x]){return !1}}}return !0},objectKeys:function(v){var t=[],x;for(x in v){t.push(x)}return t},convertArrayToObject:function(v,t){var B={};1==arguments.length&&(t=!0);for(var y=0,x=v.length;y<x;++y){B[v[y]]=t}return B},fixDomain:function(){for(var v;;){try{v=window.parent.document.domain;break}catch(t){v=v?v.replace(/.+?(?:\.|$)/,""):document.domain;if(!v){break}document.domain=v}}return !!v},eventsBuffer:function(v,t){function B(){x=(new Date).getTime();y=!1;t()}var y,x=0;return{input:function(){if(!y){var E=(new Date).getTime()-x;E<v?y=setTimeout(B,v-E):B()}},reset:function(){y&&clearTimeout(y);y=x=0}}},enableHtml5Elements:function(v,t){for(var B="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" "),y=B.length,x;y--;){x=v.createElement(B[y]),t&&v.appendChild(x)}}};var fD=CKEDITOR,iF=CKEDITOR.tools.extend,h4=function(v,t){for(var B=CKEDITOR.tools.clone(v),y=1;y<arguments.length;y++){t=arguments[y];for(var x in t){delete B[x]}}return B},hB={},hy={},fQ={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},fx={command:1,link:1,meta:1,noscript:1,script:1,style:1},iy={},gm={"#":1},e5={center:1,dir:1,noframes:1};iF(hB,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},gm,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});iF(hy,fQ,hB,e5);h4={a:h4(hB,{a:1,button:1}),abbr:hB,address:hy,area:iy,article:iF({style:1},hy),aside:iF({style:1},hy),audio:iF({source:1,track:1},hy),b:hB,base:iy,bdi:hB,bdo:hB,blockquote:hy,body:hy,br:iy,button:h4(hB,{a:1,button:1}),canvas:hB,caption:hy,cite:hB,code:hB,col:iy,colgroup:{col:1},command:iy,datalist:iF({option:1},hB),dd:hy,del:hB,details:iF({summary:1},hy),dfn:hB,div:iF({style:1},hy),dl:{dt:1,dd:1},dt:hy,em:hB,embed:iy,fieldset:iF({legend:1},hy),figcaption:hy,figure:iF({figcaption:1},hy),footer:hy,form:hy,h1:hB,h2:hB,h3:hB,h4:hB,h5:hB,h6:hB,head:iF({title:1,base:1},fx),header:hy,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:iy,html:iF({head:1,body:1},hy,fx),i:hB,iframe:gm,img:iy,input:iy,ins:hB,kbd:hB,keygen:iy,label:hB,legend:hB,li:hy,link:iy,map:hy,mark:hB,menu:iF({li:1},hy),meta:iy,meter:h4(hB,{meter:1}),nav:hy,noscript:iF({link:1,meta:1,style:1},hB),object:iF({param:1},hB),ol:{li:1},optgroup:{option:1},option:gm,output:hB,p:hB,param:iy,pre:hB,progress:h4(hB,{progress:1}),q:hB,rp:hB,rt:hB,ruby:iF({rp:1,rt:1},hB),s:hB,samp:hB,script:gm,section:iF({style:1},hy),select:{optgroup:1,option:1},small:hB,source:iy,span:hB,strong:hB,style:gm,sub:hB,summary:hB,sup:hB,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:hy,textarea:gm,tfoot:{tr:1},th:hy,thead:{tr:1},time:h4(hB,{time:1}),title:gm,tr:{th:1,td:1},track:iy,u:hB,ul:{li:1},"var":hB,video:iF({source:1,track:1},hy),wbr:iy,acronym:hB,applet:iF({param:1},hy),basefont:iy,big:hB,center:hy,dialog:iy,dir:{li:1},font:hB,isindex:iy,noframes:hy,strike:hB,tt:hB};iF(h4,{$block:iF({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},fQ,e5),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:hB,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:iF({body:1,head:1,html:1},h4.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});fD.dtd=h4;CKEDITOR.dom.event=function(t){this.$=t};CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var t=this.getKey();if(this.$.ctrlKey||this.$.metaKey){t+=CKEDITOR.CTRL}this.$.shiftKey&&(t+=CKEDITOR.SHIFT);this.$.altKey&&(t+=CKEDITOR.ALT);return t},preventDefault:function(v){var t=this.$;t.preventDefault?t.preventDefault():t.returnValue=!1;v&&this.stopPropagation()},stopPropagation:function(){var t=this.$;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},getTarget:function(){var t=this.$.target||this.$.srcElement;return t?new CKEDITOR.dom.node(t):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var t=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(t.documentElement.scrollLeft||t.body.scrollLeft),y:this.$.pageY||this.$.clientY+(t.documentElement.scrollTop||t.body.scrollTop)}}};CKEDITOR.CTRL=1114112;CKEDITOR.SHIFT=2228224;CKEDITOR.ALT=4456448;CKEDITOR.EVENT_PHASE_CAPTURING=1;CKEDITOR.EVENT_PHASE_AT_TARGET=2;CKEDITOR.EVENT_PHASE_BUBBLING=3;CKEDITOR.dom.domObject=function(t){t&&(this.$=t)};CKEDITOR.dom.domObject.prototype={getPrivate:function(){var t;if(!(t=this.getCustomData("_"))){this.setCustomData("_",t={})}return t},on:function(v){var t=this.getCustomData("_cke_nativeListeners");t||(t={},this.setCustomData("_cke_nativeListeners",t));if(!t[v]){var y=this,x=v,t=t[v]=function(B){"undefined"!=typeof CKEDITOR&&y.fire(x,new CKEDITOR.dom.event(B))};this.$.addEventListener?this.$.addEventListener(v,t,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+v,t)}return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(v){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(v)){var t=this.getCustomData("_cke_nativeListeners"),x=t&&t[v];x&&(this.$.removeEventListener?this.$.removeEventListener(v,x,!1):this.$.detachEvent&&this.$.detachEvent("on"+v,x),delete t[v])}},removeAllListeners:function(){var v=this.getCustomData("_cke_nativeListeners"),t;for(t in v){var x=v[t];this.$.detachEvent?this.$.detachEvent("on"+t,x):this.$.removeEventListener&&this.$.removeEventListener(t,x,!1);delete v[t]}}};var fU=CKEDITOR.dom.domObject.prototype,aZ={};CKEDITOR.on("reset",function(){aZ={}});fU.equals=function(v){try{return v&&v.$===this.$}catch(t){return !1}};fU.setCustomData=function(v,t){var x=this.getUniqueId();(aZ[x]||(aZ[x]={}))[v]=t;return this};fU.getCustomData=function(v){var t=this.$["data-cke-expando"];return(t=t&&aZ[t])&&v in t?t[v]:null};fU.removeCustomData=function(v){var t=this.$["data-cke-expando"],t=t&&aZ[t],y,x;t&&(y=t[v],x=v in t,delete t[v]);return x?y:null};fU.clearCustomData=function(){this.removeAllListeners();var t=this.$["data-cke-expando"];t&&delete aZ[t]};fU.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(fU);CKEDITOR.dom.node=function(t){return t?new CKEDITOR.dom[t.nodeType==CKEDITOR.NODE_DOCUMENT?"document":t.nodeType==CKEDITOR.NODE_ELEMENT?"element":t.nodeType==CKEDITOR.NODE_TEXT?"text":t.nodeType==CKEDITOR.NODE_COMMENT?"comment":t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](t):this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(v,t){v.append(this,t);return v},clone:function(v,t){var y=this.$.cloneNode(v),x=function(E){E["data-cke-expando"]&&(E["data-cke-expando"]=!1);if(E.nodeType==CKEDITOR.NODE_ELEMENT&&(t||E.removeAttribute("id",!1),v)){E=E.childNodes;for(var B=0;B<E.length;B++){x(E[B])}}};x(y);return new CKEDITOR.dom.node(y)},hasPrevious:function(){return !!this.$.previousSibling},hasNext:function(){return !!this.$.nextSibling},insertAfter:function(t){t.$.parentNode.insertBefore(this.$,t.$.nextSibling);return t},insertBefore:function(t){t.$.parentNode.insertBefore(this.$,t.$);return t},insertBeforeMe:function(t){this.$.parentNode.insertBefore(t.$,this.$);return t},getAddress:function(v){for(var t=[],B=this.getDocument().$.documentElement,y=this.$;y&&y!=B;){var x=y.parentNode;x&&t.unshift(this.getIndex.call({$:y},v));y=x}return t},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(v){var t=this.$,y=-1,x;if(!this.$.parentNode){return y}do{if(!v||!(t!=this.$&&t.nodeType==CKEDITOR.NODE_TEXT&&(x||!t.nodeValue))){y++,x=t.nodeType==CKEDITOR.NODE_TEXT}}while(t=t.previousSibling);return y},getNextSourceNode:function(v,t,B){if(B&&!B.call){var y=B;B=function(E){return !E.equals(y)}}v=!v&&this.getFirst&&this.getFirst();var x;if(!v){if(this.type==CKEDITOR.NODE_ELEMENT&&B&&!1===B(this,!0)){return null}v=this.getNext()}for(;!v&&(x=(x||this).getParent());){if(B&&!1===B(x,!0)){return null}v=x.getNext()}return !v||B&&!1===B(v)?null:t&&t!=v.type?v.getNextSourceNode(!1,t,B):v},getPreviousSourceNode:function(v,t,B){if(B&&!B.call){var y=B;B=function(E){return !E.equals(y)}}v=!v&&this.getLast&&this.getLast();var x;if(!v){if(this.type==CKEDITOR.NODE_ELEMENT&&B&&!1===B(this,!0)){return null}v=this.getPrevious()}for(;!v&&(x=(x||this).getParent());){if(B&&!1===B(x,!0)){return null}v=x.getPrevious()}return !v||B&&!1===B(v)?null:t&&v.type!=t?v.getPreviousSourceNode(!1,t,B):v},getPrevious:function(v){var t=this.$,x;do{x=(t=t.previousSibling)&&10!=t.nodeType&&new CKEDITOR.dom.node(t)}while(x&&v&&!v(x));return x},getNext:function(v){var t=this.$,x;do{x=(t=t.nextSibling)&&new CKEDITOR.dom.node(t)}while(x&&v&&!v(x));return x},getParent:function(v){var t=this.$.parentNode;return t&&(t.nodeType==CKEDITOR.NODE_ELEMENT||v&&t.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(t):null},getParents:function(v){var t=this,x=[];do{x[v?"push":"unshift"](t)}while(t=t.getParent());return x},getCommonAncestor:function(v){if(v.equals(this)){return this}if(v.contains&&v.contains(this)){return v}var t=this.contains?this:this.getParent();do{if(t.contains(v)){return t}}while(t=t.getParent());return null},getPosition:function(v){var t=this.$,y=v.$;if(t.compareDocumentPosition){return t.compareDocumentPosition(y)}if(t==y){return CKEDITOR.POSITION_IDENTICAL}if(this.type==CKEDITOR.NODE_ELEMENT&&v.type==CKEDITOR.NODE_ELEMENT){if(t.contains){if(t.contains(y)){return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING}if(y.contains(t)){return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}}if("sourceIndex" in t){return 0>t.sourceIndex||0>y.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:t.sourceIndex<y.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}}t=this.getAddress();v=v.getAddress();for(var y=Math.min(t.length,v.length),x=0;x<=y-1;x++){if(t[x]!=v[x]){if(x<y){return t[x]<v[x]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}break}}return t.length<v.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(v,t){var B=this.$,y;t||(B=B.parentNode);for(;B;){if(B.nodeName&&(y=B.nodeName.toLowerCase(),"string"==typeof v?y==v:y in v)){return new CKEDITOR.dom.node(B)}try{B=B.parentNode}catch(x){B=null}}return null},hasAscendant:function(v,t){var x=this.$;t||(x=x.parentNode);for(;x;){if(x.nodeName&&x.nodeName.toLowerCase()==v){return !0}x=x.parentNode}return !1},move:function(v,t){v.append(this.remove(),t)},remove:function(v){var t=this.$,x=t.parentNode;if(x){if(v){for(;v=t.firstChild;){x.insertBefore(t.removeChild(v),t)}}x.removeChild(t)}return this},replace:function(t){this.insertBefore(t);t.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var v;this.getFirst&&(v=this.getFirst());){if(v.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.ltrim(v.getText()),x=v.getLength();if(t){t.length<x&&(v.split(x-t.length),this.$.removeChild(this.$.firstChild))}else{v.remove();continue}}break}},rtrim:function(){for(var v;this.getLast&&(v=this.getLast());){if(v.type==CKEDITOR.NODE_TEXT){var t=CKEDITOR.tools.rtrim(v.getText()),x=v.getLength();if(t){t.length<x&&(v.split(t.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}else{v.remove();continue}}break}CKEDITOR.env.needsBrFiller&&(v=this.$.lastChild)&&1==v.type&&"br"==v.nodeName.toLowerCase()&&v.parentNode.removeChild(v)},isReadOnly:function(){var t=this;this.type!=CKEDITOR.NODE_ELEMENT&&(t=this.getParent());if(t&&"undefined"!=typeof t.$.isContentEditable){return !(t.$.isContentEditable||t.data("cke-editable"))}for(;t&&!t.data("cke-editable");){if("false"==t.getAttribute("contentEditable")){return !0}if("true"==t.getAttribute("contentEditable")){break}t=t.getParent()}return !t}});CKEDITOR.dom.window=function(t){CKEDITOR.dom.domObject.call(this,t)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var v=this.$.document,t="CSS1Compat"==v.compatMode;return{width:(t?v.documentElement.clientWidth:v.body.clientWidth)||0,height:(t?v.documentElement.clientHeight:v.body.clientHeight)||0}},getScrollPosition:function(){var t=this.$;if("pageXOffset" in t){return{x:t.pageXOffset||0,y:t.pageYOffset||0}}t=t.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}},getFrame:function(){var t=this.$.frameElement;return t?new CKEDITOR.dom.element.get(t):null}});CKEDITOR.dom.document=function(t){CKEDITOR.dom.domObject.call(this,t)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(v){if(this.$.createStyleSheet){this.$.createStyleSheet(v)}else{var t=new CKEDITOR.dom.element("link");t.setAttributes({rel:"stylesheet",type:"text/css",href:v});this.getHead().append(t)}},appendStyleText:function(v){if(this.$.createStyleSheet){var t=this.$.createStyleSheet("");t.cssText=v}else{var x=new CKEDITOR.dom.element("style",this);x.append(new CKEDITOR.dom.text(v,this));this.getHead().append(x)}return t||x.$.sheet},createElement:function(v,t){var x=new CKEDITOR.dom.element(v,this);t&&(t.attributes&&x.setAttributes(t.attributes),t.styles&&x.setStyles(t.styles));return x},createText:function(t){return new CKEDITOR.dom.text(t,this)},focus:function(){this.getWindow().focus()},getActive:function(){return new CKEDITOR.dom.element(this.$.activeElement)},getById:function(t){return(t=this.$.getElementById(t))?new CKEDITOR.dom.element(t):null},getByAddress:function(v,t){for(var G=this.$.documentElement,F=0;G&&F<v.length;F++){var E=v[F];if(t){for(var B=-1,y=0;y<G.childNodes.length;y++){var x=G.childNodes[y];if(!(!0===t&&3==x.nodeType&&x.previousSibling&&3==x.previousSibling.nodeType)&&(B++,B==E)){G=x;break}}}else{G=G.childNodes[E]}}return G?new CKEDITOR.dom.node(G):null},getElementsByTag:function(v,t){if((!CKEDITOR.env.ie||8<document.documentMode)&&t){v=t+":"+v}return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(v))},getHead:function(){var t=this.$.getElementsByTagName("head")[0];return t?new CKEDITOR.dom.element(t):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(t){this.$.open("text/html","replace");CKEDITOR.env.ie&&(t=t.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();\x3c/script>"));this.$.write(t);this.$.close()},find:function(t){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(t))},findOne:function(t){return(t=this.$.querySelector(t))?new CKEDITOR.dom.element(t):null},_getHtml5ShivFrag:function(){var t=this.getCustomData("html5ShivFrag");t||(t=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(t,!0),this.setCustomData("html5ShivFrag",t));return t}});CKEDITOR.dom.nodeList=function(t){this.$=t};CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(t){return 0>t||t>=this.$.length?null:(t=this.$[t])?new CKEDITOR.dom.node(t):null}};CKEDITOR.dom.element=function(v,t){"string"==typeof v&&(v=(t?t.$:document).createElement(v));CKEDITOR.dom.domObject.call(this,v)};CKEDITOR.dom.element.get=function(t){return(t="string"==typeof t?document.getElementById(t)||document.getElementsByName(t)[0]:t)&&(t.$?t:new CKEDITOR.dom.element(t))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;CKEDITOR.dom.element.createFromHtml=function(v,t){var x=new CKEDITOR.dom.element("div",t);x.setHtml(v);return x.getFirst().remove()};CKEDITOR.dom.element.setMarker=function(v,t,E,B){var y=t.getCustomData("list_marker_id")||t.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),x=t.getCustomData("list_marker_names")||t.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");v[y]=t;x[E]=1;return t.setCustomData(E,B)};CKEDITOR.dom.element.clearAllMarkers=function(v){for(var t in v){CKEDITOR.dom.element.clearMarkers(v,v[t],1)}};CKEDITOR.dom.element.clearMarkers=function(v,t,E){var B=t.getCustomData("list_marker_names"),y=t.getCustomData("list_marker_id"),x;for(x in B){t.removeCustomData(x)}t.removeCustomData("list_marker_names");E&&(t.removeCustomData("list_marker_id"),delete v[y])};var eN=function(v){var t=!0;v.$.id||(v.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),t=!1);return function(){t||v.removeAttribute("id")}},ev=function(v,t){return"#"+v.$.id+" "+t.split(/,\s*/).join(", #"+v.$.id+" ")},dL=function(v){for(var t=0,y=0,x=d3[v].length;y<x;y++){t+=parseInt(this.getComputedStyle(d3[v][y])||0,10)||0}return t};CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(v){var t=this.$.className;t&&(RegExp("(?:^|\\s)"+v+"(?:\\s|$)","").test(t)||(t+=" "+v));this.$.className=t||v},removeClass:function(v){var t=this.getAttribute("class");t&&(v=RegExp("(?:^|\\s+)"+v+"(?=\\s|$)","i"),v.test(t)&&((t=t.replace(v,"").replace(/^\s+/,""))?this.setAttribute("class",t):this.removeAttribute("class")));return this},hasClass:function(t){return RegExp("(?:^|\\s+)"+t+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(v,t){"string"==typeof v&&(v=this.getDocument().createElement(v));t?this.$.insertBefore(v.$,this.$.firstChild):this.$.appendChild(v.$);return v},appendHtml:function(v){if(this.$.childNodes.length){var t=new CKEDITOR.dom.element("div",this.getDocument());t.setHtml(v);t.moveChildren(this)}else{this.setHtml(v)}},appendText:function(t){void 0!=this.$.text?this.$.text+=t:this.append(new CKEDITOR.dom.text(t))},appendBogus:function(t){if(t||CKEDITOR.env.needsBrFiller||CKEDITOR.env.opera){for(t=this.getLast();t&&t.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(t.getText());){t=t.getPrevious()}if(!t||!t.is||!t.is("br")){t=CKEDITOR.env.opera?this.getDocument().createText(""):this.getDocument().createElement("br"),CKEDITOR.env.gecko&&t.setAttribute("type","_moz"),this.append(t)}}},breakParent:function(v){var t=new CKEDITOR.dom.range(this.getDocument());t.setStartAfter(this);t.setEndAfter(v);v=t.extractContents();t.insertNode(this.remove());v.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(v){var t=this.$;return v.type!=CKEDITOR.NODE_ELEMENT?t.contains(v.getParent().$):t!=v.$&&t.contains(v.$)}:function(t){return !!(this.$.compareDocumentPosition(t.$)&16)},focus:function(){function t(){try{this.$.focus()}catch(v){}}return function(v){v?CKEDITOR.tools.setTimeout(t,100,this):t.call(this)}}(),getHtml:function(){var t=this.$.innerHTML;return CKEDITOR.env.ie?t.replace(/<\?[^>]*>/g,""):t},getOuterHtml:function(){if(this.$.outerHTML){return this.$.outerHTML.replace(/<\?[^>]*>/,"")}var t=this.$.ownerDocument.createElement("div");t.appendChild(this.$.cloneNode(!0));return t.innerHTML},getClientRect:function(){var t=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());!t.width&&(t.width=t.right-t.left);!t.height&&(t.height=t.bottom-t.top);return t},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(v){try{var t=this.$;if(this.getParent()){return t.innerHTML=v}var y=this.getDocument()._getHtml5ShivFrag();y.appendChild(t);t.innerHTML=v;y.removeChild(t);return v}catch(x){this.$.innerHTML="";t=new CKEDITOR.dom.element("body",this.getDocument());t.$.innerHTML=v;for(t=t.getChildren();t.count();){this.append(t.getItem(0))}return v}}:function(t){return this.$.innerHTML=t},setText:function(t){CKEDITOR.dom.element.prototype.setText=void 0!=this.$.innerText?function(v){return this.$.innerText=v}:function(v){return this.$.textContent=v};return this.setText(t)},getAttribute:function(){var t=function(v){return this.$.getAttribute(v,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(v){switch(v){case"class":v="className";break;case"http-equiv":v="httpEquiv";break;case"name":return this.$.name;case"tabindex":return v=this.$.getAttribute(v,2),0!==v&&0===this.$.tabIndex&&(v=null),v;case"checked":return v=this.$.attributes.getNamedItem(v),(v.specified?v.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[v];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(v,2)}:t}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(t){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(t)]}:function(v){var t=this.getWindow().$.getComputedStyle(this.$,null);return t?t.getPropertyValue(v):""},getDtd:function(){var t=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return t};return t},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var t=this.$.tabIndex;0===t&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&0!==parseInt(this.getAttribute("tabindex"),10)&&(t=-1);return t}:CKEDITOR.env.webkit?function(){var t=this.$.tabIndex;void 0==t&&(t=parseInt(this.getAttribute("tabindex"),10),isNaN(t)&&(t=-1));return t}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var v=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&!(8<document.documentMode)){var t=this.$.scopeName;"HTML"!=t&&(v=t.toLowerCase()+":"+v)}return(this.getName=function(){return v})()},getValue:function(){return this.$.value},getFirst:function(v){var t=this.$.firstChild;(t=t&&new CKEDITOR.dom.node(t))&&v&&!v(t)&&(t=t.getNext(v));return t},getLast:function(v){var t=this.$.lastChild;(t=t&&new CKEDITOR.dom.node(t))&&v&&!v(t)&&(t=t.getPrevious(v));return t},getStyle:function(t){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(t)]},is:function(){var v=this.getName();if("object"==typeof arguments[0]){return !!arguments[0][v]}for(var t=0;t<arguments.length;t++){if(arguments[t]==v){return !0}}return !1},isEditable:function(v){var t=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[t]||CKEDITOR.dtd.$empty[t]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:!1!==v?(v=CKEDITOR.dtd[t]||CKEDITOR.dtd.span,!(!v||!v["#"])):!0},isIdentical:function(v){var t=this.clone(0,1);v=v.clone(0,1);t.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);v.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(t.$.isEqualNode){return t.$.style.cssText=CKEDITOR.tools.normalizeCssText(t.$.style.cssText),v.$.style.cssText=CKEDITOR.tools.normalizeCssText(v.$.style.cssText),t.$.isEqualNode(v.$)}t=t.getOuterHtml();v=v.getOuterHtml();if(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var x=this.getParent();x.type==CKEDITOR.NODE_ELEMENT&&(x=x.clone(),x.setHtml(t),t=x.getHtml(),x.setHtml(v),v=x.getHtml())}return t==v},isVisible:function(){var v=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility"),t,x;if(v&&(CKEDITOR.env.webkit||CKEDITOR.env.opera)){if(t=this.getWindow(),!t.equals(CKEDITOR.document.getWindow())&&(x=t.$.frameElement)){v=(new CKEDITOR.dom.element(x)).isVisible()}}return !!v},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()]){return !1}for(var v=this.getChildren(),t=0,y=v.count();t<y;t++){var x=v.getItem(t);if(!(x.type==CKEDITOR.NODE_ELEMENT&&x.data("cke-bookmark"))&&(x.type==CKEDITOR.NODE_ELEMENT&&!x.isEmptyInlineRemoveable()||x.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(x.getText()))){return !1}}return !0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(){for(var v=this.$.attributes,t=0;t<v.length;t++){var x=v[t];switch(x.nodeName){case"class":if(this.getAttribute("class")){return !0}case"data-cke-expando":continue;default:if(x.specified){return !0}}}return !1}:function(){var v=this.$.attributes,t=v.length,x={"data-cke-expando":1,_moz_dirty:1};return 0<t&&(2<t||!x[v[0].nodeName]||2==t&&!x[v[1].nodeName])},hasAttribute:function(){function t(v){v=this.$.attributes.getNamedItem(v);return !(!v||!v.specified)}return CKEDITOR.env.ie&&8>CKEDITOR.env.version?function(v){return"name"==v?!!this.$.name:t.call(this,v)}:t}(),hide:function(){this.setStyle("display","none")},moveChildren:function(v,t){var y=this.$;v=v.$;if(y!=v){var x;if(t){for(;x=y.lastChild;){v.insertBefore(y.removeChild(x),v.firstChild)}}else{for(;x=y.firstChild;){v.appendChild(y.removeChild(x))}}}},mergeSiblings:function(){function t(v,E,B){if(E&&E.type==CKEDITOR.NODE_ELEMENT){for(var y=[];E.data("cke-bookmark")||E.isEmptyInlineRemoveable();){if(y.push(E),E=B?E.getNext():E.getPrevious(),!E||E.type!=CKEDITOR.NODE_ELEMENT){return}}if(v.isIdentical(E)){for(var x=B?v.getLast():v.getFirst();y.length;){y.shift().move(v,!B)}E.moveChildren(v,!B);E.remove();x&&x.type==CKEDITOR.NODE_ELEMENT&&x.mergeSiblings()}}}return function(v){if(!1===v||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a")){t(this,this.getNext(),!0),t(this,this.getPrevious())}}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var t=function(v,x){this.$.setAttribute(v,x);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(v,x){"class"==v?this.$.className=x:"style"==v?this.$.style.cssText=x:"tabindex"==v?this.$.tabIndex=x:"checked"==v?this.$.checked=x:"contenteditable"==v?t.call(this,"contentEditable",x):t.apply(this,arguments);return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(v,y){if("src"==v&&y.match(/^http:\/\//)){try{t.apply(this,arguments)}catch(x){}}else{t.apply(this,arguments)}return this}:t}(),setAttributes:function(v){for(var t in v){this.setAttribute(t,v[t])}return this},setValue:function(t){this.$.value=t;return this},removeAttribute:function(){var t=function(v){this.$.removeAttribute(v)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(v){"class"==v?v="className":"tabindex"==v?v="tabIndex":"contenteditable"==v&&(v="contentEditable");this.$.removeAttribute(v)}:t}(),removeAttributes:function(v){if(CKEDITOR.tools.isArray(v)){for(var t=0;t<v.length;t++){this.removeAttribute(v[t])}}else{for(t in v){v.hasOwnProperty(t)&&this.removeAttribute(t)}}},removeStyle:function(v){var t=this.$.style;if(!t.removeProperty&&("border"==v||"margin"==v||"padding"==v)){var E=["top","left","right","bottom"],B;"border"==v&&(B=["color","style","width"]);for(var t=[],y=0;y<E.length;y++){if(B){for(var x=0;x<B.length;x++){t.push([v,E[y],B[x]].join("-"))}}else{t.push([v,E[y]].join("-"))}}for(v=0;v<t.length;v++){this.removeStyle(t[v])}}else{t.removeProperty?t.removeProperty(v):t.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(v)),this.$.style.cssText||this.removeAttribute("style")}},setStyle:function(v,t){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(v)]=t;return this},setStyles:function(v){for(var t in v){this.setStyle(t,v[t])}return this},setOpacity:function(t){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(t=Math.round(100*t),this.setStyle("filter",100<=t?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+t+")")):this.setStyle("opacity",t)},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie||CKEDITOR.env.opera){this.setAttribute("unselectable","on");for(var v,t=this.getElementsByTag("*"),y=0,x=t.count();y<x;y++){v=t.getItem(y),v.setAttribute("unselectable","on")}}},getPositionedAncestor:function(){for(var t=this;"html"!=t.getName();){if("static"!=t.getComputedStyle("position")){return t}t=t.getParent()}return null},getDocumentPosition:function(J){var I=0,H=0,G=this.getDocument(),F=G.getBody(),E="BackCompat"==G.$.compatMode;if(document.documentElement.getBoundingClientRect){var B=this.$.getBoundingClientRect(),y=G.$.documentElement,x=y.clientTop||F.$.clientTop||0,v=y.clientLeft||F.$.clientLeft||0,t=!0;CKEDITOR.env.ie&&(t=G.getDocumentElement().contains(this),G=G.getBody().contains(this),t=E&&G||!E&&t);t&&(I=B.left+(!E&&y.scrollLeft||F.$.scrollLeft),I-=v,H=B.top+(!E&&y.scrollTop||F.$.scrollTop),H-=x)}else{F=this;for(G=null;F&&!("body"==F.getName()||"html"==F.getName());){I+=F.$.offsetLeft-F.$.scrollLeft;H+=F.$.offsetTop-F.$.scrollTop;F.equals(this)||(I+=F.$.clientLeft||0,H+=F.$.clientTop||0);for(;G&&!G.equals(F);){I-=G.$.scrollLeft,H-=G.$.scrollTop,G=G.getParent()}G=F;F=(B=F.$.offsetParent)?new CKEDITOR.dom.element(B):null}}J&&(F=this.getWindow(),G=J.getWindow(),!F.equals(G)&&F.$.frameElement&&(J=(new CKEDITOR.dom.element(F.$.frameElement)).getDocumentPosition(J),I+=J.x,H+=J.y));!document.documentElement.getBoundingClientRect&&(CKEDITOR.env.gecko&&!E)&&(I+=this.$.clientLeft?1:0,H+=this.$.clientTop?1:0);return{x:I,y:H}},scrollIntoView:function(v){var t=this.getParent();if(t){do{if((t.$.clientWidth&&t.$.clientWidth<t.$.scrollWidth||t.$.clientHeight&&t.$.clientHeight<t.$.scrollHeight)&&!t.is("body")&&this.scrollIntoParent(t,v,1),t.is("html")){var B=t.getWindow();try{var y=B.$.frameElement;y&&(t=new CKEDITOR.dom.element(y))}catch(x){}}}while(t=t.getParent())}},scrollIntoParent:function(N,M,L){function K(O,P){/body|html/.test(N.getName())?N.getWindow().$.scrollBy(O,P):(N.$.scrollLeft+=O,N.$.scrollTop+=P)}function J(P,O){var R={x:0,y:0};if(!P.is(B?"body":"html")){var Q=P.$.getBoundingClientRect();R.x=Q.left;R.y=Q.top}Q=P.getWindow();Q.equals(O)||(Q=J(CKEDITOR.dom.element.get(Q.$.frameElement),O),R.x+=Q.x,R.y+=Q.y);return R}function I(P,O){return parseInt(P.getComputedStyle("margin-"+O)||0,10)||0}var H,G,F,E;!N&&(N=this.getWindow());F=N.getDocument();var B="BackCompat"==F.$.compatMode;N instanceof CKEDITOR.dom.window&&(N=B?F.getBody():F.getDocumentElement());F=N.getWindow();G=J(this,F);var y=J(N,F),v=this.$.offsetHeight;H=this.$.offsetWidth;var x=N.$.clientHeight,t=N.$.clientWidth;F=G.x-I(this,"left")-y.x||0;E=G.y-I(this,"top")-y.y||0;H=G.x+H+I(this,"right")-(y.x+t)||0;G=G.y+v+I(this,"bottom")-(y.y+x)||0;if(0>E||0<G){K(0,!0===M?E:!1===M?G:0>E?E:G)}if(L&&(0>F||0<H)){K(0>F?F:H,0)}},setState:function(v,t,x){t=t||"cke";switch(v){case CKEDITOR.TRISTATE_ON:this.addClass(t+"_on");this.removeClass(t+"_off");this.removeClass(t+"_disabled");x&&this.setAttribute("aria-pressed",!0);x&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(t+"_disabled");this.removeClass(t+"_off");this.removeClass(t+"_on");x&&this.setAttribute("aria-disabled",!0);x&&this.removeAttribute("aria-pressed");break;default:this.addClass(t+"_off"),this.removeClass(t+"_on"),this.removeClass(t+"_disabled"),x&&this.removeAttribute("aria-pressed"),x&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var v=this.$;try{v.contentWindow.document}catch(t){v.src=v.src}return v&&new CKEDITOR.dom.document(v.contentWindow.document)},copyAttributes:function(v,t){var F=this.$.attributes;t=t||{};for(var E=0;E<F.length;E++){var B=F[E],y=B.nodeName.toLowerCase(),x;if(!(y in t)){if("checked"==y&&(x=this.getAttribute(y))){v.setAttribute(y,x)}else{if(B.specified||CKEDITOR.env.ie&&B.nodeValue&&"value"==y){x=this.getAttribute(y),null===x&&(x=B.nodeValue),v.setAttribute(y,x)}}}}""!==this.$.style.cssText&&(v.$.style.cssText=this.$.style.cssText)},renameNode:function(v){if(this.getName()!=v){var t=this.getDocument();v=new CKEDITOR.dom.element(v,t);this.copyAttributes(v);this.moveChildren(v);this.getParent()&&this.$.parentNode.replaceChild(v.$,this.$);v.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=v.$}},getChild:function(){function t(v,y){var x=v.childNodes;if(0<=y&&y<x.length){return x[y]}}return function(v){var x=this.$;if(v.slice){for(;0<v.length&&x;){x=t(x,v.shift())}}else{x=t(x,v)}return x?new CKEDITOR.dom.node(x):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(t){t.data.getTarget().hasClass("cke_enable_context_menu")||t.data.preventDefault()})},getDirection:function(t){return t?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(v,t){v="data-"+v;if(void 0===t){return this.getAttribute(v)}!1===t?this.removeAttribute(v):this.setAttribute(v,t);return null},getEditor:function(){var v=CKEDITOR.instances,t,x;for(t in v){if(x=v[t],x.element.equals(this)&&x.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){return x}}return null},find:function(v){var t=eN(this);v=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(ev(this,v)));t();return v},findOne:function(v){var t=eN(this);v=this.$.querySelector(ev(this,v));t();return v?new CKEDITOR.dom.element(v):null},forEach:function(v,t,B){if(!B&&(!t||this.type==t)){var y=v(this)}if(!1!==y){B=this.getChildren();for(var x=0;x<B.count();x++){y=B.getItem(x),y.type==CKEDITOR.NODE_ELEMENT?y.forEach(v,t):(!t||y.type==t)&&v(y)}}}});var d3={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(v,t,x){if("number"==typeof t){if(x&&(!CKEDITOR.env.ie||!CKEDITOR.env.quirks)){t-=dL.call(this,v)}this.setStyle(v,t+"px")}};CKEDITOR.dom.element.prototype.getSize=function(v,t){var x=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(v)],this.$["client"+CKEDITOR.tools.capitalize(v)])||0;t&&(x-=dL.call(this,v));return x};CKEDITOR.dom.documentFragment=function(t){t=t||CKEDITOR.document;this.$=t.type==CKEDITOR.NODE_DOCUMENT?t.$.createDocumentFragment():t};CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(t){t=t.$;t.parentNode.insertBefore(this.$,t.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});var iN=function(O,N){var M=this.range;if(this._.end){return null}if(!this._.start){this._.start=1;if(M.collapsed){return this.end(),null}M.optimize()}var L,K=M.startContainer;L=M.endContainer;var J=M.startOffset,I=M.endOffset,H,G=this.guard,F=this.type,E=O?"getPreviousSourceNode":"getNextSourceNode";if(!O&&!this._.guardLTR){var B=L.type==CKEDITOR.NODE_ELEMENT?L:L.getParent(),x=L.type==CKEDITOR.NODE_ELEMENT?L.getChild(I):L.getNext();this._.guardLTR=function(Q,P){return(!P||!B.equals(Q))&&(!x||!Q.equals(x))&&(Q.type!=CKEDITOR.NODE_ELEMENT||!P||!Q.equals(M.root))}}if(O&&!this._.guardRTL){var y=K.type==CKEDITOR.NODE_ELEMENT?K:K.getParent(),v=K.type==CKEDITOR.NODE_ELEMENT?J?K.getChild(J-1):null:K.getPrevious();this._.guardRTL=function(Q,P){return(!P||!y.equals(Q))&&(!v||!Q.equals(v))&&(Q.type!=CKEDITOR.NODE_ELEMENT||!P||!Q.equals(M.root))}}var t=O?this._.guardRTL:this._.guardLTR;H=G?function(Q,P){return !1===t(Q,P)?!1:G(Q,P)}:t;if(this.current){L=this.current[E](!1,F,H)}else{if(O){L.type==CKEDITOR.NODE_ELEMENT&&(L=0<I?L.getChild(I-1):!1===H(L,!0)?null:L.getPreviousSourceNode(!0,F,H))}else{if(L=K,L.type==CKEDITOR.NODE_ELEMENT&&!(L=L.getChild(J))){L=!1===H(K,!0)?null:K.getNextSourceNode(!0,F,H)}}L&&!1===H(L)&&(L=null)}for(;L&&!this._.end;){this.current=L;if(!this.evaluator||!1!==this.evaluator(L)){if(!N){return L}}else{if(N&&this.evaluator){return !1}}L=L[E](!1,F,H)}this.end();return this.current=null},c9=function(v){for(var t,x=null;t=iN.call(this,v);){x=t}return x},fl=function(v){if(cR(v)){return !1}if(v.type==CKEDITOR.NODE_TEXT){return !0}if(v.type==CKEDITOR.NODE_ELEMENT){if(v.is(CKEDITOR.dtd.$inline)||"false"==v.getAttribute("contenteditable")){return !0}var t;if(t=!CKEDITOR.env.needsBrFiller){if(t=v.is(cz)){v:{t=0;for(var x=v.getChildCount();t<x;++t){if(!cR(v.getChild(t))){t=!1;break v}}t=!0}}}if(t){return !0}}return !1};CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(t){this.range=t;this._={}},proto:{end:function(){this._.end=1},next:function(){return iN.call(this)},previous:function(){return iN.call(this,1)},checkForward:function(){return !1!==iN.call(this,0,1)},checkBackward:function(){return !1!==iN.call(this,1,1)},lastForward:function(){return c9.call(this)},lastBackward:function(){return c9.call(this,1)},reset:function(){delete this.current;this._={}}}});var eT={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},eA={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(t){return"none"==this.getComputedStyle("float")&&!(this.getComputedStyle("position") in eA)&&eT[this.getComputedStyle("display")]?!0:!!(this.is(CKEDITOR.dtd.$block)||t&&this.is(t))};CKEDITOR.dom.walker.blockBoundary=function(t){return function(v){return !(v.type==CKEDITOR.NODE_ELEMENT&&v.isBlockBoundary(t))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};CKEDITOR.dom.walker.bookmark=function(v,t){function x(y){return y&&y.getName&&"span"==y.getName()&&y.data("cke-bookmark")}return function(E){var B,y;B=E&&E.type!=CKEDITOR.NODE_ELEMENT&&(y=E.getParent())&&x(y);B=v?B:B||x(E);return !!(t^B)}};CKEDITOR.dom.walker.whitespaces=function(t){return function(v){var x;v&&v.type==CKEDITOR.NODE_TEXT&&(x=!CKEDITOR.tools.trim(v.getText())||CKEDITOR.env.webkit&&"\u200b"==v.getText());return !!(t^x)}};CKEDITOR.dom.walker.invisible=function(v){var t=CKEDITOR.dom.walker.whitespaces();return function(x){t(x)?x=1:(x.type==CKEDITOR.NODE_TEXT&&(x=x.getParent()),x=!x.$.offsetHeight);return !!(v^x)}};CKEDITOR.dom.walker.nodeType=function(v,t){return function(x){return !!(t^x.type==v)}};CKEDITOR.dom.walker.bogus=function(v){function t(x){return !g4(x)&&!gM(x)}return function(y){var x=CKEDITOR.env.needsBrFiller?y.is&&y.is("br"):y.getText&&b7.test(y.getText());x&&(x=y.getParent(),y=y.getNext(t),x=x.isBlockBoundary()&&(!y||y.type==CKEDITOR.NODE_ELEMENT&&y.isBlockBoundary()));return !!(v^x)}};CKEDITOR.dom.walker.temp=function(t){return function(v){v.type!=CKEDITOR.NODE_ELEMENT&&(v=v.getParent());v=v&&v.hasAttribute("data-cke-temp");return !!(t^v)}};var b7=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,g4=CKEDITOR.dom.walker.whitespaces(),gM=CKEDITOR.dom.walker.bookmark(),d9=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(t){return function(v){v=g4(v)||gM(v)||d9(v);return !!(t^v)}};var cR=CKEDITOR.dom.walker.ignored(),cz,dR=CKEDITOR.dtd.$block,bG={},gt;for(gt in dR){CKEDITOR.dtd[gt]["#"]&&(bG[gt]=1)}cz=bG;CKEDITOR.dom.walker.editable=function(t){return function(v){return !!(t^fl(v))}};CKEDITOR.dom.element.prototype.getBogus=function(){var t=this;do{t=t.getPreviousSourceNode()}while(gM(t)||g4(t)||t.type==CKEDITOR.NODE_ELEMENT&&t.is(CKEDITOR.dtd.$inline)&&!t.is(CKEDITOR.dtd.$empty));return t&&(CKEDITOR.env.needsBrFiller?t.is&&t.is("br"):t.getText&&b7.test(t.getText()))?t:!1};CKEDITOR.dom.range=function(v){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=!0;var t=v instanceof CKEDITOR.dom.document;this.document=t?v:v.getDocument();this.root=t?v.getBody():v};var bo=function(){var v=!1,t=CKEDITOR.dom.walker.whitespaces(),y=CKEDITOR.dom.walker.bookmark(!0),x=CKEDITOR.dom.walker.bogus();return function(B){return y(B)||t(B)?!0:x(B)&&!v?v=!0:B.type==CKEDITOR.NODE_TEXT&&(B.hasAscendant("pre")||CKEDITOR.tools.trim(B.getText()).length)||B.type==CKEDITOR.NODE_ELEMENT&&!B.is(dq)?!1:!0}},aE=function(t){return function(){var v;return this[t?"getPreviousNode":"getNextNode"](function(x){!v&&f1(x)&&(v=x);return cX(x)&&!(aW(x)&&x.equals(v))})}},c3=function(t){t.collapsed=t.startContainer&&t.endContainer&&t.startContainer.equals(t.endContainer)&&t.startOffset==t.endOffset},fI=function(Q,P,O,N){Q.optimizeBookmark();var M=Q.startContainer,L=Q.endContainer,K=Q.startOffset,J=Q.endOffset,I,H;L.type==CKEDITOR.NODE_TEXT?L=L.split(J):0<L.getChildCount()&&(J>=L.getChildCount()?(L=L.append(Q.document.createText("")),H=!0):L=L.getChild(J));M.type==CKEDITOR.NODE_TEXT?(M.split(K),M.equals(L)&&(L=M.getNext())):K?K>=M.getChildCount()?(M=M.append(Q.document.createText("")),I=!0):M=M.getChild(K).getPrevious():(M=M.append(Q.document.createText(""),1),I=!0);var K=M.getParents(),J=L.getParents(),G,F,B;for(G=0;G<K.length&&!(F=K[G],B=J[G],!F.equals(B));G++){}for(var E=O,y,x,v,t=G;t<K.length;t++){y=K[t];E&&!y.equals(M)&&(x=E.append(y.clone()));for(y=y.getNext();y&&!y.equals(J[t])&&!y.equals(L);){v=y.getNext(),2==P?E.append(y.clone(!0)):(y.remove(),1==P&&E.append(y)),y=v}E&&(E=x)}E=O;for(O=G;O<J.length;O++){y=J[O];0<P&&!y.equals(L)&&(x=E.append(y.clone()));if(!K[O]||y.$.parentNode!=K[O].$.parentNode){for(y=y.getPrevious();y&&!y.equals(K[O])&&!y.equals(M);){v=y.getPrevious(),2==P?E.$.insertBefore(y.$.cloneNode(!0),E.$.firstChild):(y.remove(),1==P&&E.$.insertBefore(y.$,E.$.firstChild)),y=v}}E&&(E=x)}if(2==P){F=Q.startContainer,F.type==CKEDITOR.NODE_TEXT&&(F.$.data+=F.$.nextSibling.data,F.$.parentNode.removeChild(F.$.nextSibling)),Q=Q.endContainer,Q.type==CKEDITOR.NODE_TEXT&&Q.$.nextSibling&&(Q.$.data+=Q.$.nextSibling.data,Q.$.parentNode.removeChild(Q.$.nextSibling))}else{if(F&&B&&(M.$.parentNode!=F.$.parentNode||L.$.parentNode!=B.$.parentNode)){P=B.getIndex(),I&&B.$.parentNode==M.$.parentNode&&P--,N&&F.type==CKEDITOR.NODE_ELEMENT?(N=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',Q.document),N.insertAfter(F),F.mergeSiblings(!1),Q.moveToBookmark({startNode:N})):Q.setStart(B.getParent(),P)}Q.collapse(!0)}I&&M.remove();H&&L.$.parentNode&&L.remove()},dq={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},aW=CKEDITOR.dom.walker.bogus(),fq=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,cX=CKEDITOR.dom.walker.editable(),f1=CKEDITOR.dom.walker.ignored(!0),cF=CKEDITOR.dom.range,al=function(v){var t=v.container,B=v.offset,y;y=t;var x=B;if(y=y.type!=CKEDITOR.NODE_ELEMENT||0===x||x==y.getChildCount()?0:y.getChild(x-1).type==CKEDITOR.NODE_TEXT&&y.getChild(x).type==CKEDITOR.NODE_TEXT){t=t.getChild(B-1),B=t.getLength()}t.type==CKEDITOR.NODE_ELEMENT&&1<B&&(B=t.getChild(B-1).getIndex(!0)+1);if(t.type==CKEDITOR.NODE_TEXT){y=t;for(x=0;(y=y.getPrevious())&&y.type==CKEDITOR.NODE_TEXT;){x+=y.getLength()}B+=x}v.container=t;v.offset=B},dz=function(t){return function(v){return cn(v)||bM(v)||v.type==CKEDITOR.NODE_ELEMENT&&v.isEmptyInlineRemoveable()||t.is("table")&&v.is("caption")?!1:!0}},cn=CKEDITOR.dom.walker.whitespaces(),bM=CKEDITOR.dom.walker.bookmark(!1),i=function(v,t){for(;v;){if(v.type==CKEDITOR.NODE_ELEMENT){if("false"==v.getAttribute("contentEditable")&&!v.data("cke-editable")){return 0}if(v.is("html")||"true"==v.getAttribute("contentEditable")&&(v.contains(t)||v.equals(t))){break}}v=v.getParent()}return 1};cF.prototype={clone:function(){var t=new CKEDITOR.dom.range(this.root);t.startContainer=this.startContainer;t.startOffset=this.startOffset;t.endContainer=this.endContainer;t.endOffset=this.endOffset;t.collapsed=this.collapsed;return t},collapse:function(t){t?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset);this.collapsed=!0},cloneContents:function(){var t=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||fI(this,2,t);return t},deleteContents:function(t){this.collapsed||fI(this,0,null,t)},extractContents:function(v){var t=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||fI(this,1,t,v);return t},createBookmark:function(v){var t,E,B,y,x=this.collapsed;t=this.document.createElement("span");t.data("cke-bookmark",1);t.setStyle("display","none");t.setHtml("&nbsp;");v&&(B="cke_bm_"+CKEDITOR.tools.getNextNumber(),t.setAttribute("id",B+(x?"C":"S")));x||(E=t.clone(),E.setHtml("&nbsp;"),v&&E.setAttribute("id",B+"E"),y=this.clone(),y.collapse(),y.insertNode(E));y=this.clone();y.collapse(!0);y.insertNode(t);E?(this.setStartAfter(t),this.setEndBefore(E)):this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END);return{startNode:v?B+(x?"C":"S"):t,endNode:v?B+"E":E,serializable:v,collapsed:x}},createBookmark2:function(v){var t=this.collapsed,y={container:this.startContainer,offset:this.startOffset},x={container:this.endContainer,offset:this.endOffset};v&&(al(y),t||al(x));return{start:y.container.getAddress(v),end:t?null:x.container.getAddress(v),startOffset:y.offset,endOffset:x.offset,normalized:v,collapsed:t,is2:!0}},moveToBookmark:function(v){if(v.is2){var t=this.document.getByAddress(v.start,v.normalized),y=v.startOffset,x=v.end&&this.document.getByAddress(v.end,v.normalized);v=v.endOffset;this.setStart(t,y);x?this.setEnd(x,v):this.collapse(!0)}else{t=(y=v.serializable)?this.document.getById(v.startNode):v.startNode,v=y?this.document.getById(v.endNode):v.endNode,this.setStartBefore(t),t.remove(),v?(this.setEndBefore(v),v.remove()):this.collapse(!0)}},getBoundaryNodes:function(){var v=this.startContainer,t=this.endContainer,B=this.startOffset,y=this.endOffset,x;if(v.type==CKEDITOR.NODE_ELEMENT){if(x=v.getChildCount(),x>B){v=v.getChild(B)}else{if(1>x){v=v.getPreviousSourceNode()}else{for(v=v.$;v.lastChild;){v=v.lastChild}v=new CKEDITOR.dom.node(v);v=v.getNextSourceNode()||v}}}if(t.type==CKEDITOR.NODE_ELEMENT){if(x=t.getChildCount(),x>y){t=t.getChild(y).getPreviousSourceNode(!0)}else{if(1>x){t=t.getPreviousSourceNode()}else{for(t=t.$;t.lastChild;){t=t.lastChild}t=new CKEDITOR.dom.node(t)}}}v.getPosition(t)&CKEDITOR.POSITION_FOLLOWING&&(v=t);return{startNode:v,endNode:t}},getCommonAncestor:function(v,t){var y=this.startContainer,x=this.endContainer,y=y.equals(x)?v&&y.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?y.getChild(this.startOffset):y:y.getCommonAncestor(x);return t&&!y.is?y.getParent():y},optimize:function(){var v=this.startContainer,t=this.startOffset;v.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=v.getLength()&&this.setStartAfter(v):this.setStartBefore(v));v=this.endContainer;t=this.endOffset;v.type!=CKEDITOR.NODE_ELEMENT&&(t?t>=v.getLength()&&this.setEndAfter(v):this.setEndBefore(v))},optimizeBookmark:function(){var v=this.startContainer,t=this.endContainer;v.is&&v.is("span")&&v.data("cke-bookmark")&&this.setStartAt(v,CKEDITOR.POSITION_BEFORE_START);t&&t.is&&(t.is("span")&&t.data("cke-bookmark"))&&this.setEndAt(t,CKEDITOR.POSITION_AFTER_END)},trim:function(v,t){var E=this.startContainer,B=this.startOffset,y=this.collapsed;if((!v||y)&&E&&E.type==CKEDITOR.NODE_TEXT){if(B){if(B>=E.getLength()){B=E.getIndex()+1,E=E.getParent()}else{var x=E.split(B),B=E.getIndex()+1,E=E.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(x,this.endOffset-this.startOffset):E.equals(this.endContainer)&&(this.endOffset+=1)}}else{B=E.getIndex(),E=E.getParent()}this.setStart(E,B);if(y){this.collapse(!0);return}}E=this.endContainer;B=this.endOffset;!t&&(!y&&E&&E.type==CKEDITOR.NODE_TEXT)&&(B?(B>=E.getLength()||E.split(B),B=E.getIndex()+1):B=E.getIndex(),E=E.getParent(),this.setEnd(E,B))},enlarge:function(aa,Z){function Y(t){return t&&t.type==CKEDITOR.NODE_ELEMENT&&t.hasAttribute("contenteditable")?null:t}var X=RegExp(/[^\s\ufeff]/);switch(aa){case CKEDITOR.ENLARGE_INLINE:var W=1;case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed){break}var V=this.getCommonAncestor(),T=this.root,S,R,Q,P,O,M=!1,N,K;N=this.startContainer;var J=this.startOffset;if(N.type==CKEDITOR.NODE_TEXT){if(J&&(N=!CKEDITOR.tools.trim(N.substring(0,J)).length&&N,M=!!N),N&&!(P=N.getPrevious())){Q=N.getParent()}}else{J&&(P=N.getChild(J-1)||N.getLast()),P||(Q=N)}for(Q=Y(Q);Q||P;){if(Q&&!P){!O&&Q.equals(V)&&(O=!0);if(W?Q.isBlockBoundary():!T.contains(Q)){break}if(!M||"inline"!=Q.getComputedStyle("display")){M=!1,O?S=Q:this.setStartBefore(Q)}P=Q.getPrevious()}for(;P;){if(N=!1,P.type==CKEDITOR.NODE_COMMENT){P=P.getPrevious()}else{if(P.type==CKEDITOR.NODE_TEXT){K=P.getText(),X.test(K)&&(P=null),N=/[\s\ufeff]$/.test(K)}else{if((0<P.$.offsetWidth||Z&&P.is("br"))&&!P.data("cke-bookmark")){if(M&&CKEDITOR.dtd.$removeEmpty[P.getName()]){K=P.getText();if(X.test(K)){P=null}else{for(var J=P.$.getElementsByTagName("*"),H=0,y;y=J[H++];){if(!CKEDITOR.dtd.$removeEmpty[y.nodeName.toLowerCase()]){P=null;break}}}P&&(N=!!K.length)}else{P=null}}}N&&(M?O?S=Q:Q&&this.setStartBefore(Q):M=!0);if(P){N=P.getPrevious();if(!Q&&!N){Q=P;P=null;break}P=N}else{Q=null}}}Q&&(Q=Y(Q.getParent()))}N=this.endContainer;J=this.endOffset;Q=P=null;O=M=!1;var E=function(v,t){var ac=new CKEDITOR.dom.range(T);ac.setStart(v,t);ac.setEndAt(T,CKEDITOR.POSITION_BEFORE_END);var ac=new CKEDITOR.dom.walker(ac),ab;for(ac.guard=function(ad){return !(ad.type==CKEDITOR.NODE_ELEMENT&&ad.isBlockBoundary())};ab=ac.next();){if(ab.type!=CKEDITOR.NODE_TEXT){return !1}K=ab!=v?ab.getText():ab.substring(t);if(X.test(K)){return !1}}return !0};if(N.type==CKEDITOR.NODE_TEXT){if(CKEDITOR.tools.trim(N.substring(J)).length){M=!0}else{if(M=!N.getLength(),J==N.getLength()){if(!(P=N.getNext())){Q=N.getParent()}}else{E(N,J)&&(Q=N.getParent())}}}else{(P=N.getChild(J))||(Q=N)}for(;Q||P;){if(Q&&!P){!O&&Q.equals(V)&&(O=!0);if(W?Q.isBlockBoundary():!T.contains(Q)){break}if(!M||"inline"!=Q.getComputedStyle("display")){M=!1,O?R=Q:Q&&this.setEndAfter(Q)}P=Q.getNext()}for(;P;){N=!1;if(P.type==CKEDITOR.NODE_TEXT){K=P.getText(),E(P,0)||(P=null),N=/^[\s\ufeff]/.test(K)}else{if(P.type==CKEDITOR.NODE_ELEMENT){if((0<P.$.offsetWidth||Z&&P.is("br"))&&!P.data("cke-bookmark")){if(M&&CKEDITOR.dtd.$removeEmpty[P.getName()]){K=P.getText();if(X.test(K)){P=null}else{J=P.$.getElementsByTagName("*");for(H=0;y=J[H++];){if(!CKEDITOR.dtd.$removeEmpty[y.nodeName.toLowerCase()]){P=null;break}}}P&&(N=!!K.length)}else{P=null}}}else{N=1}}N&&M&&(O?R=Q:this.setEndAfter(Q));if(P){N=P.getNext();if(!Q&&!N){Q=P;P=null;break}P=N}else{Q=null}}Q&&(Q=Y(Q.getParent()))}S&&R&&(V=S.contains(R)?R:S,this.setStartBefore(V),this.setEndAfter(V));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:Q=new CKEDITOR.dom.range(this.root);T=this.root;Q.setStartAt(T,CKEDITOR.POSITION_AFTER_START);Q.setEnd(this.startContainer,this.startOffset);Q=new CKEDITOR.dom.walker(Q);var L,x,I=CKEDITOR.dom.walker.blockBoundary(aa==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),G=null,U=function(v){if(v.type==CKEDITOR.NODE_ELEMENT&&"false"==v.getAttribute("contenteditable")){if(G){if(G.equals(v)){G=null;return}}else{G=v}}else{if(G){return}}var t=I(v);t||(L=v);return t},W=function(v){var t=U(v);!t&&v.is&&v.is("br")&&(x=v);return t};Q.guard=U;Q=Q.lastBackward();L=L||T;this.setStartAt(L,!L.is("br")&&(!Q&&this.checkStartOfBlock()||Q&&L.contains(Q))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(aa==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){Q=this.clone();Q=new CKEDITOR.dom.walker(Q);var F=CKEDITOR.dom.walker.whitespaces(),B=CKEDITOR.dom.walker.bookmark();Q.evaluator=function(t){return !F(t)&&!B(t)};if((Q=Q.previous())&&Q.type==CKEDITOR.NODE_ELEMENT&&Q.is("br")){break}}Q=this.clone();Q.collapse();Q.setEndAt(T,CKEDITOR.POSITION_BEFORE_END);Q=new CKEDITOR.dom.walker(Q);Q.guard=aa==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?W:U;L=null;Q=Q.lastForward();L=L||T;this.setEndAt(L,!Q&&this.checkEndOfBlock()||Q&&L.contains(Q)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);x&&this.setEndAfter(x)}},shrink:function(K,J,I){if(!this.collapsed){K=K||CKEDITOR.SHRINK_TEXT;var H=this.clone(),G=this.startContainer,F=this.endContainer,E=this.startOffset,B=this.endOffset,y=1,x=1;G&&G.type==CKEDITOR.NODE_TEXT&&(E?E>=G.getLength()?H.setStartAfter(G):(H.setStartBefore(G),y=0):H.setStartBefore(G));F&&F.type==CKEDITOR.NODE_TEXT&&(B?B>=F.getLength()?H.setEndAfter(F):(H.setEndAfter(F),x=0):H.setEndBefore(F));var H=new CKEDITOR.dom.walker(H),v=CKEDITOR.dom.walker.bookmark();H.evaluator=function(L){return L.type==(K==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var t;H.guard=function(L,M){if(v(L)){return !0}if(K==CKEDITOR.SHRINK_ELEMENT&&L.type==CKEDITOR.NODE_TEXT||M&&L.equals(t)||!1===I&&L.type==CKEDITOR.NODE_ELEMENT&&L.isBlockBoundary()||L.type==CKEDITOR.NODE_ELEMENT&&L.hasAttribute("contenteditable")){return !1}!M&&L.type==CKEDITOR.NODE_ELEMENT&&(t=L);return !0};y&&(G=H[K==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(G,J?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START);x&&(H.reset(),(H=H[K==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(H,J?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END));return !(!y&&!x)}},insertNode:function(v){this.optimizeBookmark();this.trim(!1,!0);var t=this.startContainer,x=t.getChild(this.startOffset);x?v.insertBefore(x):t.append(v);v.getParent()&&v.getParent().equals(this.endContainer)&&this.endOffset++;this.setStartBefore(v)},moveToPosition:function(v,t){this.setStartAt(v,t);this.collapse(!0)},moveToRange:function(t){this.setStart(t.startContainer,t.startOffset);this.setEnd(t.endContainer,t.endOffset)},selectNodeContents:function(t){this.setStart(t,0);this.setEnd(t,t.type==CKEDITOR.NODE_TEXT?t.getLength():t.getChildCount())},setStart:function(v,t){v.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[v.getName()]&&(t=v.getIndex(),v=v.getParent());this.startContainer=v;this.startOffset=t;this.endContainer||(this.endContainer=v,this.endOffset=t);c3(this)},setEnd:function(v,t){v.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[v.getName()]&&(t=v.getIndex()+1,v=v.getParent());this.endContainer=v;this.endOffset=t;this.startContainer||(this.startContainer=v,this.startOffset=t);c3(this)},setStartAfter:function(t){this.setStart(t.getParent(),t.getIndex()+1)},setStartBefore:function(t){this.setStart(t.getParent(),t.getIndex())},setEndAfter:function(t){this.setEnd(t.getParent(),t.getIndex()+1)},setEndBefore:function(t){this.setEnd(t.getParent(),t.getIndex())},setStartAt:function(v,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setStart(v,0);break;case CKEDITOR.POSITION_BEFORE_END:v.type==CKEDITOR.NODE_TEXT?this.setStart(v,v.getLength()):this.setStart(v,v.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(v);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(v)}c3(this)},setEndAt:function(v,t){switch(t){case CKEDITOR.POSITION_AFTER_START:this.setEnd(v,0);break;case CKEDITOR.POSITION_BEFORE_END:v.type==CKEDITOR.NODE_TEXT?this.setEnd(v,v.getLength()):this.setEnd(v,v.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(v);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(v)}c3(this)},fixBlock:function(v,t){var y=this.createBookmark(),x=this.document.createElement(t);this.collapse(v);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(x);x.trim();x.appendBogus();this.insertNode(x);this.moveToBookmark(y);return x},splitBlock:function(v){var t=new CKEDITOR.dom.elementPath(this.startContainer,this.root),E=new CKEDITOR.dom.elementPath(this.endContainer,this.root),B=t.block,y=E.block,x=null;if(!t.blockLimit.equals(E.blockLimit)){return null}"br"!=v&&(B||(B=this.fixBlock(!0,v),y=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block),y||(y=this.fixBlock(!1,v)));v=B&&this.checkStartOfBlock();t=y&&this.checkEndOfBlock();this.deleteContents();B&&B.equals(y)&&(t?(x=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(y,CKEDITOR.POSITION_AFTER_END),y=null):v?(x=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(B,CKEDITOR.POSITION_BEFORE_START),B=null):(y=this.splitElement(B),B.is("ul","ol")||B.appendBogus()));return{previousBlock:B,nextBlock:y,wasStartOfBlock:v,wasEndOfBlock:t,elementPath:x}},splitElement:function(v){if(!this.collapsed){return null}this.setEndAt(v,CKEDITOR.POSITION_BEFORE_END);var t=this.extractContents(),x=v.clone(!1);t.appendTo(x);x.insertAfter(v);this.moveToPosition(v,CKEDITOR.POSITION_AFTER_END);return x},removeEmptyBlocksAtEnd:function(v){for(var t=this.createBookmark(),B=this[v?"endPath":"startPath"](),y=B.block||B.blockLimit,x;y&&!y.equals(B.root)&&!y.getFirst(dz(y));){x=y.getParent(),this[v?"setEndAt":"setStartAt"](y,CKEDITOR.POSITION_AFTER_END),y.remove(1),y=x}this.moveToBookmark(t)},startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(v,t){var F=t==CKEDITOR.START,E=this.clone();E.collapse(F);E[F?"setStartAt":"setEndAt"](v,F?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);var B=E=new CKEDITOR.dom.walker(E),y=CKEDITOR.dom.walker.whitespaces(),x=CKEDITOR.dom.walker.bookmark(1);B.evaluator=function(G){return x(G)||y(G)?!0:!F&&aW(G)||G.type==CKEDITOR.NODE_ELEMENT&&G.is(CKEDITOR.dtd.$removeEmpty)};return E[F?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var v=this.startContainer,t=this.startOffset;CKEDITOR.env.ie&&(t&&v.type==CKEDITOR.NODE_TEXT)&&(v=CKEDITOR.tools.ltrim(v.substring(0,t)),fq.test(v)&&this.trim(0,1));this.trim();v=new CKEDITOR.dom.elementPath(this.startContainer,this.root);t=this.clone();t.collapse(!0);t.setStartAt(v.block||v.blockLimit,CKEDITOR.POSITION_AFTER_START);v=new CKEDITOR.dom.walker(t);v.evaluator=bo();return v.checkBackward()},checkEndOfBlock:function(){var v=this.endContainer,t=this.endOffset;CKEDITOR.env.ie&&v.type==CKEDITOR.NODE_TEXT&&(v=CKEDITOR.tools.rtrim(v.substring(t)),fq.test(v)&&this.trim(1,0));this.trim();v=new CKEDITOR.dom.elementPath(this.endContainer,this.root);t=this.clone();t.collapse(!1);t.setEndAt(v.block||v.blockLimit,CKEDITOR.POSITION_BEFORE_END);v=new CKEDITOR.dom.walker(t);v.evaluator=bo();return v.checkForward()},getPreviousNode:function(v,t,y){var x=this.clone();x.collapse(1);x.setStartAt(y||this.root,CKEDITOR.POSITION_AFTER_START);y=new CKEDITOR.dom.walker(x);y.evaluator=v;y.guard=t;return y.previous()},getNextNode:function(v,t,y){var x=this.clone();x.collapse();x.setEndAt(y||this.root,CKEDITOR.POSITION_BEFORE_END);y=new CKEDITOR.dom.walker(x);y.evaluator=v;y.guard=t;return y.next()},checkReadOnly:function(){var v=this.startContainer,t=this.endContainer;return !(i(v,t)&&i(t,v))},moveToElementEditablePosition:function(v,t){if(v.type==CKEDITOR.NODE_ELEMENT&&!v.isEditable(!1)){return this.moveToPosition(v,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0}for(var E=0;v;){if(v.type==CKEDITOR.NODE_TEXT){t&&this.endContainer&&this.checkEndOfBlock()&&fq.test(v.getText())?this.moveToPosition(v,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(v,t?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);E=1;break}if(v.type==CKEDITOR.NODE_ELEMENT){if(v.isEditable()){this.moveToPosition(v,t?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),E=1}else{if(t&&v.is("br")&&this.endContainer&&this.checkEndOfBlock()){this.moveToPosition(v,CKEDITOR.POSITION_BEFORE_START)}else{if("false"==v.getAttribute("contenteditable")&&v.is(CKEDITOR.dtd.$block)){return this.setStartBefore(v),this.setEndAfter(v),!0}}}}var B=v,y=E,x=void 0;B.type==CKEDITOR.NODE_ELEMENT&&B.isEditable(!1)&&(x=B[t?"getLast":"getFirst"](f1));!y&&!x&&(x=B[t?"getPrevious":"getNext"](f1));v=x}return !!E},moveToClosestEditablePosition:function(v,t){var E=new CKEDITOR.dom.range(this.root),B=0,y,x=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];E.moveToPosition(v,x[t?0:1]);if(v.is(CKEDITOR.dtd.$block)){if(y=E[t?"getNextEditableNode":"getPreviousEditableNode"]()){B=1,y.type==CKEDITOR.NODE_ELEMENT&&y.is(CKEDITOR.dtd.$block)&&"false"==y.getAttribute("contenteditable")?(E.setStartAt(y,CKEDITOR.POSITION_BEFORE_START),E.setEndAt(y,CKEDITOR.POSITION_AFTER_END)):E.moveToPosition(y,x[t?1:0])}}else{B=1}B&&this.moveToRange(E);return !!B},moveToElementEditStart:function(t){return this.moveToElementEditablePosition(t)},moveToElementEditEnd:function(t){return this.moveToElementEditablePosition(t,!0)},getEnclosedNode:function(){var v=this.clone();v.optimize();if(v.startContainer.type!=CKEDITOR.NODE_ELEMENT||v.endContainer.type!=CKEDITOR.NODE_ELEMENT){return null}var v=new CKEDITOR.dom.walker(v),t=CKEDITOR.dom.walker.bookmark(!1,!0),y=CKEDITOR.dom.walker.whitespaces(!0);v.evaluator=function(B){return y(B)&&t(B)};var x=v.next();v.reset();return x&&x.equals(v.previous())?x:null},getTouchedStartNode:function(){var t=this.startContainer;return this.collapsed||t.type!=CKEDITOR.NODE_ELEMENT?t:t.getChild(this.startOffset)||t},getTouchedEndNode:function(){var t=this.endContainer;return this.collapsed||t.type!=CKEDITOR.NODE_ELEMENT?t:t.getChild(this.endOffset-1)||t},getNextEditableNode:aE(),getPreviousEditableNode:aE(1),scrollIntoView:function(){var v=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),t,B,y,x=this.clone();x.optimize();(y=x.startContainer.type==CKEDITOR.NODE_TEXT)?(B=x.startContainer.getText(),t=x.startContainer.split(x.startOffset),v.insertAfter(x.startContainer)):x.insertNode(v);v.scrollIntoView();y&&(x.startContainer.setText(B),t.remove());v.remove()}};CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.ENLARGE_INLINE=4;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;"use strict";var iT=function(t){1>arguments.length||(this.range=t,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))},eF=function(v,t,x){for(v=v.getNextSourceNode(t,null,x);!cL(v);){v=v.getNextSourceNode(t,null,x)}return v},en=function(v,t,E,B){v:{if(void 0==B){var y=[];E.forEach(function(F){if("true"==F.getAttribute("contenteditable")){return y.push(F),!1}},CKEDITOR.NODE_ELEMENT,!0);B=y}for(var x;x=B.shift();){if(x.getDtd().p){B={element:x,remaining:B};break v}}B=null}if(!B){return 0}if((x=CKEDITOR.filter.instances[B.element.data("cke-filter")])&&!x.check(t)){return en(v,t,E,B.remaining)}t=new CKEDITOR.dom.range(B.element);t.selectNodeContents(B.element);t=t.createIterator();t.enlargeBr=v.enlargeBr;t.enforceRealBlocks=v.enforceRealBlocks;t.activeFilter=t.filter=x;v._.nestedEditable={element:B.element,container:E,remaining:B.remaining,iterator:t};return 1},iZ=/^[\r\n\t ]+$/,cL=CKEDITOR.dom.walker.bookmark(!1,!0),iq=CKEDITOR.dom.walker.whitespaces(!0),hF=function(t){return cL(t)&&iq(t)};iT.prototype={getNextParagraph:function(L){var K,J,I,H,G;L=L||"p";if(this._.nestedEditable){if(K=this._.nestedEditable.iterator.getNextParagraph(L)){return this.activeFilter=this._.nestedEditable.iterator.activeFilter,K}this.activeFilter=this.filter;if(en(this,L,this._.nestedEditable.container,this._.nestedEditable.remaining)){return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(L)}this._.nestedEditable=null}if(!this.range.root.getDtd()[L]){return null}if(!this._.started){var F=this.range.clone();F.shrink(CKEDITOR.SHRINK_ELEMENT,!0);J=F.endContainer.hasAscendant("pre",!0)||F.startContainer.hasAscendant("pre",!0);F.enlarge(this.forceBrBreak&&!J||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(!F.collapsed){J=new CKEDITOR.dom.walker(F.clone());var E=CKEDITOR.dom.walker.bookmark(!0,!0);J.evaluator=E;this._.nextNode=J.next();J=new CKEDITOR.dom.walker(F.clone());J.evaluator=E;J=J.previous();this._.lastNode=J.getNextSourceNode(!0);this._.lastNode&&(this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary())&&(E=this.range.clone(),E.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),E.checkEndOfBlock()&&(E=new CKEDITOR.dom.elementPath(E.endContainer,E.root),this._.lastNode=(E.block||E.blockLimit).getNextSourceNode(!0)));if(!this._.lastNode||!F.root.contains(this._.lastNode)){this._.lastNode=this._.docEndMarker=F.document.createText(""),this._.lastNode.insertAfter(J)}F=null}this._.started=1;J=F}E=this._.nextNode;F=this._.lastNode;for(this._.nextNode=null;E;){var B=0,y=E.hasAscendant("pre"),x=E.type!=CKEDITOR.NODE_ELEMENT,v=0;if(x){E.type==CKEDITOR.NODE_TEXT&&iZ.test(E.getText())&&(x=0)}else{var t=E.getName();if(CKEDITOR.dtd.$block[t]&&"false"==E.getAttribute("contenteditable")){K=E;en(this,L,K);break}else{if(E.isBlockBoundary(this.forceBrBreak&&!y&&{br:1})){if("br"==t){x=1}else{if(!J&&!E.getChildCount()&&"hr"!=t){K=E;I=E.equals(F);break}}J&&(J.setEndAt(E,CKEDITOR.POSITION_BEFORE_START),"br"!=t&&(this._.nextNode=E));B=1}else{if(E.getFirst()){J||(J=this.range.clone(),J.setStartAt(E,CKEDITOR.POSITION_BEFORE_START));E=E.getFirst();continue}x=1}}}x&&!J&&(J=this.range.clone(),J.setStartAt(E,CKEDITOR.POSITION_BEFORE_START));I=(!B||x)&&E.equals(F);if(J&&!B){for(;!E.getNext(hF)&&!I;){t=E.getParent();if(t.isBlockBoundary(this.forceBrBreak&&!y&&{br:1})){B=1;x=0;I||t.equals(F);J.setEndAt(t,CKEDITOR.POSITION_BEFORE_END);break}E=t;x=1;I=E.equals(F);v=1}}x&&J.setEndAt(E,CKEDITOR.POSITION_AFTER_END);E=eF(E,v,F);if((I=!E)||B&&J){break}}if(!K){if(!J){return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null}K=new CKEDITOR.dom.elementPath(J.startContainer,J.root);E=K.blockLimit;B={div:1,th:1,td:1};K=K.block;if(!K&&E&&!this.enforceRealBlocks&&B[E.getName()]&&J.checkStartOfBlock()&&J.checkEndOfBlock()&&!E.equals(J.root)){K=E}else{if(!K||this.enforceRealBlocks&&"li"==K.getName()){K=this.range.document.createElement(L),J.extractContents().appendTo(K),K.trim(),J.insertNode(K),H=G=!0}else{if("li"!=K.getName()){if(!J.checkStartOfBlock()||!J.checkEndOfBlock()){K=K.clone(!1),J.extractContents().appendTo(K),K.trim(),G=J.splitBlock(),H=!G.wasStartOfBlock,G=!G.wasEndOfBlock,J.insertNode(K)}}else{I||(this._.nextNode=K.equals(F)?null:eF(J.getBoundaryNodes().endNode,1,F))}}}}H&&(H=K.getPrevious())&&H.type==CKEDITOR.NODE_ELEMENT&&("br"==H.getName()?H.remove():H.getLast()&&"br"==H.getLast().$.nodeName.toLowerCase()&&H.getLast().remove());G&&(H=K.getLast())&&H.type==CKEDITOR.NODE_ELEMENT&&"br"==H.getName()&&(!CKEDITOR.env.needsBrFiller||H.getPrevious(cL)||H.getNext(cL))&&H.remove();this._.nextNode||(this._.nextNode=I||K.equals(F)||!F?null:eF(K,1,F));return K}};CKEDITOR.dom.range.prototype.createIterator=function(){return new iT(this)};CKEDITOR.command=function(v,t){this.uiItems=[];this.exec=function(y){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed()){return !1}this.editorFocus&&v.focus();return !1===this.fire("exec")?!0:!1!==t.exec.call(this,v,y)};this.refresh=function(y,B){if(!this.readOnly&&y.readOnly){return !0}if(this.context&&!B.isContextFor(this.context)||!this.checkAllowed(!0)){return this.disable(),!0}this.startDisabled||this.enable();this.modes&&!this.modes[y.mode]&&this.disable();return !1===this.fire("refresh",{editor:y,path:B})?!0:t.refresh&&!1!==t.refresh.apply(this,arguments)};var x;this.checkAllowed=function(y){return !y&&"boolean"==typeof x?x:x=v.activeFilter.checkFeature(this)};CKEDITOR.tools.extend(this,t,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!t.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this)};CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(!this.preserveState||"undefined"==typeof this.previousState?CKEDITOR.TRISTATE_OFF:this.previousState)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(t){if(this.state==t||t!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()){return !1}this.previousState=this.state;this.state=t;this.fire("state");return !0},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:10000,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85,CKEDITOR.CTRL+89,CKEDITOR.CTRL+90,CKEDITOR.CTRL+CKEDITOR.SHIFT+90]};var a5=function(v,t,F,E,B){var y=t.name;if((E||"function"!=typeof v.elements||v.elements(y))&&(!v.match||v.match(t))){if(E=!B){v:if(v.nothingRequired){E=!0}else{if(B=v.requiredClasses){y=t.classes;for(E=0;E<B.length;++E){if(-1==CKEDITOR.tools.indexOf(y,B[E])){E=!1;break v}}}E=bY(t.styles,v.requiredStyles)&&bY(t.attributes,v.requiredAttributes)}E=!E}if(!E&&(v.propertiesOnly||(F.valid=!0),F.allAttributes||(F.allAttributes=bx(v.attributes,t.attributes,F.validAttributes)),F.allStyles||(F.allStyles=bx(v.styles,t.styles,F.validStyles)),!F.allClasses)){v=v.classes;t=t.classes;E=F.validClasses;if(v){if(!0===v){t=!0}else{B=0;for(var y=t.length,x;B<y;++B){x=t[B],E[x]||(E[x]=v(x))}t=!1}}else{t=!1}F.allClasses=t}}},bx=function(v,t,y){if(!v){return !1}if(!0===v){return !0}for(var x in t){y[x]||(y[x]=v(x,t[x]))}return !1},dv=function(v,t){if(!v){return !1}if(!0===v){return v}if("string"==typeof v){return v=dW(v),"*"==v?!0:CKEDITOR.tools.convertArrayToObject(v.split(t))}if(CKEDITOR.tools.isArray(v)){return v.length?CKEDITOR.tools.convertArrayToObject(v):!1}var B={},y=0,x;for(x in v){B[x]=v[x],y++}return y?B:!1},jn=function(v){if(v._.filterFunction){return v._.filterFunction}var t=/^cke:(object|embed|param)$/,x=/^(object|embed|param)$/;return v._.filterFunction=function(U,T,S,R,Q,P,O){var N=U.name,M,K=!1;Q&&(U.name=N=N.replace(t,"$1"));if(S=S&&S[N]){aN(U);for(N=0;N<S.length;++N){av(v,U,S[N])}r(U)}if(T){N=U.name;S=T.elements[N];var L=T.generic;T={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1};if(!S&&!L){return R.push(U),!0}aN(U);if(S){N=0;for(M=S.length;N<M;++N){a5(S[N],U,T,!0,P)}}if(L){N=0;for(M=L.length;N<M;++N){a5(L[N],U,T,!1,P)}}if(!T.valid){return R.push(U),!0}P=T.validAttributes;N=T.validStyles;S=T.validClasses;M=U.attributes;var L=U.styles,I=M["class"],H=M.style,F,B,E=[],J=[],y=/^data-cke-/,G=!1;delete M.style;delete M["class"];if(!T.allAttributes){for(F in M){if(!P[F]){if(y.test(F)){if(F!=(B=F.replace(/^data-cke-saved-/,""))&&!P[B]){delete M[F],G=!0}}else{delete M[F],G=!0}}}}if(T.allStyles){H&&(M.style=H)}else{for(F in L){N[F]?E.push(F+":"+L[F]):G=!0}E.length&&(M.style=E.sort().join("; "))}if(T.allClasses){I&&(M["class"]=I)}else{for(F in S){S[F]&&J.push(F)}J.length&&(M["class"]=J.sort().join(" "));I&&J.length<I.split(/\s+/).length&&(G=!0)}G&&(K=!0);if(!O&&!jE(U)){return R.push(U),!0}}Q&&(U.name=U.name.replace(x,"cke:$1"));return K}},bY=function(v,t){if(!t){return !0}for(var x=0;x<t.length;++x){if(!(t[x] in v)){return !1}}return !0},iK=function(v){if(!v){return{}}v=v.split(/\s*,\s*/).sort();for(var t={};v.length;){t[v.shift()]=c2}return t},hS=function(v){var t,F,E,B,y={},x=1;for(v=dW(v);t=v.match(g8);){(F=t[2])?(E=cK(F,"styles"),B=cK(F,"attrs"),F=cK(F,"classes")):E=B=F=null,y["$"+x++]={elements:t[1],classes:F,styles:E,attributes:B},v=v.slice(t[0].length)}return y},cK=function(v,t){var x=v.match(gQ[t]);return x?dW(x[1]):null},aN=function(t){t.styles||(t.styles=CKEDITOR.tools.parseCssText(t.attributes.style||"",1));t.classes||(t.classes=t.attributes["class"]?t.attributes["class"].split(/\s+/):[])},r=function(v){var t=v.attributes,x;delete t.style;delete t["class"];if(x=CKEDITOR.tools.writeCssText(v.styles,!0)){t.style=x}v.classes.length&&(t["class"]=v.classes.sort().join(" "))},jE=function(t){switch(t.name){case"a":if(!t.children.length&&!t.attributes.name){return !1}break;case"img":if(!t.attributes.src){return !1}}return !0},hv=function(t){return !t?!1:!0===t?!0:function(v){return v in t}},cs=function(){return new CKEDITOR.htmlParser.element("br")},g2=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&("br"==t.name||h3.$block[t.name])},hW=function(H,G,F){var E=H.name;if(h3.$empty[E]||!H.children.length){"hr"==E&&"br"==G?H.replaceWith(cs()):(H.parent&&F.push({check:"it",el:H.parent}),H.remove())}else{if(h3.$block[E]||"tr"==E){if("br"==G){H.previous&&!g2(H.previous)&&(G=cs(),G.insertBefore(H)),H.next&&!g2(H.next)&&(G=cs(),G.insertAfter(H)),H.replaceWithChildren()}else{var E=H.children,B;H:{B=h3[G];for(var y=0,x=E.length,v;y<x;++y){if(v=E[y],v.type==CKEDITOR.NODE_ELEMENT&&!B[v.name]){B=!1;break H}}B=!0}if(B){H.name=G,H.attributes={},F.push({check:"parent-down",el:H})}else{B=H.parent;for(var y=B.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==B.name,t,x=E.length;0<x;){v=E[--x],y&&(v.type==CKEDITOR.NODE_TEXT||v.type==CKEDITOR.NODE_ELEMENT&&h3.$inline[v.name])?(t||(t=new CKEDITOR.htmlParser.element(G),t.insertAfter(H),F.push({check:"parent-down",el:t})),t.add(v,0)):(t=null,v.insertAfter(H),B.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&v.type==CKEDITOR.NODE_ELEMENT&&!h3[B.name][v.name]&&F.push({check:"el-up",el:v}))}H.remove()}}}else{"style"==E?H.remove():(H.parent&&F.push({check:"it",el:H.parent}),H.replaceWithChildren())}}},av=function(v,t,B){var y,x;for(y=0;y<B.length;++y){if(x=B[y],(!x.check||v.check(x.check,!1))&&(!x.left||x.left(t))){x.right(t,gx);break}}},gK=function(H,G){var F=G.getDefinition(),E=F.attributes,B=F.styles,y,x,v,t;if(H.name!=F.element){return !1}for(y in E){if("class"==y){F=E[y].split(/\s+/);for(v=H.classes.join("|");t=F.pop();){if(-1==v.indexOf(t)){return !1}}}else{if(H.attributes[y]!=E[y]){return !1}}}for(x in B){if(H.styles[x]!=B[x]){return !1}}return !0},f4=function(v,t){var y,x;"string"==typeof v?y=v:v instanceof CKEDITOR.style?x=v:(y=v[0],x=v[1]);return[{element:y,left:x,right:function(B,E){E.transform(B,t)}}]},fM=function(t){return function(v){return gK(v,t)}},fu=function(t){return function(v,x){x[t](v)}},h3=CKEDITOR.dtd,ct=CKEDITOR.tools.copy,dW=CKEDITOR.tools.trim,c2="cke-test",bT=["","p","br","div"];CKEDITOR.filter=function(v){this.allowedContent=[];this.disabled=!1;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={rules:{},transformations:{},cachedTests:{}};CKEDITOR.filter.instances[this.id]=this;if(v instanceof CKEDITOR.editor){v=this.editor=v;this.customConfig=!0;var t=v.config.allowedContent;!0===t?this.disabled=!0:(t||(this.customConfig=!1),this.allow(t,"config",1),this.allow(v.config.extraAllowedContent,"extra",1),this.allow(bT[v.enterMode]+" "+bT[v.shiftEnterMode],"default",1))}else{this.customConfig=!1,this.allow(v,"default",1)}};CKEDITOR.filter.instances={};var e1=["p","div","br"],eJ={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};CKEDITOR.filter.prototype={allow:function(O,N,M){if(this.disabled||this.customConfig&&!M||!O){return !1}this._.cachedChecks={};var L,K;if("string"==typeof O){O=hS(O)}else{if(O instanceof CKEDITOR.style){K=O.getDefinition(),M={},O=K.attributes,M[K.element]=K={styles:K.styles,requiredStyles:K.styles&&CKEDITOR.tools.objectKeys(K.styles)},O&&(O=ct(O),K.classes=O["class"]?O["class"].split(/\s+/):null,K.requiredClasses=K.classes,delete O["class"],K.attributes=O,K.requiredAttributes=O&&CKEDITOR.tools.objectKeys(O)),O=M}else{if(CKEDITOR.tools.isArray(O)){for(L=0;L<O.length;++L){K=this.allow(O[L],N,M)}return K}}}var J;M=[];for(J in O){K=O[J];K="boolean"==typeof K?{}:"function"==typeof K?{match:K}:ct(K);"$"!=J.charAt(0)&&(K.elements=J);N&&(K.featureName=N.toLowerCase());var I=K;I.elements=dv(I.elements,/\s+/)||null;I.propertiesOnly=I.propertiesOnly||!0===I.elements;var H=/\s*,\s*/,G=void 0;for(G in gr){I[G]=dv(I[G],H)||null;var F=I,E=dG[G],B=dv(I[dG[G]],H),x=I[G],y=[],v=!0,t=void 0;B?v=!1:B={};for(t in x){"!"==t.charAt(0)&&(t=t.slice(1),y.push(t),B[t]=!0,v=!1)}for(;t=y.pop();){x[t]=x["!"+t],delete x["!"+t]}F[E]=(v?!1:B)||null}I.match=I.match||null;this.allowedContent.push(K);M.push(K)}N=this._.rules;J=N.elements||{};O=N.generic||[];K=0;for(I=M.length;K<I;++K){H=ct(M[K]);G=!0===H.classes||!0===H.styles||!0===H.attributes;F=H;E=void 0;for(E in gr){F[E]=hv(F[E])}B=!0;for(E in dG){E=dG[E],F[E]=CKEDITOR.tools.objectKeys(F[E]),F[E]&&(B=!1)}F.nothingRequired=B;if(!0===H.elements||null===H.elements){H.elements=hv(H.elements),O[G?"unshift":"push"](H)}else{for(L in F=H.elements,delete H.elements,F){if(J[L]){J[L][G?"unshift":"push"](H)}else{J[L]=[H]}}}}N.elements=J;N.generic=O.length?O:null;return !0},applyTo:function(J,I,H,G){if(this.disabled){return !1}var F=[],E=!H&&this._.rules,B=this._.transformations,y=jn(this),x=this.editor&&this.editor.config.protectedSource,v=!1;J.forEach(function(L){if(L.type==CKEDITOR.NODE_ELEMENT){if("off"==L.attributes["data-cke-filter"]){return !1}if(!I||!("span"==L.name&&~CKEDITOR.tools.objectKeys(L.attributes).join("|").indexOf("data-cke-"))){y(L,E,B,F,I)&&(v=!0)}}else{if(L.type==CKEDITOR.NODE_COMMENT&&L.value.match(/^\{cke_protected\}(?!\{C\})/)){var P;L:{var O=decodeURIComponent(L.value.replace(/^\{cke_protected\}/,""));P=[];var K,N,M;if(x){for(N=0;N<x.length;++N){if((M=O.match(x[N]))&&M[0].length==O.length){P=!0;break L}}}O=CKEDITOR.htmlParser.fragment.fromHtml(O);1==O.children.length&&(K=O.children[0]).type==CKEDITOR.NODE_ELEMENT&&y(K,E,B,P,I);P=!P.length}P||F.push(L)}}},null,!0);F.length&&(v=!0);var t;J=[];for(G=bT[G||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];H=F.pop();){H.type==CKEDITOR.NODE_ELEMENT?hW(H,G,J):H.remove()}for(;t=J.pop();){if(H=t.el,H.parent){switch(t.check){case"it":h3.$removeEmpty[H.name]&&!H.children.length?hW(H,G,J):jE(H)||hW(H,G,J);break;case"el-up":H.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!h3[H.parent.name][H.name]&&hW(H,G,J);break;case"parent-down":H.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!h3[H.parent.name][H.name]&&hW(H.parent,G,J)}}}return v},checkFeature:function(t){if(this.disabled||!t){return !0}t.toFeature&&(t=t.toFeature(this.editor));return !t.requiredContent||this.check(t.requiredContent)},disable:function(){this.disabled=!0},addContentForms:function(v){if(!this.disabled&&v){var t,B,y=[],x;for(t=0;t<v.length&&!x;++t){if(B=v[t],("string"==typeof B||B instanceof CKEDITOR.style)&&this.check(B)){x=B}}if(x){for(t=0;t<v.length;++t){y.push(f4(v[t],x))}this.addTransformations(y)}}},addFeature:function(t){if(this.disabled||!t){return !0}t.toFeature&&(t=t.toFeature(this.editor));this.allow(t.allowedContent,t.name);this.addTransformations(t.contentTransformations);this.addContentForms(t.contentForms);return this.customConfig&&t.requiredContent?this.check(t.requiredContent):!0},addTransformations:function(J){var I,H;if(!this.disabled&&J){var G=this._.transformations,F;for(F=0;F<J.length;++F){I=J[F];var E=void 0,B=void 0,y=void 0,x=void 0,v=void 0,t=void 0;H=[];for(B=0;B<I.length;++B){y=I[B],"string"==typeof y?(y=y.split(/\s*:\s*/),x=y[0],v=null,t=y[1]):(x=y.check,v=y.left,t=y.right),E||(E=y,E=E.element?E.element:x?x.match(/^([a-z0-9]+)/i)[0]:E.left.getDefinition().element),v instanceof CKEDITOR.style&&(v=fM(v)),H.push({check:x==E?null:x,left:v,right:"string"==typeof t?fu(t):t})}I=E;G[I]||(G[I]=[]);G[I].push(H)}}},check:function(H,G,F){if(this.disabled){return !0}if(CKEDITOR.tools.isArray(H)){for(var E=H.length;E--;){if(this.check(H[E],G,F)){return !0}}return !1}var B,y;if("string"==typeof H){y=H+"<"+(!1===G?"0":"1")+(F?"1":"0")+">";if(y in this._.cachedChecks){return this._.cachedChecks[y]}E=hS(H).$1;B=E.styles;var x=E.classes;E.name=E.elements;E.classes=x=x?x.split(/\s*,\s*/):[];E.styles=iK(B);E.attributes=iK(E.attributes);E.children=[];x.length&&(E.attributes["class"]=x.join(" "));B&&(E.attributes.style=CKEDITOR.tools.writeCssText(E.styles));B=E}else{E=H.getDefinition(),B=E.styles,x=E.attributes||{},B?(B=ct(B),x.style=CKEDITOR.tools.writeCssText(B,!0)):B={},B={name:E.element,attributes:x,classes:x["class"]?x["class"].split(/\s+/):[],styles:B,children:[]}}var x=CKEDITOR.tools.clone(B),v=[],t;if(!1!==G&&(t=this._.transformations[B.name])){for(E=0;E<t.length;++E){av(this,B,t[E])}r(B)}jn(this)(x,this._.rules,!1===G?!1:this._.transformations,v,!1,!F,!F);G=0<v.length?!1:CKEDITOR.tools.objectCompare(B.attributes,x.attributes,!0)?!0:!1;"string"==typeof H&&(this._.cachedChecks[y]=G);return G},getAllowedEnterMode:function(v,t){var y=e1.slice(),x;if(this.check(bT[v])){return v}for(t||(y=y.reverse());x=y.pop();){if(this.check(x)){return eJ[x]}}return CKEDITOR.ENTER_BR}};var gr={styles:1,attributes:1,classes:1},dG={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},g8=/^([a-z0-9*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,gQ={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},gx=CKEDITOR.filter.transformationsTools={sizeToStyle:function(t){this.lengthToStyle(t,"width");this.lengthToStyle(t,"height")},sizeToAttribute:function(t){this.lengthToAttribute(t,"width");this.lengthToAttribute(t,"height")},lengthToStyle:function(v,t,y){y=y||t;if(!(y in v.styles)){var x=v.attributes[t];x&&(/^\d+$/.test(x)&&(x+="px"),v.styles[y]=x)}delete v.attributes[t]},lengthToAttribute:function(v,t,B){B=B||t;if(!(B in v.attributes)){var y=v.styles[t],x=y&&y.match(/^(\d+)(?:\.\d*)?px$/);x?v.attributes[B]=x[1]:y==c2&&(v.attributes[B]=c2)}delete v.styles[t]},alignmentToStyle:function(v){if(!("float" in v.styles)){var t=v.attributes.align;if("left"==t||"right"==t){v.styles["float"]=t}}delete v.attributes.align},alignmentToAttribute:function(v){if(!("align" in v.attributes)){var t=v.styles["float"];if("left"==t||"right"==t){v.attributes.align=t}}delete v.styles["float"]},matchesStyle:gK,transform:function(H,G){if("string"==typeof G){H.name=G}else{var F=G.getDefinition(),E=F.styles,B=F.attributes,y,x,v,t;H.name=F.element;for(y in B){if("class"==y){F=H.classes.join("|");for(v=B[y].split(/\s+/);t=v.pop();){-1==F.indexOf(t)&&H.classes.push(t)}}else{H.attributes[y]=B[y]}}for(x in E){H.styles[x]=E[x]}}}};CKEDITOR.focusManager=function(t){if(t.focusManager){return t.focusManager}this.hasFocus=!1;this.currentActive=null;this._={editor:t};return this};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(t){this._.timer&&clearTimeout(this._.timer);t&&(this.currentActive=t);!this.hasFocus&&!this._.locked&&((t=CKEDITOR.currentInstance)&&t.focusManager.blur(1),this.hasFocus=!0,(t=this._.editor.container)&&t.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(v){function t(){if(this.hasFocus){this.hasFocus=!1;var y=this._.editor.container;y&&y.removeClass("cke_focus");this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var x=CKEDITOR.focusManager._.blurDelay;v||!x?t.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;t.call(this)},x,this)}},add:function(v,t){var B=v.getCustomData("focusmanager");if(!B||B!=this){B&&B.remove(v);var B="focus",y="blur";t&&(CKEDITOR.env.ie?(B="focusin",y="focusout"):CKEDITOR.event.useCapture=1);var x={blur:function(){v.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(v)}};v.on(B,x.focus,this);v.on(y,x.blur,this);t&&(CKEDITOR.event.useCapture=0);v.setCustomData("focusmanager",this);v.setCustomData("focusmanager_handlers",x)}},remove:function(v){v.removeCustomData("focusmanager");var t=v.removeCustomData("focusmanager_handlers");v.removeListener("blur",t.blur);v.removeListener("focus",t.focus)}};CKEDITOR.keystrokeHandler=function(t){if(t.keystrokeHandler){return t.keystrokeHandler}this.keystrokes={};this.blockedKeystrokes={};this._={editor:t};return this};var h2,er=function(v){v=v.data;var t=v.getKeystroke(),y=this.keystrokes[t],x=this._.editor;h2=!1===x.fire("key",{keyCode:t});h2||(y&&(h2=!1!==x.execCommand(y,{from:"keystrokeHandler"})),h2||(h2=!!this.blockedKeystrokes[t]));h2&&v.preventDefault(!0);return !h2},dZ=function(t){h2&&(h2=!1,t.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(t){t.on("keydown",er,this);if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac){t.on("keypress",dZ,this)}}};CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(v,t,x){if(!v||!CKEDITOR.lang.languages[v]){v=this.detect(t,v)}this[v]?x(v,this[v]):CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+v+".js"),function(){this[v].dir=this.rtl[v]?"rtl":"ltr";x(v,this[v])},this)},detect:function(v,t){var B=this.languages;t=t||navigator.userLanguage||navigator.language||v;var y=t.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),x=y[1],y=y[2];B[x+"-"+y]?x=x+"-"+y:B[x]||(x=null);CKEDITOR.lang.detect=x?function(){return x}:function(E){return E};return x||v}};var fZ={},i5={},fG=function(){var t;(t=iC[0])&&this.load(t.scriptUrl,t.callback,CKEDITOR,0)},iC=[];CKEDITOR.scriptLoader={load:function(L,K,J,I){var H="string"==typeof L;H&&(L=[L]);J||(J=CKEDITOR);var G=L.length,F=[],E=[],B=function(M){K&&(H?K.call(J,M):K.call(J,F,E))};if(0===G){B(!0)}else{var y=function(N,M){(M?F:E).push(N);0>=--G&&(I&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),B(M))},x=function(N,M){fZ[N]=1;var P=i5[N];delete i5[N];for(var O=0;O<P.length;O++){P[O](N,M)}},v=function(M){if(fZ[M]){y(M,!0)}else{var O=i5[M]||(i5[M]=[]);O.push(y);if(!(1<O.length)){var N=new CKEDITOR.dom.element("script");N.setAttributes({type:"text/javascript",src:M});K&&(CKEDITOR.env.ie&&11>CKEDITOR.env.version?N.$.onreadystatechange=function(){if("loaded"==N.$.readyState||"complete"==N.$.readyState){N.$.onreadystatechange=null,x(M,!0)}}:(N.$.onload=function(){setTimeout(function(){x(M,!0)},0)},N.$.onerror=function(){x(M,!1)}));N.appendTo(CKEDITOR.document.getHead())}}};I&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var t=0;t<G;t++){v(L[t])}}},queue:function(v,t){var x=this;iC.push({scriptUrl:v,callback:function(){t&&t.apply(this,arguments);iC.shift();fG.call(x)}});1==iC.length&&fG.call(this)}};CKEDITOR.resourceManager=function(v,t){this.basePath=v;this.fileName=t;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};CKEDITOR.resourceManager.prototype={add:function(v,t){if(this.registered[v]){throw'[CKEDITOR.resourceManager.add] The resource name "'+v+'" is already registered.'}var x=this.registered[v]=t||{};x.name=v;x.path=this.getPath(v);CKEDITOR.fire(v+CKEDITOR.tools.capitalize(this.fileName)+"Ready",x);return this.get(v)},get:function(t){return this.registered[t]||null},getPath:function(v){var t=this.externals[v];return CKEDITOR.getUrl(t&&t.dir||this.basePath+v+"/")},getFilePath:function(v){var t=this.externals[v];return CKEDITOR.getUrl(this.getPath(v)+(t?t.file:this.fileName+".js"))},addExternal:function(v,t,B){v=v.split(",");for(var y=0;y<v.length;y++){var x=v[y];B||(t=t.replace(/[^\/]+$/,function(E){B=E;return""}));this.externals[x]={dir:t,file:B||this.fileName+".js"}}},load:function(J,I,H){CKEDITOR.tools.isArray(J)||(J=J?[J]:[]);for(var G=this.loaded,F=this.registered,E=[],B={},y={},x=0;x<J.length;x++){var v=J[x];if(v){if(!G[v]&&!F[v]){var t=this.getFilePath(v);E.push(t);t in B||(B[t]=[]);B[t].push(v)}else{y[v]=this.get(v)}}}CKEDITOR.scriptLoader.load(E,function(L,P){if(P.length){throw'[CKEDITOR.resourceManager.load] Resource name "'+B[P[0]].join(",")+'" was not found at "'+P[0]+'".'}for(var O=0;O<L.length;O++){for(var N=B[L[O]],M=0;M<N.length;M++){var K=N[M];y[K]=this.get(K);G[K]=1}}I.call(H,y)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(v){var t={};return function(F,E,B){var y={},x=function(G){v.call(this,G,function(I){CKEDITOR.tools.extend(y,I);var N=[],J;for(J in I){var H=I[J],L=H&&H.requires;if(!t[J]){if(H.icons){for(var M=H.icons.split(","),K=M.length;K--;){CKEDITOR.skin.addIcon(M[K],H.path+"icons/"+(CKEDITOR.env.hidpi&&H.hidpi?"hidpi/":"")+M[K]+".png")}}t[J]=1}if(L){L.split&&(L=L.split(","));for(H=0;H<L.length;H++){y[L[H]]||N.push(L[H])}}}if(N.length){x.call(this,N)}else{for(J in y){H=y[J],H.onLoad&&!H.onLoad._called&&(!1===H.onLoad()&&delete y[J],H.onLoad._called=1)}E&&E.call(B||window,y)}},this)};x.call(this,F)}});CKEDITOR.plugins.setLang=function(v,t,y){var x=this.get(v);v=x.langEntries||(x.langEntries={});x=x.lang||(x.lang=[]);x.split&&(x=x.split(","));-1==CKEDITOR.tools.indexOf(x,t)&&x.push(t);v[t]=y};CKEDITOR.ui=function(t){if(t.ui){return t.ui}this.items={};this.instances={};this.editor=t;this._={handlers:{}};return this};CKEDITOR.ui.prototype={add:function(v,t,y){y.name=v.toLowerCase();var x=this.items[v]={type:t,command:y.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(x,y)},get:function(t){return this.instances[t]},create:function(v){var t=this.items[v],y=t&&this._.handlers[t.type],x=t&&t.command&&this.editor.getCommand(t.command),y=y&&y.create.apply(this,t.args);this.instances[v]=y;x&&x.uiItems.push(y);y&&!y.type&&(y.type=t.type);return y},addHandler:function(v,t){this._.handlers[v]=t},space:function(t){return CKEDITOR.document.getById(this.spaceId(t))},spaceId:function(t){return this.editor.id+"_"+t}};CKEDITOR.event.implementOn(CKEDITOR.ui);var eD=function(v,t,x){CKEDITOR.event.call(this);v=v&&CKEDITOR.tools.clone(v);if(void 0!==t){if(t instanceof CKEDITOR.dom.element){if(!x){throw Error("One of the element modes must be specified.")}}else{throw Error("Expect element of type CKEDITOR.dom.element.")}if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&x==CKEDITOR.ELEMENT_MODE_INLINE){throw Error("Inline element mode is not supported on IE quirks.")}if(!(x==CKEDITOR.ELEMENT_MODE_INLINE?t.is(CKEDITOR.dtd.$editable)||t.is("textarea"):x==CKEDITOR.ELEMENT_MODE_REPLACE?!t.is(CKEDITOR.dtd.$nonBodyContent):1)){throw Error('The specified element mode is not supported on element: "'+t.getName()+'".')}this.element=t;this.elementMode=x;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(t.getId()||t.getNameAtt())}else{this.elementMode=CKEDITOR.ELEMENT_MODE_NONE}this._={};this.commands={};this.templates={};if(!(t=this.name)){do{t="editor"+ ++dH}while(CKEDITOR.instances[t])}this.name=t;this.id=CKEDITOR.tools.getNextId();this.status="unloaded";this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on("readOnly",fo);this.on("selectionChange",function(y){eW(this,y.data.path)});this.on("activeFilterChange",function(){eW(this,this.elementPath(),!0)});this.on("mode",fo);this.on("instanceReady",function(){this.config.startupFocus&&this.focus()});CKEDITOR.fire("instanceCreated",null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){var y=this,B=v;y.on("customConfigLoaded",function(){if(B){if(B.on){for(var E in B.on){y.on(E,B.on[E])}}CKEDITOR.tools.extend(y.config,B,!0);delete y.config.on}E=y.config;y.readOnly=!(!E.readOnly&&!(y.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?y.element.is("textarea")?y.element.hasAttribute("disabled"):y.element.isReadOnly():y.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&y.element.hasAttribute("disabled")));y.blockless=y.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(y.element.is("textarea")||CKEDITOR.dtd[y.element.getName()].p):!1;y.tabIndex=E.tabIndex||y.element&&y.element.getAttribute("tabindex")||0;y.activeEnterMode=y.enterMode=y.blockless?CKEDITOR.ENTER_BR:E.enterMode;y.activeShiftEnterMode=y.shiftEnterMode=y.blockless?CKEDITOR.ENTER_BR:E.shiftEnterMode;E.skin&&(CKEDITOR.skinName=E.skin);y.fireOnce("configLoaded");y.dataProcessor=new CKEDITOR.htmlDataProcessor(y);y.filter=y.activeFilter=new CKEDITOR.filter(y);CKEDITOR.skin.loadPart("editor",function(){CKEDITOR.lang.load(y.config.language,y.config.defaultLanguage,function(F,H){var G=y.config.title;y.langCode=F;y.lang=CKEDITOR.tools.prototypedCopy(H);y.title="string"==typeof G||!1===G?G:[y.lang.editor,y.name].join(", ");CKEDITOR.env.gecko&&(10900>CKEDITOR.env.version&&"rtl"==y.lang.dir)&&(y.lang.dir="ltr");y.config.contentsLangDirection||(y.config.contentsLangDirection=y.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?y.element.getDirection(1):y.lang.dir);y.fire("langLoaded");y.getStylesSet(function(I){y.once("loaded",function(){y.fire("stylesSet",{styles:I})},null,null,1);var O=y.config,N=O.plugins,M=O.extraPlugins,L=O.removePlugins;if(M){var K=RegExp("(?:^|,)(?:"+M.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),N=N.replace(K,""),N=N+(","+M)}if(L){var J=RegExp("(?:^|,)(?:"+L.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),N=N.replace(J,"")}CKEDITOR.env.air&&(N+=",adobeair");CKEDITOR.plugins.load(N.split(","),function(Y){var X=[],W=[],V=[];y.plugins=Y;for(var U in Y){var T=Y[U],S=T.lang,R=null,Q=T.requires,P;CKEDITOR.tools.isArray(Q)&&(Q=Q.join(","));if(Q&&(P=Q.match(J))){for(;Q=P.pop();){CKEDITOR.tools.setTimeout(function(aa,Z){throw Error('Plugin "'+aa.replace(",","")+'" cannot be removed from the plugins list, because it\'s required by "'+Z+'" plugin.')},0,null,[Q,U])}}S&&!y.lang[U]&&(S.split&&(S=S.split(",")),0<=CKEDITOR.tools.indexOf(S,y.langCode)?R=y.langCode:(R=y.langCode.replace(/-.*/,""),R=R!=y.langCode&&0<=CKEDITOR.tools.indexOf(S,R)?R:0<=CKEDITOR.tools.indexOf(S,"en")?"en":S[0]),!T.langEntries||!T.langEntries[R]?V.push(CKEDITOR.getUrl(T.path+"lang/"+R+".js")):(y.lang[U]=T.langEntries[R],R=null));W.push(R);X.push(T)}CKEDITOR.scriptLoader.load(V,function(){for(var Z=["beforeInit","init","afterInit"],ac=0;ac<Z.length;ac++){for(var ab=0;ab<X.length;ab++){var aa=X[ab];0===ac&&W[ab]&&(aa.lang&&aa.langEntries)&&(y.lang[aa.name]=aa.langEntries[W[ab]]);if(aa[Z[ac]]){aa[Z[ac]](y)}}}y.fireOnce("pluginsLoaded");O.keystrokes&&y.setKeystroke(y.config.keystrokes);for(ab=0;ab<y.config.blockedKeystrokes.length;ab++){y.keystrokeHandler.blockedKeystrokes[y.config.blockedKeystrokes[ab]]=1}y.status="loaded";y.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,y)})})})})})});B&&void 0!=B.customConfig&&(y.config.customConfig=B.customConfig);bR(y)||y.fireOnce("customConfigLoaded")},0,this)},fo=function(){var v=this.commands,t;for(t in v){el(this,v[t])}},el=function(v,t){t[t.startDisabled?"disable":v.readOnly&&!t.readOnly?"disable":t.modes[v.mode]?"enable":"disable"]()},eW=function(v,t,E){if(t){var B,y,x=v.commands;for(y in x){B=x[y],(E||B.contextSensitive)&&B.refresh(v,t)}}},bR=function(v){var t=v.config.customConfig;if(!t){return !1}var t=CKEDITOR.getUrl(t),x=dU[t]||(dU[t]={});x.fn?(x.fn.call(v,v.config),(CKEDITOR.getUrl(v.config.customConfig)==t||!bR(v))&&v.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(t,function(){x.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};bR(v)});return !0},dt=function(){var v=this.element;if(v&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var t=this.getData();this.config.htmlEncodeOutput&&(t=CKEDITOR.tools.htmlEncode(t));v.is("textarea")?v.setValue(t):v.setHtml(t);return !0}return !1};eD.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=eD;var dH=0,dU={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(v,t){t.name=v.toLowerCase();var x=new CKEDITOR.command(this,t);this.mode&&el(this,x);return this.commands[v]=x},_attachToForm:function(){var v=this,t=v.element,y=new CKEDITOR.dom.element(t.$.form);if(t.is("textarea")&&y){var x=function(B){v.updateElement();v._.required&&!t.getValue()&&!1===v.fire("required")&&B.data.preventDefault()};y.on("submit",x);y.$.submit&&(y.$.submit.call&&y.$.submit.apply)&&(y.$.submit=CKEDITOR.tools.override(y.$.submit,function(B){return function(){x();B.apply?B.apply(this):B()}}));v.on("destroy",function(){y.removeListener("submit",x)})}},destroy:function(t){this.fire("beforeDestroy");!t&&dt.call(this);this.editable(null);this.status="destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(t){return(t=t||this.getSelection().getStartElement())?new CKEDITOR.dom.elementPath(t,this.editable()):null},createRange:function(){var t=this.editable();return t?new CKEDITOR.dom.range(t):null},execCommand:function(v,t){var y=this.getCommand(v),x={name:v,commandData:t,command:y};return y&&(y.state!=CKEDITOR.TRISTATE_DISABLED&&!0!==this.fire("beforeCommandExec",x))&&(x.returnValue=y.exec(x.commandData),!y.async&&!0!==this.fire("afterCommandExec",x))?x.returnValue:!1},getCommand:function(t){return this.commands[t]},getData:function(v){!v&&this.fire("beforeGetData");var t=this._.data;"string"!=typeof t&&(t=(t=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?t.is("textarea")?t.getValue():t.getHtml():"");t={dataValue:t};!v&&this.fire("getData",t);return t.dataValue},getSnapshot:function(){var v=this.fire("getSnapshot");if("string"!=typeof v){var t=this.element;t&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(v=t.is("textarea")?t.getValue():t.getHtml())}return v},loadSnapshot:function(t){this.fire("loadSnapshot",t)},setData:function(v,t,x){if(t){this.on("dataReady",function(y){y.removeListener();t.call(y.editor)})}v={dataValue:v};!x&&this.fire("setData",v);this._.data=v.dataValue;!x&&this.fire("afterSetData",v)},setReadOnly:function(t){t=void 0==t||t;this.readOnly!=t&&(this.readOnly=t,this.keystrokeHandler.blockedKeystrokes[8]=+t,this.editable().setReadOnly(t),this.fire("readOnly"))},insertHtml:function(v,t){this.fire("insertHtml",{dataValue:v,mode:t})},insertText:function(t){this.fire("insertText",t)},insertElement:function(t){this.fire("insertElement",t)},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return dt.call(this)},setKeystroke:function(){for(var v=this.keystrokeHandler.keystrokes,t=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],B,y,x=t.length;x--;){B=t[x],y=0,CKEDITOR.tools.isArray(B)&&(y=B[1],B=B[0]),y?v[B]=y:delete v[B]}},addFeature:function(t){return this.filter.addFeature(t)},setActiveFilter:function(t){t||(t=this.filter);this.activeFilter!==t&&(this.activeFilter=t,this.fire("activeFilterChange"),t===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(t.getAllowedEnterMode(this.enterMode),t.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(v,t){v=v?this.blockless?CKEDITOR.ENTER_BR:v:this.enterMode;t=t?this.blockless?CKEDITOR.ENTER_BR:t:this.shiftEnterMode;if(this.activeEnterMode!=v||this.activeShiftEnterMode!=t){this.activeEnterMode=v,this.activeShiftEnterMode=t,this.fire("activeEnterModeChange")}}});CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.ELEMENT_MODE_INLINE=3;CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)--\x3e)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))","g")}};var c5=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,cN={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(H){for(var G,F,E=0,B;G=this._.htmlPartsRegex.exec(H);){F=G.index;if(F>E){if(E=H.substring(E,F),B){B.push(E)}else{this.onText(E)}}E=this._.htmlPartsRegex.lastIndex;if(F=G[1]){if(F=F.toLowerCase(),B&&CKEDITOR.dtd.$cdata[F]&&(this.onCDATA(B.join("")),B=null),!B){this.onTagClose(F);continue}}if(B){B.push(G[0])}else{if(F=G[3]){if(F=F.toLowerCase(),!/="/.test(F)){var y={},x;G=G[4];var v=!!(G&&"/"==G.charAt(G.length-1));if(G){for(;x=c5.exec(G);){var t=x[1].toLowerCase();x=x[2]||x[3]||x[4]||"";y[t]=!x&&cN[t]?t:CKEDITOR.tools.htmlDecodeAttr(x)}}this.onTagOpen(F,y,v);!B&&CKEDITOR.dtd.$cdata[F]&&(B=[])}}else{if(F=G[2]){this.onComment(F)}}}}if(H.length>E){this.onText(H.substring(E,H.length))}}};CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(t){this._.output.push("<",t)},openTagClose:function(v,t){t?this._.output.push(" />"):this._.output.push(">")},attribute:function(v,t){"string"==typeof t&&(t=CKEDITOR.tools.htmlEncodeAttr(t));this._.output.push(" ",v,'="',t,'"')},closeTag:function(t){this._.output.push("</",t,">")},text:function(t){this._.output.push(t)},comment:function(t){this._.output.push("\x3c!--",t,"--\x3e")},write:function(t){this._.output.push(t)},reset:function(){this._.output=[];this._.indent=!1},getHtml:function(v){var t=this._.output.join("");v&&this.reset();return t}}});"use strict";CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var v=this.parent.children,t=CKEDITOR.tools.indexOf(v,this),y=this.previous,x=this.next;y&&(y.next=x);x&&(x.previous=y);v.splice(t,1);this.parent=null},replaceWith:function(v){var t=this.parent.children,B=CKEDITOR.tools.indexOf(t,this),y=v.previous=this.previous,x=v.next=this.next;y&&(y.next=v);x&&(x.previous=v);t[B]=v;v.parent=this.parent;this.parent=null},insertAfter:function(v){var t=v.parent.children,y=CKEDITOR.tools.indexOf(t,v),x=v.next;t.splice(y+1,0,this);this.next=v.next;this.previous=v;v.next=this;x&&(x.previous=this);this.parent=v.parent},insertBefore:function(v){var t=v.parent.children,x=CKEDITOR.tools.indexOf(t,v);t.splice(x,0,this);this.next=v;(this.previous=v.previous)&&(v.previous.next=this);v.previous=this;this.parent=v.parent},getAscendant:function(v){var t="function"==typeof v?v:"string"==typeof v?function(y){return y.name==v}:function(y){return y.name in v},x=this.parent;for(;x&&x.type==CKEDITOR.NODE_ELEMENT;){if(t(x)){return x}x=x.parent}return null},wrapWith:function(t){this.replaceWith(t);t.add(this);return t},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(t){return t||{}}};"use strict";CKEDITOR.htmlParser.comment=function(t){this.value=t;this._={isBlockLike:!1}};CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(v,t){var x=this.value;if(!(x=v.onComment(t,x,this))){return this.remove(),!1}if("string"!=typeof x){return this.replaceWith(x),!1}this.value=x;return !0},writeHtml:function(v,t){t&&this.filter(t);v.comment(this.value)}});"use strict";CKEDITOR.htmlParser.text=function(t){this.value=t;this._={isBlockLike:!1}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(v,t){if(!(this.value=v.onText(t,this.value,this))){return this.remove(),!1}},writeHtml:function(v,t){t&&this.filter(t);v.text(this.value)}});"use strict";CKEDITOR.htmlParser.cdata=function(t){this.value=t};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(t){t.write(this.value)}});"use strict";CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:!0,hasInlineStarted:!1}};var c0=function(t){return t.attributes["data-cke-survive"]?!1:"a"==t.name&&t.attributes.href||CKEDITOR.dtd.$removeEmpty[t.name]},cI=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),dF={ol:1,ul:1},cq=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1});CKEDITOR.htmlParser.fragment.fromHtml=function(O,N,M){function L(Q){var P;if(0<B.length){for(var V=0;V<B.length;V++){var U=B[V],T=U.name,S=CKEDITOR.dtd[T],R=y.name&&CKEDITOR.dtd[y.name];(!R||R[T])&&(!Q||!S||S[Q]||!CKEDITOR.dtd[Q])?(P||(K(),P=1),U=U.clone(),U.parent=y,y=U,B.splice(V,1),V--):T==y.name&&(I(y,y.parent,1),V--)}}}function K(){for(;x.length;){I(x.shift(),y)}}function J(Q){if(Q._.isBlockLike&&"pre"!=Q.name&&"textarea"!=Q.name){var P=Q.children.length,S=Q.children[P-1],R;S&&S.type==CKEDITOR.NODE_TEXT&&((R=CKEDITOR.tools.rtrim(S.value))?S.value=R:Q.children.length=P-1)}}function I(Q,P,S){P=P||y||E;var R=y;void 0===Q.previous&&(H(P,Q)&&(y=P,F.onTagOpen(M,{}),Q.returnPoint=P=y),J(Q),(!c0(Q)||Q.children.length)&&P.add(Q),"pre"==Q.name&&(t=!1),"textarea"==Q.name&&(v=!1));Q.returnPoint?(y=Q.returnPoint,delete Q.returnPoint):y=S?P:R}function H(Q,P){if((Q==E||"body"==Q.name)&&M&&(!Q.name||CKEDITOR.dtd[Q.name][M])){var S,R;return(S=P.attributes&&(R=P.attributes["data-cke-real-element-type"])?R:P.name)&&S in CKEDITOR.dtd.$inline&&!(S in CKEDITOR.dtd.head)&&!P.isOrphan||P.type==CKEDITOR.NODE_TEXT}}function G(Q,P){return Q in CKEDITOR.dtd.$listItem||Q in CKEDITOR.dtd.$tableContent?Q==P||"dt"==Q&&"dd"==P||"dd"==Q&&"dt"==P:!1}var F=new CKEDITOR.htmlParser,E=N instanceof CKEDITOR.htmlParser.element?N:"string"==typeof N?new CKEDITOR.htmlParser.element(N):new CKEDITOR.htmlParser.fragment,B=[],x=[],y=E,v="textarea"==E.name,t="pre"==E.name;F.onTagOpen=function(Q,P,S,R){P=new CKEDITOR.htmlParser.element(Q,P);P.isUnknown&&S&&(P.isEmpty=!0);P.isOptionalClose=R;if(c0(P)){B.push(P)}else{if("pre"==Q){t=!0}else{if("br"==Q&&t){y.add(new CKEDITOR.htmlParser.text("\n"));return}"textarea"==Q&&(v=!0)}if("br"==Q){x.push(P)}else{for(;;){if(R=(S=y.name)?CKEDITOR.dtd[S]||(y._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):cq,!P.isUnknown&&!y.isUnknown&&!R[Q]){if(y.isOptionalClose){F.onTagClose(S)}else{if(Q in dF&&S in dF){S=y.children,(S=S[S.length-1])&&"li"==S.name||I(S=new CKEDITOR.htmlParser.element("li"),y),!P.returnPoint&&(P.returnPoint=y),y=S}else{if(Q in CKEDITOR.dtd.$listItem&&!G(Q,S)){F.onTagOpen("li"==Q?"ul":"dl",{},0,1)}else{if(S in cI&&!G(Q,S)){!P.returnPoint&&(P.returnPoint=y),y=y.parent}else{if(S in CKEDITOR.dtd.$inline&&B.unshift(y),y.parent){I(y,y.parent,1)}else{P.isOrphan=1;break}}}}}}else{break}}L(Q);K();P.parent=y;P.isEmpty?I(P):y=P}}};F.onTagClose=function(Q){for(var P=B.length-1;0<=P;P--){if(Q==B[P].name){B.splice(P,1);return}}for(var U=[],T=[],S=y;S!=E&&S.name!=Q;){S._.isBlockLike||T.unshift(S),U.push(S),S=S.returnPoint||S.parent}if(S!=E){for(P=0;P<U.length;P++){var R=U[P];I(R,R.parent)}y=S;S._.isBlockLike&&K();I(S,S.parent);S==y&&(y=y.parent);B=B.concat(T)}"body"==Q&&(M=!1)};F.onText=function(Q){if((!y._.hasInlineStarted||x.length)&&!t&&!v){if(Q=CKEDITOR.tools.ltrim(Q),0===Q.length){return}}var P=y.name,R=P?CKEDITOR.dtd[P]||(y._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):cq;if(!v&&!R["#"]&&P in cI){F.onTagOpen(P in dF?"li":"dl"==P?"dd":"table"==P?"tr":"tr"==P?"td":""),F.onText(Q)}else{K();L();!t&&!v&&(Q=Q.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));Q=new CKEDITOR.htmlParser.text(Q);if(H(y,Q)){this.onTagOpen(M,{},0,1)}y.add(Q)}};F.onCDATA=function(P){y.add(new CKEDITOR.htmlParser.cdata(P))};F.onComment=function(P){K();L();y.add(new CKEDITOR.htmlParser.comment(P))};F.parse(O);for(K();y!=E;){I(y,y.parent,1)}J(E);return E};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(v,t){isNaN(t)&&(t=this.children.length);var x=0<t?this.children[t-1]:null;if(x){if(v._.isBlockLike&&x.type==CKEDITOR.NODE_TEXT&&(x.value=CKEDITOR.tools.rtrim(x.value),0===x.value.length)){this.children.pop();this.add(v);return}x.next=v}v.previous=x;v.parent=this;this.children.splice(t,0,v);this._.hasInlineStarted||(this._.hasInlineStarted=v.type==CKEDITOR.NODE_TEXT||v.type==CKEDITOR.NODE_ELEMENT&&!v._.isBlockLike)},filter:function(v,t){t=this.getFilterContext(t);v.onRoot(t,this);this.filterChildren(v,!1,t)},filterChildren:function(v,t,x){if(this.childrenFilteredBy!=v.id){x=this.getFilterContext(x);if(t&&!this.parent){v.onRoot(x,this)}this.childrenFilteredBy=v.id;for(t=0;t<this.children.length;t++){!1===this.children[t].filter(v,x)&&t--}}},writeHtml:function(v,t){t&&this.filter(t);this.writeChildrenHtml(v)},writeChildrenHtml:function(v,t,y){var x=this.getFilterContext();if(y&&!this.parent&&t){t.onRoot(x,this)}t&&this.filterChildren(t,!1,x);t=0;y=this.children;for(x=y.length;t<x;t++){y[t].writeHtml(v)}},forEach:function(v,t,B){if(!B&&(!t||this.type==t)){var y=v(this)}if(!1!==y){B=this.children;for(var x=0;x<B.length;x++){y=B[x],y.type==CKEDITOR.NODE_ELEMENT?y.forEach(v,t):(!t||y.type==t)&&v(y)}}},getFilterContext:function(t){return t||{}}};"use strict";var iE=function(){this.rules=[]},bP=function(v,t,E,B){var y,x;for(y in t){(x=v[y])||(x=v[y]=new iE),x.add(t[y],E,B)}};CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(t){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new iE;this.attributeNameRules=new iE;this.elementsRules={};this.attributesRules={};this.textRules=new iE;this.commentRules=new iE;this.rootRules=new iE;t&&this.addRules(t,10)},proto:{addRules:function(v,t){var x;"number"==typeof t?x=t:t&&"priority" in t&&(x=t.priority);"number"!=typeof x&&(x=10);"object"!=typeof t&&(t={});v.elementNames&&this.elementNameRules.addMany(v.elementNames,x,t);v.attributeNames&&this.attributeNameRules.addMany(v.attributeNames,x,t);v.elements&&bP(this.elementsRules,v.elements,x,t);v.attributes&&bP(this.attributesRules,v.attributes,x,t);v.text&&this.textRules.add(v.text,x,t);v.comment&&this.commentRules.add(v.comment,x,t);v.root&&this.rootRules.add(v.root,x,t)},applyTo:function(t){t.filter(this)},onElementName:function(v,t){return this.elementNameRules.execOnName(v,t)},onAttributeName:function(v,t){return this.attributeNameRules.execOnName(v,t)},onText:function(v,t){return this.textRules.exec(v,t)},onComment:function(v,t,x){return this.commentRules.exec(v,t,x)},onRoot:function(v,t){return this.rootRules.exec(v,t)},onElement:function(v,t){for(var B=[this.elementsRules["^"],this.elementsRules[t.name],this.elementsRules.$],y,x=0;3>x;x++){if(y=B[x]){y=y.exec(v,t,this);if(!1===y){return null}if(y&&y!=t){return this.onNode(v,y)}if(t.parent&&!t.name){break}}}return t},onNode:function(v,t){var x=t.type;return x==CKEDITOR.NODE_ELEMENT?this.onElement(v,t):x==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(v,t.value)):x==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(v,t.value)):null},onAttribute:function(v,t,y,x){return(y=this.attributesRules[y])?y.exec(v,x,t,this):x}}});CKEDITOR.htmlParser.filterRulesGroup=iE;iE.prototype={add:function(v,t,x){this.rules.splice(this.findIndex(t),0,{value:v,priority:t,options:x})},addMany:function(v,t,E){for(var B=[this.findIndex(t),0],y=0,x=v.length;y<x;y++){B.push({value:v[y],priority:t,options:E})}this.rules.splice.apply(this.rules,B)},findIndex:function(v){for(var t=this.rules,x=t.length-1;0<=x&&v<t[x].priority;){x--}return x+1},exec:function(I,H){var G=H instanceof CKEDITOR.htmlParser.node||H instanceof CKEDITOR.htmlParser.fragment,F=Array.prototype.slice.call(arguments,1),E=this.rules,B=E.length,y,x,v,t;for(t=0;t<B;t++){if(G&&(y=H.type,x=H.name),v=E[t],!(I.nonEditable&&!v.options.applyToAll||I.nestedEditable&&v.options.excludeNestedEditable)){v=v.value.apply(null,F);if(!1===v||G&&v&&(v.name!=x||v.type!=y)){return v}void 0!=v&&(F[0]=H=v)}}return H},execOnName:function(v,t){for(var E=0,B=this.rules,y=B.length,x;t&&E<y;E++){x=B[E],!(v.nonEditable&&!x.options.applyToAll||v.nestedEditable&&x.options.excludeNestedEditable)&&(t=t.replace(x.value[0],x.value[1]))}return t}};var hI=function(I,H){function G(J){return J||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text("\u00a0"):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function F(K,J){return function(P){if(P.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var O=[],N=dC(P),M,L;if(N){for(E(N,1)&&O.push(N);N;){if(aH(N)&&(M=i4(N))&&E(M)){(L=i4(M))&&!aH(L)?O.push(M):(G(y).insertAfter(M),M.remove())}N=N.previous}}for(N=0;N<O.length;N++){O[N].remove()}if(O=CKEDITOR.env.opera&&!K||("function"==typeof J?!1!==J(P):J)){!y&&!CKEDITOR.env.needsBrFiller&&P.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT?O=!1:!y&&!CKEDITOR.env.needsBrFiller&&(7<document.documentMode||P.name in CKEDITOR.dtd.tr||P.name in CKEDITOR.dtd.$listItem)?O=!1:(O=dC(P),O=!O||"form"==P.name&&"input"==O.name)}O&&P.add(G(K))}}}function E(K,J){if((!y||CKEDITOR.env.needsBrFiller)&&K.type==CKEDITOR.NODE_ELEMENT&&"br"==K.name&&!K.attributes["data-cke-eol"]){return !0}var L;if(K.type==CKEDITOR.NODE_TEXT&&(L=K.value.match(cv))){if(L.index&&((new CKEDITOR.htmlParser.text(K.value.substring(0,L.index))).insertBefore(K),K.value=L[0]),!CKEDITOR.env.needsBrFiller&&y&&(!J||K.parent.name in x)||!y&&((L=K.previous)&&"br"==L.name||!L||aH(L))){return !0}}return !1}var B={elements:{}},y="html"==H,x=CKEDITOR.tools.extend({},i2),v;for(v in x){"#" in iB[v]||delete x[v]}for(v in x){B.elements[v]=F(y,!1!==I.config.fillEmptyBlocks)}B.root=F(y);var t=y;B.elements.br=function(K){if(K.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var J=K.attributes;if("data-cke-bogus" in J||"data-cke-eol" in J){delete J["data-cke-bogus"]}else{for(J=K.next;J&&hK(J);){J=J.next}var L=i4(K);!J&&aH(K.parent)?ix(K.parent,G(t)):aH(J)&&L&&!aH(L)&&G(t).insertBefore(J)}}};return B},dC=function(t){for(t=t.children[t.children.length-1];t&&hK(t);){t=t.previous}return t},i4=function(t){for(t=t.previous;t&&hK(t);){t=t.previous}return t},hK=function(t){return t.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(t.value)||t.type==CKEDITOR.NODE_ELEMENT&&t.attributes["data-cke-bookmark"]},aH=function(t){return t&&(t.type==CKEDITOR.NODE_ELEMENT&&t.name in i2||t.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)},ix=function(v,t){var x=v.children[v.children.length-1];v.children.push(t);t.parent=v;x&&(x.next=t,t.previous=x)},hl=function(t){t=t.attributes;"false"!=t.contenteditable&&(t["data-cke-editable"]=t.contenteditable?"true":1);t.contenteditable="false"},gS=function(t){t=t.attributes;switch(t["data-cke-editable"]){case"true":t.contenteditable="true";break;case"1":delete t.contenteditable}},gA=function(v,t){return v.replace(t,function(y,x,B){0===y.indexOf("<textarea")&&(y=x+hn(B).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>");return"<cke:encoded>"+encodeURIComponent(y)+"</cke:encoded>"})},hn=function(t){return t.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(v,x){return decodeURIComponent(x)})};CKEDITOR.htmlDataProcessor=function(v){var t,y,x=this;this.editor=v;this.dataFilter=t=new CKEDITOR.htmlParser.filter;this.htmlFilter=y=new CKEDITOR.htmlParser.filter;this.writer=new CKEDITOR.htmlParser.basicWriter;t.addRules(b3);t.addRules(bC,{applyToAll:!0});t.addRules(hI(v,"data"),{applyToAll:!0});y.addRules(bk);y.addRules(f7,{applyToAll:!0});y.addRules(hI(v,"html"),{applyToAll:!0});v.on("toHtml",function(E){E=E.data;for(var K=E.dataValue,J=[],I=v.config.protectedSource,H=v._.dataStore||(v._.dataStore={id:1}),G=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,I=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(I),K=K.replace(/<\!--[\s\S]*?--\>/g,function(L){return"\x3c!--{cke_tempcomment}"+(J.push(L)-1)+"--\x3e"}),F=0;F<I.length;F++){K=K.replace(I[F],function(L){L=L.replace(G,function(N,M,O){return J[O]});return/cke_temp(comment)?/.test(L)?L:"\x3c!--{cke_temp}"+(J.push(L)-1)+"--\x3e"})}var K=K.replace(G,function(M,L,N){return"\x3c!--"+fP+(L?"{C}":"")+encodeURIComponent(J[N]).replace(/--/g,"%2D%2D")+"--\x3e"}),K=K.replace(/(['"]).*?\1/g,function(L){return L.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(N,M){H[H.id]=decodeURIComponent(M);return"{cke_protected_"+H.id+++"}"})}),K=gA(K,aS),K=K.replace(aA,function(M,L,N){return"<"+L+N.replace(A,function(P,O){return !/^on/.test(O)&&-1==N.indexOf("data-cke-saved-"+O)?(P=P.slice(1)," data-cke-saved-"+P+" data-cke-"+CKEDITOR.rnd+"-"+P):P})+">"}),K=gA(K,e),K=K.replace(js,"$1cke:$2"),K=K.replace(iP,"<cke:$1$2></cke:$1>"),K=CKEDITOR.env.opera?K:K.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),I=E.context||v.editable().getName(),B;CKEDITOR.env.ie&&(9>CKEDITOR.env.version&&"pre"==I)&&(I="div",K="<pre>"+K+"</pre>",B=1);I=v.document.createElement(I);I.setHtml("a"+K);K=I.getHtml().substr(1);K=K.replace(RegExp(" data-cke-"+CKEDITOR.rnd+"-","ig")," ");B&&(K=K.replace(/^<pre>|<\/pre>$/gi,""));K=K.replace(bU,"$1$2");K=K.replace(bt,function(M,L){return decodeURIComponent(L)});K=hn(K);E.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(K,E.context,!1===E.fixForBody?!1:E.enterMode!=CKEDITOR.ENTER_BR&&!1!==v.config.autoParagraph?E.enterMode==CKEDITOR.ENTER_DIV?"div":"p":!1)},null,null,5);v.on("toHtml",function(B){B.data.filter.applyTo(B.data.dataValue,!0,B.data.dontFilter,B.data.enterMode)&&v.fire("dataFiltered")},null,null,6);v.on("toHtml",function(B){B.data.dataValue.filterChildren(x.dataFilter,!0)},null,null,10);v.on("toHtml",function(E){E=E.data;var B=E.dataValue,F=new CKEDITOR.htmlParser.basicWriter;B.writeChildrenHtml(F);B=F.getHtml(!0);E.dataValue=B.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(G){return"\x3c!--"+fP+"{C}"+encodeURIComponent(G).replace(/--/g,"%2D%2D")+"--\x3e"})},null,null,15);v.on("toDataFormat",function(B){var E=B.data.dataValue;B.data.enterMode!=CKEDITOR.ENTER_BR&&(E=E.replace(/^<br *\/?>/i,""));B.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(E,B.data.context,B.data.enterMode!=CKEDITOR.ENTER_BR&&!1!==v.config.autoParagraph?B.data.enterMode==CKEDITOR.ENTER_DIV?"div":"p":!1)},null,null,5);v.on("toDataFormat",function(B){B.data.dataValue.filterChildren(x.htmlFilter,!0)},null,null,10);v.on("toDataFormat",function(B){B.data.filter.applyTo(B.data.dataValue,!1,!0)},null,null,11);v.on("toDataFormat",function(B){var G=B.data.dataValue,F=x.writer;F.reset();G.writeChildrenHtml(F);var G=F.getHtml(!0),G=hn(G),E=v._.dataStore,G=G.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(I,H){return decodeURIComponent(H)}).replace(/\{cke_protected_(\d+)\}/g,function(I,H){return E&&E[H]||""});B.data.dataValue=G},null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(v,t,G,F){var E=this.editor,B,y,x;t&&"object"==typeof t?(B=t.context,G=t.fixForBody,F=t.dontFilter,y=t.filter,x=t.enterMode):B=t;!B&&null!==B&&(B=E.editable().getName());return E.fire("toHtml",{dataValue:v,context:B,fixForBody:G,dontFilter:F,filter:y||E.filter,enterMode:x||E.enterMode}).dataValue},toDataFormat:function(v,t){var B,y,x;t&&(B=t.context,y=t.filter,x=t.enterMode);!B&&null!==B&&(B=this.editor.editable().getName());return this.editor.fire("toDataFormat",{dataValue:v,filter:y||this.editor.filter,context:B,enterMode:x||this.editor.enterMode}).dataValue}};var cv=/(?:&nbsp;|\xa0)$/,fP="{cke_protected}",iB=CKEDITOR.dtd,fw="caption colgroup col thead tfoot tbody".split(" "),i2=CKEDITOR.tools.extend({},iB.$blockLimit,iB.$block),b3={elements:{input:hl,textarea:hl}},bC={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},bk={elements:{embed:function(v){var t=v.parent;if(t&&"object"==t.name){var x=t.attributes.width,t=t.attributes.height;x&&(v.attributes.width=x);t&&(v.attributes.height=t)}},a:function(t){if(!t.children.length&&!t.attributes.name&&!t.attributes["data-cke-saved-name"]){return !1}}}},f7={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(v){var t=v.attributes;if(t){if(t["data-cke-temp"]){return !1}for(var B=["name","href","src"],y,x=0;x<B.length;x++){y="data-cke-saved-"+B[x],y in t&&delete t[B[x]]}}return v},table:function(t){t.children.slice(0).sort(function(v,B){var y,x;v.type==CKEDITOR.NODE_ELEMENT&&B.type==v.type&&(y=CKEDITOR.tools.indexOf(fw,v.name),x=CKEDITOR.tools.indexOf(fw,B.name));-1<y&&-1<x&&y!=x||(y=v.parent?v.getIndex():-1,x=B.parent?B.getIndex():-1);return y>x?1:-1})},param:function(t){t.children=[];t.isEmpty=!0;return t},span:function(t){"Apple-style-span"==t.attributes["class"]&&delete t.name},html:function(t){delete t.attributes.contenteditable;delete t.attributes["class"]},body:function(t){delete t.attributes.spellcheck;delete t.attributes.contenteditable},style:function(v){var t=v.children[0];t&&t.value&&(t.value=CKEDITOR.tools.trim(t.value));v.attributes.type||(v.attributes.type="text/css")},title:function(v){var t=v.children[0];!t&&ix(v,t=new CKEDITOR.htmlParser.text);t.value=v.attributes["data-cke-title"]||""},input:gS,textarea:gS},attributes:{"class":function(t){return CKEDITOR.tools.ltrim(t.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(f7.attributes.style=function(t){return t.replace(/(^|;)([^\:]+)/g,function(v){return v.toLowerCase()})});var aA=/<(a|area|img|input|source)\b([^>]*)>/gi,A=/\s(on\w+|href|src|name)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,e=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,aS=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,bt=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,js=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,bU=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,iP=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi;"use strict";CKEDITOR.htmlParser.element=function(v,t){this.name=v;this.attributes=t||{};this.children=[];var y=v||"",x=y.match(/^cke:(.*)/);x&&(y=x[1]);y=!(!CKEDITOR.dtd.$nonBodyContent[y]&&!CKEDITOR.dtd.$block[y]&&!CKEDITOR.dtd.$listItem[y]&&!CKEDITOR.dtd.$tableContent[y]&&!(CKEDITOR.dtd.$nonEditable[y]||"br"==y));this.isEmpty=!!CKEDITOR.dtd.$empty[v];this.isUnknown=!CKEDITOR.dtd[v];this._={isBlockLike:y,hasInlineStarted:this.isEmpty||!y}};CKEDITOR.htmlParser.cssStyle=function(v){var t={};((v instanceof CKEDITOR.htmlParser.element?v.attributes.style:v)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(x,B,y){"font-family"==B&&(y=y.replace(/["']/g,""));t[B.toLowerCase()]=y});return{rules:t,populate:function(y){var x=this.toString();x&&(y instanceof CKEDITOR.dom.element?y.setAttribute("style",x):y instanceof CKEDITOR.htmlParser.element?y.attributes.style=x:y.style=x)},toString:function(){var x=[],y;for(y in t){t[y]&&x.push(y,":",t[y],";")}return x.join("")}}};var a1=function(v,t){v=v[0];t=t[0];return v<t?-1:v>t?1:0},hL=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:hL.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(v,t){var F=this,E,B;t=F.getFilterContext(t);if(t.off){return !0}if(!F.parent){v.onRoot(t,F)}for(;;){E=F.name;if(!(B=v.onElementName(t,E))){return this.remove(),!1}F.name=B;if(!(F=v.onElement(t,F))){return this.remove(),!1}if(F!==this){return this.replaceWith(F),!1}if(F.name==E){break}if(F.type!=CKEDITOR.NODE_ELEMENT){return this.replaceWith(F),!1}if(!F.name){return this.replaceWithChildren(),!1}}E=F.attributes;var y,x;for(y in E){x=y;for(B=E[y];;){if(x=v.onAttributeName(t,y)){if(x!=y){delete E[y],y=x}else{break}}else{delete E[y];break}}x&&(!1===(B=v.onAttribute(t,F,x,B))?delete E[x]:E[x]=B)}F.isEmpty||this.filterChildren(v,!1,t);return !0},filterChildren:hL.filterChildren,writeHtml:function(v,t){t&&this.filter(t);var F=this.name,E=[],B=this.attributes,y,x;v.openTag(F,B);for(y in B){E.push([y,B[y]])}v.sortAttributes&&E.sort(a1);y=0;for(x=E.length;y<x;y++){B=E[y],v.attribute(B[0],B[1])}v.openTagClose(F,this.isEmpty);this.writeChildrenHtml(v);this.isEmpty||v.closeTag(F)},writeChildrenHtml:hL.writeChildrenHtml,replaceWithChildren:function(){for(var v=this.children,t=v.length;t;){v[--t].insertAfter(this)}this.remove()},forEach:hL.forEach,getFirst:function(v){if(!v){return this.children.length?this.children[0]:null}if("function"!=typeof v){var t=v;v=function(B){return B.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof t?B.name==t:B.name in t)}}for(var y=0,x=this.children.length;y<x;++y){if(v(this.children[y])){return this.children[y]}}return null},getHtml:function(){var t=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(t);return t.getHtml()},setHtml:function(v){v=this.children=CKEDITOR.htmlParser.fragment.fromHtml(v).children;for(var t=0,x=v.length;t<x;++t){v[t].parent=this}},getOuterHtml:function(){var t=new CKEDITOR.htmlParser.basicWriter;this.writeHtml(t);return t.getHtml()},split:function(v){for(var t=this.children.splice(v,this.children.length-v),y=this.clone(),x=0;x<t.length;++x){t[x].parent=y}y.children=t;t[0]&&(t[0].previous=null);0<v&&(this.children[v-1].next=null);this.parent.add(y,this.getIndex()+1);return y},removeClass:function(v){var t=this.attributes["class"];t&&((t=CKEDITOR.tools.trim(t.replace(RegExp("(?:\\s+|^)"+v+"(?:\\s+|$)")," ")))?this.attributes["class"]=t:delete this.attributes["class"])},hasClass:function(v){var t=this.attributes["class"];return !t?!1:RegExp("(?:^|\\s)"+v+"(?=\\s|$)").test(t)},getFilterContext:function(v){var t=[];v||(v={off:!1,nonEditable:!1,nestedEditable:!1});!v.off&&"off"==this.attributes["data-cke-processor"]&&t.push("off",!0);!v.nonEditable&&"false"==this.attributes.contenteditable?t.push("nonEditable",!0):!v.nestedEditable&&"true"==this.attributes.contenteditable&&t.push("nestedEditable",!0);if(t.length){v=CKEDITOR.tools.copy(v);for(var x=0;x<t.length;x+=2){v[t[x]]=t[x+1]}}return v}},!0);var gU={},aJ=/{([^}]+)}/g,aq=/([\\'])/g,n=/\n/g,jA=/\r/g;CKEDITOR.template=function(v){if(gU[v]){this.output=gU[v]}else{var t=v.replace(aq,"\\$1").replace(n,"\\n").replace(jA,"\\r").replace(aJ,function(y,x){return"',data['"+x+"']==undefined?'{"+x+"}':data['"+x+"'],'"});this.output=gU[v]=Function("data","buffer","return buffer?buffer.push('"+t+"'):['"+t+"'].join('');")}};delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);CKEDITOR.add=function(t){CKEDITOR.instances[t.name]=t;t.on("focus",function(){CKEDITOR.currentInstance!=t&&(CKEDITOR.currentInstance=t,CKEDITOR.fire("currentInstance"))});t.on("blur",function(){CKEDITOR.currentInstance==t&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))});CKEDITOR.fire("instance",null,t)};CKEDITOR.remove=function(t){delete CKEDITOR.instances[t.name]};var gC={};CKEDITOR.addTemplate=function(v,t){var x=gC[v];if(x){return x}x={name:v,source:t};CKEDITOR.fire("template",x);return gC[v]=new CKEDITOR.template(x.source)};CKEDITOR.getTemplate=function(t){return gC[t]};var e4=[];CKEDITOR.addCss=function(t){e4.push(t)};CKEDITOR.getCss=function(){return e4.join("\n")};CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;CKEDITOR.TRISTATE_DISABLED=0;CKEDITOR.inline=function(v,t){if(!CKEDITOR.env.isCompatible){return null}v=CKEDITOR.dom.element.get(v);if(v.getEditor()){throw'The editor instance "'+v.getEditor().name+'" is already attached to the provided element.'}var y=new CKEDITOR.editor(t,v,CKEDITOR.ELEMENT_MODE_INLINE),x=v.is("textarea")?v:null;x?(y.setData(x.getValue(),null,!0),v=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!y.readOnly+'" class="cke_textarea_inline">'+x.getValue()+"</div>",CKEDITOR.document),v.insertAfter(x),x.hide(),x.$.form&&y._attachToForm()):y.setData(v.getHtml(),null,!0);y.on("loaded",function(){y.fire("uiReady");y.editable(v);y.container=v;y.setData(y.getData(1));y.resetDirty();y.fire("contentDom");y.mode="wysiwyg";y.fire("mode");y.status="ready";y.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,y)},null,null,10000);y.on("destroy",function(){x&&(y.container.clearCustomData(),y.container.remove(),x.show());y.element.clearCustomData();delete y.element});return y};CKEDITOR.inlineAll=function(){var v,t,E;for(E in CKEDITOR.dtd.$editable){for(var B=CKEDITOR.document.getElementsByTag(E),y=0,x=B.count();y<x;y++){v=B.getItem(y),"true"==v.getAttribute("contenteditable")&&(t={element:v,config:{}},!1!==CKEDITOR.fire("inline",t)&&CKEDITOR.inline(v,t.config))}}};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()});CKEDITOR.replaceClass="ckeditor";var eM=function(v,t,B,y){if(!CKEDITOR.env.isCompatible){return null}v=CKEDITOR.dom.element.get(v);if(v.getEditor()){throw'The editor instance "'+v.getEditor().name+'" is already attached to the provided element.'}var x=new CKEDITOR.editor(t,v,y);y==CKEDITOR.ELEMENT_MODE_REPLACE&&(v.setStyle("visibility","hidden"),x._.required=v.hasAttribute("required"),v.removeAttribute("required"));B&&x.setData(B,null,!0);x.on("loaded",function(){var E=x.name,I=x.element,H=x.elementMode,G=x.fire("uiSpace",{space:"top",html:""}).html,F=x.fire("uiSpace",{space:"bottom",html:""}).html;f9||(f9=CKEDITOR.addTemplate("maincontainer",'<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'));E=CKEDITOR.dom.element.createFromHtml(f9.output({id:x.id,name:E,langDir:x.lang.dir,langCode:x.langCode,voiceLabel:[x.lang.editor,x.name].join(", "),topHtml:G?'<span id="'+x.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+G+"</span>":"",contentId:x.ui.spaceId("contents"),bottomHtml:F?'<span id="'+x.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+F+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));H==CKEDITOR.ELEMENT_MODE_REPLACE?(I.hide(),E.insertAfter(I)):I.append(E);x.container=E;G&&x.ui.space("top").unselectable();F&&x.ui.space("bottom").unselectable();I=x.config.width;H=x.config.height;I&&E.setStyle("width",CKEDITOR.tools.cssLength(I));H&&x.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(H));E.disableContextMenu();CKEDITOR.env.webkit&&E.on("focus",function(){x.focus()});x.fireOnce("uiReady");y==CKEDITOR.ELEMENT_MODE_REPLACE&&x.config.autoUpdateElement&&v.$.form&&x._attachToForm();x.setMode(x.config.startupMode,function(){x.resetDirty();x.status="ready";x.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,x)})});x.on("destroy",i9);return x},i9=function(){var v=this.container,t=this.element;v&&(v.clearCustomData(),v.remove());t&&(t.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.show(),this._.required&&t.setAttribute("required","required")),delete this.element)};CKEDITOR.replace=function(v,t){return eM(v,t,null,CKEDITOR.ELEMENT_MODE_REPLACE)};CKEDITOR.appendTo=function(v,t,x){return eM(v,t,x,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var v=document.getElementsByTagName("textarea"),t=0;t<v.length;t++){var y=null,x=v[t];if(x.name||x.id){if("string"==typeof arguments[0]){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(x.className)){continue}}else{if("function"==typeof arguments[0]&&(y={},!1===arguments[0](x,y))){continue}}this.replace(x,y)}}};CKEDITOR.editor.prototype.addMode=function(v,t){(this._.modes||(this._.modes={}))[v]=t};CKEDITOR.editor.prototype.setMode=function(v,t){var B=this,y=this._.modes;if(!(v==B.mode||!y||!y[v])){B.fire("beforeSetMode",v);if(B.mode){var x=B.checkDirty();B._.previousMode=B.mode;B.fire("beforeModeUnload");B.editable(0);B.ui.space("contents").setHtml("");B.mode=""}this._.modes[v](function(){B.mode=v;void 0!==x&&!x&&B.resetDirty();setTimeout(function(){B.fire("mode");t&&t.call(B)},0)})}};CKEDITOR.editor.prototype.resize=function(v,t,F,E){var B=this.container,y=this.ui.space("contents"),x=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;E=E?B.getChild(1):B;E.setSize("width",v,!0);x&&(x.style.width="1%");y.setStyle("height",Math.max(t-(F?0:(E.$.offsetHeight||0)-(y.$.clientHeight||0)),0)+"px");x&&(x.style.width="100%");this.fire("resize")};CKEDITOR.editor.prototype.getResizable=function(t){return t?this.ui.space("contents"):this.container};var f9;CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)});CKEDITOR.config.startupMode="wysiwyg";var iG=function(v){var t=v.data.getTarget();t.is("input")&&(t=t.getAttribute("type"),("submit"==t||"reset"==t)&&v.data.preventDefault())},h1=function(t){return fR(t)&&hO(t)},fy=function(t){t.editor.focus();t.editor.fire("saveSnapshot")},eu=function(v,t){var x=v.editor;!t&&x.getSelection().scrollIntoView();setTimeout(function(){x.fire("saveSnapshot")},0)};CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(v,t){this.base(t.$||t);this.editor=v;this.hasFocus=!1;this.setup()},proto:{focus:function(){var v;if(CKEDITOR.env.webkit&&!this.hasFocus&&(v=this.editor._.previousActive||this.getDocument().getActive(),this.contains(v))){v.focus();return}try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(t){if(!CKEDITOR.env.ie){throw t}}CKEDITOR.env.safari&&!this.isInline()&&(v=CKEDITOR.document.getActive(),v.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(v,t){var B=Array.prototype.slice.call(arguments,0);if(CKEDITOR.env.ie&&/^focus|blur$/.exec(v)){var y=t,x=this;t=function(F){var E=CKEDITOR.dom.element.get(F.data.$.toElement||F.data.$.fromElement||F.data.$.relatedTarget);(!E||!x.equals(E)&&!x.contains(E))&&y.call(this,F)};B[0]="focus"==v?"focusin":"focusout";B[1]=t}return CKEDITOR.dom.element.prototype.on.apply(this,B)},attachListener:function(v,t,F,E,B,y){!this._.listeners&&(this._.listeners=[]);var x=Array.prototype.slice.call(arguments,1),x=v.on.apply(v,x);this._.listeners.push(x);return x},clearListeners:function(){var v=this._.listeners;try{for(;v.length;){v.pop().removeListener()}}catch(t){}},restoreAttrs:function(){var v=this._.attrChanges,t,x;for(x in v){v.hasOwnProperty(x)&&(t=v[x],null!==t?this.setAttribute(x,t):this.removeAttribute(x))}},attachClass:function(v){var t=this.getCustomData("classes");this.hasClass(v)||(!t&&(t=[]),t.push(v),this.setCustomData("classes",t),this.addClass(v))},changeAttr:function(v,t){var x=this.getAttribute(v);t!==x&&(!this._.attrChanges&&(this._.attrChanges={}),v in this._.attrChanges||(this._.attrChanges[v]=x),this.setAttribute(v,t))},insertHtml:function(v,t){fy(this);e6(this,t||"html",v)},insertText:function(v){fy(this);var t=this.editor,F=t.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:t.activeEnterMode,t=F==CKEDITOR.ENTER_BR,E=CKEDITOR.tools;v=E.htmlEncode(v.replace(/\r\n/g,"\n"));v=v.replace(/\t/g,"&nbsp;&nbsp; &nbsp;");F=F==CKEDITOR.ENTER_P?"p":"div";if(!t){var B=/\n{2}/g;if(B.test(v)){var y="<"+F+">",x="</"+F+">";v=y+v.replace(B,function(){return x+y})+x}}v=v.replace(/\n/g,"<br>");t||(v=v.replace(RegExp("<br>(?=</"+F+">)"),function(G){return E.repeat(G,2)}));v=v.replace(/^ | $/g,"&nbsp;");v=v.replace(/(>|\s) /g,function(H,G){return G+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;");e6(this,"text",v)},insertElement:function(v,t){t?this.insertElementIntoRange(v,t):this.insertElementIntoSelection(v)},insertElementIntoRange:function(v,t){var G=this.editor,F=G.config.enterMode,E=v.getName(),B=CKEDITOR.dtd.$block[E];if(t.checkReadOnly()){return !1}t.deleteContents(1);t.startContainer.type==CKEDITOR.NODE_ELEMENT&&t.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&d2(t);var y,x;if(B){for(;(y=t.getCommonAncestor(0,1))&&(x=CKEDITOR.dtd[y.getName()])&&(!x||!x[E]);){y.getName() in CKEDITOR.dtd.span?t.splitElement(y):t.checkStartOfBlock()&&t.checkEndOfBlock()?(t.setStartBefore(y),t.collapse(!0),y.remove()):t.splitBlock(F==CKEDITOR.ENTER_DIV?"div":"p",G.editable())}}t.insertNode(v);return !0},insertElementIntoSelection:function(v){var t=this.editor,B=t.activeEnterMode,t=t.getSelection(),y=t.getRanges()[0],x=v.getName(),x=CKEDITOR.dtd.$block[x];fy(this);this.insertElementIntoRange(v,y)&&(y.moveToPosition(v,CKEDITOR.POSITION_AFTER_END),x&&((x=v.getNext(function(E){return h1(E)&&!dK(E)}))&&x.type==CKEDITOR.NODE_ELEMENT&&x.is(CKEDITOR.dtd.$block)?x.getDtd()["#"]?y.moveToElementEditStart(x):y.moveToElementEditEnd(v):!x&&B!=CKEDITOR.ENTER_BR&&(x=y.fixBlock(!0,B==CKEDITOR.ENTER_DIV?"div":"p"),y.moveToElementEditStart(x))));t.selectRanges([y]);eu(this,CKEDITOR.env.opera)},setData:function(v,t){t||(v=this.editor.dataProcessor.toHtml(v));this.setHtml(v);this.editor.fire("dataReady")},getData:function(v){var t=this.getHtml();v||(t=this.editor.dataProcessor.toDataFormat(t));return t},setReadOnly:function(t){this.setAttribute("contenteditable",!t)},detach:function(){this.removeClass("cke_editable");var t=this.editor;this._.detach();delete t.document;delete t.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},setup:function(){var v=this.editor;this.attachListener(v,"beforeGetData",function(){var E=this.getData();this.is("textarea")||!1!==v.config.ignoreEmptyParagraph&&(E=E.replace(c8,function(G,F){return F}));v.setData(E,null,1)},this);this.attachListener(v,"getSnapshot",function(E){E.data=this.getData(1)},this);this.attachListener(v,"afterSetData",function(){this.setData(v.getData(1))},this);this.attachListener(v,"loadSnapshot",function(E){this.setData(E.data,1)},this);this.attachListener(v,"beforeFocus",function(){var E=v.getSelection();(E=E&&E.getNative())&&"Control"==E.type||this.focus()},this);this.attachListener(v,"insertHtml",function(E){this.insertHtml(E.data.dataValue,E.data.mode)},this);this.attachListener(v,"insertElement",function(E){this.insertElement(E.data)},this);this.attachListener(v,"insertText",function(E){this.insertText(E.data)},this);this.setReadOnly(v.readOnly);this.attachClass("cke_editable");this.attachClass(v.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"cke_editable_inline":v.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE||v.elementMode==CKEDITOR.ELEMENT_MODE_APPENDTO?"cke_editable_themed":"");this.attachClass("cke_contents_"+v.config.contentsLangDirection);v.keystrokeHandler.blockedKeystrokes[8]=+v.readOnly;v.keystrokeHandler.attach(this);this.on("blur",function(E){CKEDITOR.env.opera&&CKEDITOR.document.getActive().equals(this.isInline()?this:this.getWindow().getFrame())?E.cancel():this.hasFocus=!1},null,null,-1);this.on("focus",function(){this.hasFocus=!0},null,null,-1);v.focusManager.add(this);this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,v.once("contentDom",function(){v.focusManager.focus()}));this.isInline()&&this.changeAttr("tabindex",v.tabIndex);if(!this.is("textarea")){v.document=this.getDocument();v.window=this.getWindow();var t=v.document;this.changeAttr("spellcheck",!v.config.disableNativeSpellChecker);var B=v.config.contentsLangDirection;this.getDirection(1)!=B&&this.changeAttr("dir",B);var y=CKEDITOR.getCss();y&&(B=t.getHead(),B.getCustomData("stylesheet")||(y=t.appendStyleText(y),y=new CKEDITOR.dom.element(y.ownerNode||y.owningElement),B.setCustomData("stylesheet",y),y.data("cke-temp",1)));B=t.getCustomData("stylesheet_ref")||0;t.setCustomData("stylesheet_ref",B+1);this.setCustomData("cke_includeReadonly",!v.config.disableReadonlyStyling);this.attachListener(this,"click",function(F){F=F.data;var E=(new CKEDITOR.dom.elementPath(F.getTarget(),this)).contains("a");E&&2!=F.$.button&&E.isReadOnly()&&F.preventDefault()});var x={8:1,46:1};this.attachListener(v,"key",function(O){if(v.readOnly){return !0}var N=O.data.keyCode,M;if(N in x){O=v.getSelection();var L,K=O.getRanges()[0],J=K.startPath(),I,G,H,N=8==N,F;if(!(F=CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(L=O.getSelectedElement()))){v:{var E;L=O.getRanges()[0];F=O.root;var Q={table:1,ul:1,ol:1,dl:1};if(L.startPath().contains(Q)){O=function(R){return function(S,T){T&&S.type==CKEDITOR.NODE_ELEMENT&&S.is(Q)&&(E=S);if(!T&&h1(S)&&(!R||!dK(S))){return !1}}};var P=L.clone();P.collapse(1);P.setStartAt(F,CKEDITOR.POSITION_AFTER_START);F=new CKEDITOR.dom.walker(P);F.guard=O();F.checkBackward();if(E){P=L.clone();P.collapse();P.setEndAt(E,CKEDITOR.POSITION_AFTER_END);F=new CKEDITOR.dom.walker(P);F.guard=O(!0);E=!1;F.checkForward();O=E;break v}}O=null}F=L=O}if(F){v.fire("saveSnapshot"),K.moveToPosition(L,CKEDITOR.POSITION_BEFORE_START),L.remove(),K.select(),v.fire("saveSnapshot"),M=1}else{if(K.collapsed){if((I=J.block)&&(H=I[N?"getPrevious":"getNext"](fR))&&H.type==CKEDITOR.NODE_ELEMENT&&H.is("table")&&K[N?"checkStartOfBlock":"checkEndOfBlock"]()){v.fire("saveSnapshot"),K[N?"checkEndOfBlock":"checkStartOfBlock"]()&&I.remove(),K["moveToElementEdit"+(N?"End":"Start")](H),K.select(),v.fire("saveSnapshot"),M=1}else{if(J.blockLimit&&J.blockLimit.is("td")&&(G=J.blockLimit.getAscendant("table"))&&K.checkBoundaryOfElement(G,N?CKEDITOR.START:CKEDITOR.END)&&(H=G[N?"getPrevious":"getNext"](fR))){v.fire("saveSnapshot"),K["moveToElementEdit"+(N?"End":"Start")](H),K.checkStartOfBlock()&&K.checkEndOfBlock()?H.remove():K.select(),v.fire("saveSnapshot"),M=1}else{if((G=J.contains(["td","th","caption"]))&&K.checkBoundaryOfElement(G,N?CKEDITOR.START:CKEDITOR.END)){M=1}}}}}}return !M});v.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(E){E.data.getKeystroke() in x&&!this.getFirst(h1)&&(this.appendBogus(),E=v.createRange(),E.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),E.select())});this.attachListener(this,"dblclick",function(E){if(v.readOnly){return !1}E={element:E.data.getTarget()};v.fire("doubleclick",E)});CKEDITOR.env.ie&&this.attachListener(this,"click",iG);!CKEDITOR.env.ie&&!CKEDITOR.env.opera&&this.attachListener(this,"mousedown",function(E){var F=E.data.getTarget();F.is("img","hr","input","textarea","select")&&(v.getSelection().selectElement(F),F.is("input","textarea","select")&&E.data.preventDefault())});CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(E){if(2==E.data.$.button&&(E=E.data.getTarget(),!E.getOuterHtml().replace(c8,""))){var F=v.createRange();F.moveToElementEditStart(E);F.select(!0)}});CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(E){E.data.getTarget().is("input","select")&&E.data.preventDefault()}),this.attachListener(this,"mouseup",function(E){E.data.getTarget().is("input","textarea")&&E.data.preventDefault()}))}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1);this.clearListeners();this.restoreAttrs();var v;if(v=this.removeCustomData("classes")){for(;v.length;){this.removeClass(v.pop())}}v=this.getDocument();var t=v.getHead();if(t.getCustomData("stylesheet")){var x=v.getCustomData("stylesheet_ref");--x?v.setCustomData("stylesheet_ref",x):(v.removeCustomData("stylesheet_ref"),t.removeCustomData("stylesheet").remove())}this.editor.fire("contentDomUnload");delete this.editor}}});CKEDITOR.editor.prototype.editable=function(v){var t=this._.editable;if(t&&v){return 0}arguments.length&&(t=this._.editable=v?v instanceof CKEDITOR.editable?v:new CKEDITOR.editable(this,v):(t&&t.detach(),null));return t};var dK=CKEDITOR.dom.walker.bogus(),c8=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,fR=CKEDITOR.dom.walker.whitespaces(!0),hO=CKEDITOR.dom.walker.bookmark(!1,!0);CKEDITOR.on("instanceLoaded",function(v){var t=v.editor;t.on("insertElement",function(x){x=x.data;if(x.type==CKEDITOR.NODE_ELEMENT&&(x.is("input")||x.is("textarea"))){"false"!=x.getAttribute("contentEditable")&&x.data("cke-editable",x.hasAttribute("contenteditable")?"true":"1"),x.setAttribute("contentEditable",!1)}});t.on("selectionChange",function(J){if(!t.readOnly){var I=t.getSelection();if(I&&!I.isLocked){I=t.checkDirty();t.fire("lockSnapshot");var H=J.editor,G=J.data.path,F=G.blockLimit,E=J.data.selection,B=E.getRanges()[0],y;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller){if(E.isFake){E=0}else{var x=(E=G.block||G.blockLimit)&&E.getLast(h1),E=E&&E.isBlockBoundary()&&(!x||!(x.type==CKEDITOR.NODE_ELEMENT&&x.isBlockBoundary()))&&!E.is("pre")&&!E.getBogus()?E:void 0}E&&(E.appendBogus(),y=CKEDITOR.env.ie)}if(!1!==H.config.autoParagraph&&(H.activeEnterMode!=CKEDITOR.ENTER_BR&&H.editable().equals(F)&&!G.block&&B.collapsed&&!B.getCommonAncestor().isReadOnly())&&(G=B.clone(),G.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),F=new CKEDITOR.dom.walker(G),F.guard=function(K){return !h1(K)||K.type==CKEDITOR.NODE_COMMENT||K.isReadOnly()},!F.checkForward()||G.checkStartOfBlock()&&G.checkEndOfBlock())){H=B.fixBlock(!0,H.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(H=H.getFirst(h1))&&H.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(H.getText()).match(/^(?:&nbsp;|\xa0)$/)&&H.remove(),y=1,J.cancel()}y&&B.select();t.fire("unlockSnapshot");!I&&t.resetDirty()}}})});CKEDITOR.on("instanceCreated",function(v){var t=v.editor;t.on("mode",function(){var x=t.editable();if(x&&x.isInline()){var E=t.title;x.changeAttr("role","textbox");x.changeAttr("aria-label",E);E&&x.changeAttr("title",E);if(E=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents")){var B=CKEDITOR.tools.getNextId(),y=CKEDITOR.dom.element.createFromHtml('<span id="'+B+'" class="cke_voice_label">'+this.lang.common.editorHelp+"</span>");E.append(y);x.changeAttr("aria-describedby",B)}}})});CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var e6,im=function(t){return t.type==CKEDITOR.NODE_ELEMENT},cQ=function(N,M){var L,K,J,I,H=[],G=M.range.startContainer;L=M.range.startPath();for(var G=h6[G.getName()],F=0,E=N.getChildren(),B=E.count(),y=-1,v=-1,x=0,t=L.contains(h6.$list);F<B;++F){if(L=E.getItem(F),im(L)){if(J=L.getName(),t&&J in CKEDITOR.dtd.$list){H=H.concat(cQ(L,M))}else{I=!!G[J];if("br"==J&&L.data("cke-eol")&&(!F||F==B-1)){x=(K=F?H[F-1].node:E.getItem(F+1))&&(!im(K)||!K.is("br")),K=K&&im(K)&&h6.$block[K.getName()]}-1==y&&!I&&(y=F);I||(v=F);H.push({isElement:1,isLineBreak:x,isBlock:L.isBlockBoundary(),hasBlockSibling:K,node:L,name:J,allowed:I});K=x=0}}else{H.push({isElement:0,node:L,allowed:1})}}-1<y&&(H[y].firstNotAllowed=1);-1<v&&(H[v].lastNotAllowed=1);return H},cy=function(H,G){var F=[],E=H.getChildren(),B=E.count(),y,x=0,v=h6[G],t=!H.is(h6.$inline)||H.is("br");for(t&&F.push(" ");x<B;x++){y=E.getItem(x),im(y)&&!y.is(v)?F=F.concat(cy(y,G)):F.push(y)}t&&F.push(" ");return F},hz=function(t){return t&&im(t)&&(t.is(h6.$removeEmpty)||t.is("a")&&!t.isBlockBoundary())},b6=function(v,t,F,E){var B=v.clone(),y,x;B.setEndAt(t,CKEDITOR.POSITION_BEFORE_END);if((y=(new CKEDITOR.dom.walker(B)).next())&&im(y)&&hr[y.getName()]&&(x=y.getPrevious())&&im(x)&&!x.getParent().equals(v.startContainer)&&F.contains(x)&&E.contains(y)&&y.isIdentical(x)){y.moveChildren(x),y.remove(),b6(v,t,F,E)}},h6=CKEDITOR.dtd,hr={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},gY={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},bF=CKEDITOR.tools.extend({},h6.$inline);delete bF.br;e6=function(ae,ad,ac){var ab=ae.editor;ae.getDocument();var aa=ab.getSelection().getRanges()[0],Z=!1;"unfiltered_html"==ad&&(ad="html",Z=!0);if(!aa.checkReadOnly()){var Y=(new CKEDITOR.dom.elementPath(aa.startContainer,aa.root)).blockLimit||aa.root;ad={type:ad,dontFilter:Z,editable:ae,editor:ab,range:aa,blockLimit:Y,mergeCandidates:[],zombies:[]};var ab=ad.range,Z=ad.mergeCandidates,X,W,V,U;"text"==ad.type&&ab.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(X=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",ab.document),ab.insertNode(X),ab.setStartAfter(X));W=new CKEDITOR.dom.elementPath(ab.startContainer);ad.endPath=V=new CKEDITOR.dom.elementPath(ab.endContainer);if(!ab.collapsed){var Y=V.block||V.blockLimit,T=ab.getCommonAncestor();Y&&!Y.equals(T)&&(!Y.contains(T)&&ab.checkEndOfBlock())&&ad.zombies.push(Y);ab.deleteContents()}for(;(U=im(ab.startContainer)&&ab.startContainer.getChild(ab.startOffset-1))&&im(U)&&U.isBlockBoundary()&&W.contains(U);){ab.moveToPosition(U,CKEDITOR.POSITION_BEFORE_END)}b6(ab,ad.blockLimit,W,V);X&&(ab.setEndBefore(X),ab.collapse(),X.remove());X=ab.startPath();if(Y=X.contains(hz,!1,1)){ab.splitElement(Y),ad.inlineStylesRoot=Y,ad.inlineStylesPeak=X.lastElement}X=ab.createBookmark();(Y=X.startNode.getPrevious(h1))&&im(Y)&&hz(Y)&&Z.push(Y);(Y=X.startNode.getNext(h1))&&im(Y)&&hz(Y)&&Z.push(Y);for(Y=X.startNode;(Y=Y.getParent())&&hz(Y);){Z.push(Y)}ab.moveToBookmark(X);if(X=ac){X=ad.range;if("text"==ad.type&&ad.inlineStylesRoot){U=ad.inlineStylesPeak;ab=U.getDocument().createText("{cke-peak}");for(Z=ad.inlineStylesRoot.getParent();!U.equals(Z);){ab=ab.appendTo(U.clone()),U=U.getParent()}ac=ab.getOuterHtml().split("{cke-peak}").join(ac)}U=ad.blockLimit.getName();if(/^\s+|\s+$/.test(ac)&&"span" in CKEDITOR.dtd[U]){var R='<span data-cke-marker="1">&nbsp;</span>';ac=R+ac+R}ac=ad.editor.dataProcessor.toHtml(ac,{context:null,fixForBody:!1,dontFilter:ad.dontFilter,filter:ad.editor.activeFilter,enterMode:ad.editor.activeEnterMode});U=X.document.createElement("body");U.setHtml(ac);R&&(U.getFirst().remove(),U.getLast().remove());if((R=X.startPath().block)&&!(1==R.getChildCount()&&R.getBogus())){ae:{var S;if(1==U.getChildCount()&&im(S=U.getFirst())&&S.is(gY)){R=S.getElementsByTag("*");X=0;for(Z=R.count();X<Z;X++){if(ab=R.getItem(X),!ab.is(bF)){break ae}}S.moveChildren(S.getParent(1));S.remove()}}}ad.dataWrapper=U;X=ac}if(X){S=ad.range;var R=S.document,P;ac=ad.blockLimit;X=0;var O;U=[];var M,H,Z=ab=0,J,Q;W=S.startContainer;var Y=ad.endPath.elements[0],E;V=Y.getPosition(W);T=!!Y.getCommonAncestor(W)&&V!=CKEDITOR.POSITION_IDENTICAL&&!(V&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);V=W=cQ(ad.dataWrapper,ad);P=S;J=function(v,t){if(t.isBlock&&t.isElement&&!t.node.is("br")&&im(v)&&v.is("br")){return v.remove(),1}};var N=P.endContainer.getChild(P.endOffset),L=P.endContainer.getChild(P.endOffset-1);N&&J(N,V[V.length-1]);L&&J(L,V[0])&&(P.setEnd(P.endContainer,P.endOffset-1),P.collapse());for(;X<W.length;X++){V=W[X];if(P=V.isLineBreak){P=S,J=ac,L=N=void 0,V.hasBlockSibling?P=1:(N=P.startContainer.getAscendant(h6.$block,1),!N||!N.is({div:1,p:1})?P=0:(L=N.getPosition(J),L==CKEDITOR.POSITION_IDENTICAL||L==CKEDITOR.POSITION_CONTAINS?P=0:(J=P.splitElement(N),P.moveToPosition(J,CKEDITOR.POSITION_AFTER_START),P=1)))}if(P){Z=0<X}else{P=S.startPath();if(!V.isBlock&&!1!==ad.editor.config.autoParagraph&&ad.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&(ad.editor.editable().equals(P.blockLimit)&&!P.block)&&(H=ad.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&!1!==ad.editor.config.autoParagraph?ad.editor.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1)){H=R.createElement(H),H.appendBogus(),S.insertNode(H),CKEDITOR.env.needsBrFiller&&(O=H.getBogus())&&O.remove(),S.moveToPosition(H,CKEDITOR.POSITION_BEFORE_END)}if((P=S.startPath().block)&&!P.equals(M)){if(O=P.getBogus()){O.remove(),U.push(P)}M=P}V.firstNotAllowed&&(ab=1);if(ab&&V.isElement){P=S.startContainer;for(J=null;P&&!h6[P.getName()][V.name];){if(P.equals(ac)){P=null;break}J=P;P=P.getParent()}if(P){J&&(Q=S.splitElement(J),ad.zombies.push(Q),ad.zombies.push(J))}else{J=ac.getName();E=!X;P=X==W.length-1;J=cy(V.node,J);for(var N=[],L=J.length,K=0,I=void 0,G=0,B=-1;K<L;K++){if(I=J[K]," "==I){if(!G&&(!E||K)){N.push(new CKEDITOR.dom.text(" ")),B=N.length}G=1}else{N.push(I),G=0}}P&&B==N.length&&N.pop();E=N}}if(E){for(;P=E.pop();){S.insertNode(P)}E=0}else{S.insertNode(V.node)}V.lastNotAllowed&&X<W.length-1&&((Q=T?Y:Q)&&S.setEndAt(Q,CKEDITOR.POSITION_AFTER_START),ab=0);S.collapse()}}ad.dontMoveCaret=Z;ad.bogusNeededBlocks=U}O=ad.range;var F;Q=ad.bogusNeededBlocks;for(E=O.createBookmark();M=ad.zombies.pop();){M.getParent()&&(H=O.clone(),H.moveToElementEditStart(M),H.removeEmptyBlocksAtEnd())}if(Q){for(;M=Q.pop();){CKEDITOR.env.needsBrFiller?M.appendBogus():M.append(O.document.createText("\u00a0"))}}for(;M=ad.mergeCandidates.pop();){M.mergeSiblings()}O.moveToBookmark(E);if(!ad.dontMoveCaret){for(M=im(O.startContainer)&&O.startContainer.getChild(O.startOffset-1);M&&im(M)&&!M.is(h6.$empty);){if(M.isBlockBoundary()){O.moveToPosition(M,CKEDITOR.POSITION_BEFORE_END)}else{if(hz(M)&&M.getHtml().match(/(\s|&nbsp;)$/g)){F=null;break}F=O.clone();F.moveToPosition(M,CKEDITOR.POSITION_BEFORE_END)}M=M.getLast(h1)}F&&O.moveToRange(F)}aa.select();eu(ae)}};var d2,bn=function(t){t=new CKEDITOR.dom.walker(t);t.guard=function(v,x){if(x){return !1}if(v.type==CKEDITOR.NODE_ELEMENT){return v.is(CKEDITOR.dtd.$tableContent)}};t.evaluator=function(v){return v.type==CKEDITOR.NODE_ELEMENT};return t},aV=function(v,t,x){t=v.getDocument().createElement(t);v.append(t,x);return t},aD=function(v){var t=v.count(),x;for(t;0<t--;){x=v.getItem(t),CKEDITOR.tools.trim(x.getHtml())||(x.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&x.getChildCount()&&x.getFirst().remove())}};d2=function(v){var t=v.startContainer,y=t.getAscendant("table",1),x=!1;aD(y.getElementsByTag("td"));aD(y.getElementsByTag("th"));y=v.clone();y.setStart(t,0);y=bn(y).lastBackward();y||(y=v.clone(),y.setEndAt(t,CKEDITOR.POSITION_BEFORE_END),y=bn(y).lastForward(),x=!0);y||(y=t);y.is("table")?(v.setStartAt(y,CKEDITOR.POSITION_BEFORE_START),v.collapse(!0),y.remove()):(y.is({tbody:1,thead:1,tfoot:1})&&(y=aV(y,"tr",x)),y.is("tr")&&(y=aV(y,y.getParent().is("thead")?"th":"td",x)),(t=y.getBogus())&&t.remove(),v.moveToPosition(y,x?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))};var eO=function(){var v=this._.fakeSelection,t;if(v&&(t=this.getSelection(1),!t||!t.isHidden())){v.reset(),v=0}if(!v&&(v=t||this.getSelection(1),!v||v.getType()==CKEDITOR.SELECTION_NONE)){return}this.fire("selectionCheck",v);t=this.elementPath();t.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=t,this.fire("selectionChange",{selection:v,path:t}))},ho=function(){ew=!0;d4||(ak.call(this),d4=CKEDITOR.tools.setTimeout(ak,200,this))},ak=function(){d4=null;ew&&(CKEDITOR.tools.setTimeout(eO,0,this),ew=!1)},gG=function(v){function t(E,F){return !E||E.type==CKEDITOR.NODE_TEXT?!1:v.clone()["moveToElementEdit"+(F?"End":"Start")](E)}if(!(v.root instanceof CKEDITOR.editable)){return !1}var B=v.startContainer,y=v.getPreviousNode(h,null,B),x=v.getNextNode(h,null,B);return t(y)||t(x,1)||!y&&!x&&!(B.type==CKEDITOR.NODE_ELEMENT&&B.isBlockBoundary()&&B.getBogus())?!0:!1},dM=function(t){return t.getCustomData("cke-fillingChar")},g5=function(v,t){var F=v&&v.removeCustomData("cke-fillingChar");if(F){if(!1!==t){var E,B=v.getDocument().getSelection().getNative(),y=B&&"None"!=B.type&&B.getRangeAt(0);if(1<F.getLength()&&y&&y.intersectsNode(F.$)){E=[B.anchorOffset,B.focusOffset];y=B.focusNode==F.$&&0<B.focusOffset;B.anchorNode==F.$&&0<B.anchorOffset&&E[0]--;y&&E[1]--;var x,y=B;y.isCollapsed||(x=y.getRangeAt(0),x.setStart(y.anchorNode,y.anchorOffset),x.setEnd(y.focusNode,y.focusOffset),x=x.collapsed);x&&E.unshift(E.pop())}}F.setText(jv(F.getText()));E&&(F=B.getRangeAt(0),F.setStart(F.startContainer,E[0]),F.setEnd(F.startContainer,E[1]),B.removeAllRanges(),B.addRange(F))}},jv=function(t){return t.replace(/\u200B( )?/g,function(v){return v[1]?"\u00a0":""})},gV=function(v,t,F){var E=v.on("focus",function(G){G.cancel()},null,null,-100);if(CKEDITOR.env.ie){var B=v.getDocument().on("selectionchange",function(G){G.cancel()},null,null,-100)}else{var y=new CKEDITOR.dom.range(v);y.moveToElementEditStart(v);var x=v.getDocument().$.createRange();x.setStart(y.startContainer.$,y.startOffset);x.collapse(1);t.removeAllRanges();t.addRange(x)}F&&v.focus();E.removeListener();B&&B.removeListener()},gn=function(v){var t={37:1,39:1,8:1,46:1};return function(E){var B=E.data.getKeystroke();if(t[B]){var y=v.getSelection().getRanges(),x=y[0];if(1==y.length&&x.collapsed&&(B=x[38>B?"getPreviousEditableNode":"getNextEditableNode"]())&&B.type==CKEDITOR.NODE_ELEMENT&&"false"==B.getAttribute("contenteditable")){v.getSelection().fake(B),E.data.preventDefault(),E.cancel()}}}},d4,ew,h=CKEDITOR.dom.walker.invisible(1),iS,bX=function(t){return function(v){var x=v.editor.createRange();x.moveToClosestEditablePosition(v.selected,t)&&v.editor.getSelection().selectRanges([x]);return !1}},bw=function(t){return function(v){var B=v.editor,y=B.createRange(),x;if(!(x=y.moveToClosestEditablePosition(v.selected,t))){x=y.moveToClosestEditablePosition(v.selected,!t)}x&&B.getSelection().selectRanges([y]);B.fire("saveSnapshot");v.selected.remove();x||(y.moveToElementEditablePosition(B.editable()),B.getSelection().selectRanges([y]));B.fire("saveSnapshot");return !1}},a4=bX(),aM=bX(1);iS={37:a4,38:a4,39:aM,40:aM,8:bw(),46:bw(1)};CKEDITOR.on("instanceCreated",function(v){function t(){var y=x.getSelection();y&&y.removeAllRanges()}var x=v.editor;x.on("contentDom",function(){var N=x.document,M=CKEDITOR.document,L=x.editable(),K=N.getBody(),J=N.getDocumentElement(),I=L.isInline(),H,G;CKEDITOR.env.gecko&&L.attachListener(L,"focus",function(O){O.removeListener();if(0!==H&&(O=x.getSelection().getNative())&&O.isCollapsed&&O.anchorNode==L.$){O=x.createRange(),O.moveToElementEditStart(L),O.select()}},null,null,-2);L.attachListener(L,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){H&&CKEDITOR.env.webkit&&(H=x._.previousActive&&x._.previousActive.equals(N.getActive()));x.unlockSelection(H);H=0},null,null,-1);L.attachListener(L,"mousedown",function(){H=0});if(CKEDITOR.env.ie||CKEDITOR.env.opera||I){var F=function(){G=new CKEDITOR.dom.selection(x.getSelection());G.lock()};h0?L.attachListener(L,"beforedeactivate",F,null,null,-1):L.attachListener(x,"selectionCheck",F,null,null,-1);L.attachListener(L,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){x.lockSelection(G);H=1},null,null,-1);L.attachListener(L,"mousedown",function(){H=0})}if(CKEDITOR.env.ie&&!I){var B;L.attachListener(L,"mousedown",function(O){if(2==O.data.$.button&&(O=x.document.getSelection(),!O||O.getType()==CKEDITOR.SELECTION_NONE)){B=x.window.getScrollPosition()}});L.attachListener(L,"mouseup",function(O){2==O.data.$.button&&B&&(x.document.$.documentElement.scrollLeft=B.x,x.document.$.documentElement.scrollTop=B.y);B=null});if("BackCompat"!=N.$.compatMode){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){J.on("mousedown",function(O){function T(V){V=V.data.$;if(R){var U=K.$.createTextRange();try{U.moveToPoint(V.x,V.y)}catch(W){}R.setEndPoint(0>P.compareEndPoints("StartToStart",U)?"EndToEnd":"StartToStart",U);R.select()}}function S(){J.removeListener("mousemove",T);M.removeListener("mouseup",S);J.removeListener("mouseup",S);R.select()}O=O.data;if(O.getTarget().is("html")&&O.$.y<J.$.clientHeight&&O.$.x<J.$.clientWidth){var R=K.$.createTextRange();try{R.moveToPoint(O.$.x,O.$.y)}catch(Q){}var P=R.duplicate();J.on("mousemove",T);M.on("mouseup",S);J.on("mouseup",S)}})}if(7<CKEDITOR.env.version&&11>CKEDITOR.env.version){J.on("mousedown",function(O){O.data.getTarget().is("html")&&(M.on("mouseup",E),J.on("mouseup",E))});var E=function(){M.removeListener("mouseup",E);J.removeListener("mouseup",E);var P=CKEDITOR.document.$.selection,O=P.createRange();"None"!=P.type&&O.parentElement().ownerDocument==N.$&&O.select()}}}}L.attachListener(L,"selectionchange",eO,x);L.attachListener(L,"keyup",ho,x);L.attachListener(L,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){x.forceNextSelectionCheck();x.selectionChange(1)});if(I?CKEDITOR.env.webkit||CKEDITOR.env.gecko:CKEDITOR.env.opera){var y;L.attachListener(L,"mousedown",function(){y=1});L.attachListener(N.getDocumentElement(),"mouseup",function(){y&&ho.call(x);y=0})}else{L.attachListener(CKEDITOR.env.ie?L:N.getDocumentElement(),"mouseup",ho,x)}CKEDITOR.env.webkit&&L.attachListener(N,"keydown",function(O){switch(O.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:g5(L)}},null,null,-1);L.attachListener(L,"keydown",gn(x),null,null,-1)});x.on("contentDomUnload",x.forceNextSelectionCheck,x);x.on("dataReady",function(){delete x._.fakeSelection;delete x._.hiddenSelectionContainer;x.selectionChange(1)});x.on("loadSnapshot",function(){var y=x.editable().getLast(function(B){return B.type==CKEDITOR.NODE_ELEMENT});y&&y.hasAttribute("data-cke-hidden-sel")&&y.remove()},null,null,100);CKEDITOR.env.ie9Compat&&x.on("beforeDestroy",t,null,null,9);CKEDITOR.env.webkit&&x.on("setData",t);x.on("contentDomUnload",function(){x.unlockSelection()});x.on("key",function(B){if("wysiwyg"==x.mode){var y=x.getSelection();if(y.isFake){var E=iS[B.data.keyCode];if(E){return E({editor:x,selected:y.getSelectedElement(),selection:y,keyEvent:B})}}}})});CKEDITOR.on("instanceReady",function(v){var t=v.editor;if(CKEDITOR.env.webkit){t.on("selectionChange",function(){var E=t.editable(),F=dM(E);F&&(F.getCustomData("ready")?g5(E):F.setCustomData("ready",1))},null,null,-1);t.on("beforeSetMode",function(){g5(t.editable())},null,null,-1);var B,y;v=function(){var E=t.editable();if(E&&(E=dM(E))){var F=t.document.$.defaultView.getSelection();"Caret"==F.type&&F.anchorNode==E.$&&(y=1);B=E.getText();E.setText(jv(B))}};var x=function(){var E=t.editable();if(E&&(E=dM(E))){E.setText(B),y&&(t.document.$.defaultView.getSelection().setPosition(E.$,E.getLength()),y=0)}};t.on("beforeUndoImage",v);t.on("afterUndoImage",x);t.on("beforeGetData",v,null,null,0);t.on("getData",x)}});CKEDITOR.editor.prototype.selectionChange=function(t){(t?eO:ho).call(this)};CKEDITOR.editor.prototype.getSelection=function(t){return(this._.savedSelection||this._.fakeSelection)&&!t?this._.savedSelection||this._.fakeSelection:(t=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(t):null};CKEDITOR.editor.prototype.lockSelection=function(t){t=t||this.getSelection(1);return t.getType()!=CKEDITOR.SELECTION_NONE?(!t.isLocked&&t.lock(),this._.savedSelection=t,!0):!1};CKEDITOR.editor.prototype.unlockSelection=function(v){var t=this._.savedSelection;return t?(t.unlock(v),delete this._.savedSelection,!0):!1};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)};CKEDITOR.dom.range.prototype.select=function(){var t=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);t.selectRanges([this]);return t};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;var h0="function"!=typeof window.getSelection,dk=1;CKEDITOR.dom.selection=function(v){if(v instanceof CKEDITOR.dom.selection){var t=v;v=v.root}var G=v instanceof CKEDITOR.dom.element;this.rev=t?t.rev:dk++;this.document=v instanceof CKEDITOR.dom.document?v:v.getDocument();this.root=v=G?v:this.document.getBody();this.isLocked=0;this._={cache:{}};if(t){return CKEDITOR.tools.extend(this._.cache,t._.cache),this.isFake=t.isFake,this.isLocked=t.isLocked,this}t=h0?this.document.$.selection:this.document.getWindow().$.getSelection();if(CKEDITOR.env.webkit){("None"==t.type&&this.document.getActive().equals(v)||"Caret"==t.type&&t.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT)&&gV(v,t)}else{if(CKEDITOR.env.gecko){t&&this.document.getActive().equals(v)&&(t.anchorNode&&t.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT)&&gV(v,t,!0)}else{if(CKEDITOR.env.ie){var F;try{F=this.document.getActive()}catch(E){}h0?"None"==t.type&&F&&F.equals(this.document.getDocumentElement())&&gV(v,null,!0):((t=t&&t.anchorNode)&&(t=new CKEDITOR.dom.node(t)),F&&F.equals(this.document.getDocumentElement())&&(t&&(v.equals(t)||v.contains(t)))&&gV(v,null,!0))}}}F=this.getNative();var B,y;if(F){if(F.getRangeAt){B=(y=F.rangeCount&&F.getRangeAt(0))&&new CKEDITOR.dom.node(y.commonAncestorContainer)}else{try{y=F.createRange()}catch(x){}B=y&&CKEDITOR.dom.element.get(y.item&&y.item(0)||y.parentElement())}}if(!B||!(B.type==CKEDITOR.NODE_ELEMENT||B.type==CKEDITOR.NODE_TEXT)||!this.root.equals(B)&&!this.root.contains(B)){this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList}return this};var cS={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1},fV=CKEDITOR.dom.selection,fC=h0?function(){var v=this._.cache;if(v.type){return v.type}var t=CKEDITOR.SELECTION_NONE;try{var B=this.getNative(),y=B.type;"Text"==y&&(t=CKEDITOR.SELECTION_TEXT);"Control"==y&&(t=CKEDITOR.SELECTION_ELEMENT);B.createRange().parentElement()&&(t=CKEDITOR.SELECTION_TEXT)}catch(x){}return v.type=t}:function(){var v=this._.cache;if(v.type){return v.type}var t=CKEDITOR.SELECTION_TEXT,y=this.getNative();if(!y||!y.rangeCount){t=CKEDITOR.SELECTION_NONE}else{if(1==y.rangeCount){var y=y.getRangeAt(0),x=y.startContainer;x==y.endContainer&&(1==x.nodeType&&1==y.endOffset-y.startOffset&&cS[x.childNodes[y.startOffset].nodeName.toLowerCase()])&&(t=CKEDITOR.SELECTION_ELEMENT)}}return v.type=t},cA;if(h0){var b8=function(t){return(new CKEDITOR.dom.node(t)).getIndex()},au=function(L,K){L=L.duplicate();L.collapse(K);var J=L.parentElement();if(!J.hasChildNodes()){return{container:J,offset:0}}for(var I=J.children,H,G,F=L.duplicate(),E=0,B=I.length-1,y=-1,x,v;E<=B;){if(y=Math.floor((E+B)/2),H=I[y],F.moveToElementText(H),x=F.compareEndPoints("StartToStart",L),0<x){B=y-1}else{if(0>x){E=y+1}else{return{container:J,offset:b8(H)}}}}if(-1==y||y==I.length-1&&0>x){F.moveToElementText(J);F.setEndPoint("StartToStart",L);F=F.text.replace(/(\r\n|\r)/g,"\n").length;I=J.childNodes;if(!F){return H=I[I.length-1],H.nodeType!=CKEDITOR.NODE_TEXT?{container:J,offset:I.length}:{container:H,offset:H.nodeValue.length}}for(J=I.length;0<F&&0<J;){G=I[--J],G.nodeType==CKEDITOR.NODE_TEXT&&(v=G,F-=G.nodeValue.length)}return{container:v,offset:-F}}F.collapse(0<x?!0:!1);F.setEndPoint(0<x?"StartToStart":"EndToStart",L);F=F.text.replace(/(\r\n|\r)/g,"\n").length;if(!F){return{container:J,offset:b8(H)+(0<x?0:1)}}for(;0<F;){try{G=H[0<x?"previousSibling":"nextSibling"],G.nodeType==CKEDITOR.NODE_TEXT&&(F-=G.nodeValue.length,v=G),H=G}catch(t){return{container:J,offset:b8(H)}}}return{container:v,offset:0<x?-F:v.nodeValue.length+F}};cA=function(){var v=this.getNative(),t=v&&v.createRange(),F=this.getType();if(!v){return[]}if(F==CKEDITOR.SELECTION_TEXT){return v=new CKEDITOR.dom.range(this.root),F=au(t,!0),v.setStart(new CKEDITOR.dom.node(F.container),F.offset),F=au(t),v.setEnd(new CKEDITOR.dom.node(F.container),F.offset),v.endContainer.getPosition(v.startContainer)&CKEDITOR.POSITION_PRECEDING&&v.endOffset<=v.startContainer.getIndex()&&v.collapse(),[v]}if(F==CKEDITOR.SELECTION_ELEMENT){for(var F=[],E=0;E<t.length;E++){for(var B=t.item(E),y=B.parentNode,x=0,v=new CKEDITOR.dom.range(this.root);x<y.childNodes.length&&y.childNodes[x]!=B;x++){}v.setStart(new CKEDITOR.dom.node(y),x);v.setEnd(new CKEDITOR.dom.node(y),x+1);F.push(v)}return F}return[]}}else{cA=function(){var v=[],t,B=this.getNative();if(!B){return v}for(var y=0;y<B.rangeCount;y++){var x=B.getRangeAt(y);t=new CKEDITOR.dom.range(this.root);t.setStart(new CKEDITOR.dom.node(x.startContainer),x.startOffset);t.setEnd(new CKEDITOR.dom.node(x.endContainer),x.endOffset);v.push(t)}return v}}var fk=cA;fV.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=h0?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:fC,getRanges:function(H){var G=this._.cache;if(G.ranges&&!H){return G.ranges}G.ranges||(G.ranges=new CKEDITOR.dom.rangeList(fk.call(this)));if(H){for(var F=G.ranges,E=0;E<F.length;E++){var B=F[E];B.getCommonAncestor().isReadOnly()&&F.splice(E,1);if(!B.collapsed){if(B.startContainer.isReadOnly()){H=B.startContainer;for(var y;H&&(!(y=H.type==CKEDITOR.NODE_ELEMENT)||!H.is("body"))&&H.isReadOnly();){y&&"false"==H.getAttribute("contentEditable")&&B.setStartAfter(H),H=H.getParent()}}H=B.startContainer;y=B.endContainer;var x=B.startOffset,v=B.endOffset,t=B.clone();H&&H.type==CKEDITOR.NODE_TEXT&&(x>=H.getLength()?t.setStartAfter(H):t.setStartBefore(H));y&&y.type==CKEDITOR.NODE_TEXT&&(v?t.setEndAfter(y):t.setEndBefore(y));H=new CKEDITOR.dom.walker(t);H.evaluator=function(J){if(J.type==CKEDITOR.NODE_ELEMENT&&J.isReadOnly()){var I=B.clone();B.setEndBefore(J);B.collapsed&&F.splice(E--,1);J.getPosition(t.endContainer)&CKEDITOR.POSITION_CONTAINS||(I.setStartAfter(J),I.collapsed||F.splice(E+1,0,I));return !0}return !1};H.next()}}}return G.ranges},getStartElement:function(){var v=this._.cache;if(void 0!==v.startElement){return v.startElement}var t;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var x=this.getRanges()[0];if(x){if(x.collapsed){t=x.startContainer,t.type!=CKEDITOR.NODE_ELEMENT&&(t=t.getParent())}else{for(x.optimize();;){if(t=x.startContainer,x.startOffset==(t.getChildCount?t.getChildCount():t.getLength())&&!t.isBlockBoundary()){x.setStartAfter(t)}else{break}}t=x.startContainer;if(t.type!=CKEDITOR.NODE_ELEMENT){return t.getParent()}t=t.getChild(x.startOffset);if(!t||t.type!=CKEDITOR.NODE_ELEMENT){t=x.startContainer}else{for(x=t.getFirst();x&&x.type==CKEDITOR.NODE_ELEMENT;){t=x,x=x.getFirst()}}}t=t.$}}return v.startElement=t?new CKEDITOR.dom.element(t):null},getSelectedElement:function(){var v=this._.cache;if(void 0!==v.selectedElement){return v.selectedElement}var t=this,x=CKEDITOR.tools.tryThese(function(){return t.getNative().createRange().item(0)},function(){for(var y=t.getRanges()[0].clone(),F,E,B=2;B&&(!(F=y.getEnclosedNode())||!(F.type==CKEDITOR.NODE_ELEMENT&&cS[F.getName()]&&(E=F)));B--){y.shrink(CKEDITOR.SHRINK_ELEMENT)}return E&&E.$});return v.selectedElement=x?new CKEDITOR.dom.element(x):null},getSelectedText:function(){var v=this._.cache;if(void 0!==v.selectedText){return v.selectedText}var t=this.getNative(),t=h0?"Control"==t.type?"":t.createRange().text:t.toString();return v.selectedText=t},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1},unlock:function(v){if(this.isLocked){if(v){var t=this.getSelectedElement(),y=!t&&this.getRanges(),x=this.isFake}this.isLocked=0;this.reset();v&&(v=t||y[0]&&y[0].getCommonAncestor())&&v.getAscendant("body",1)&&(x?this.fake(t):t?this.selectElement(t):this.selectRanges(y))}},reset:function(){this._.cache={};this.isFake=0;var v=this.root.editor;if(v&&v._.fakeSelection&&this.rev==v._.fakeSelection.rev){delete v._.fakeSelection;var t=v._.hiddenSelectionContainer;t&&(v.fire("lockSnapshot"),t.remove(),v.fire("unlockSnapshot"));delete v._.hiddenSelectionContainer}this.rev=dk++},selectElement:function(v){var t=new CKEDITOR.dom.range(this.root);t.setStartBefore(v);t.setEndAfter(v);this.selectRanges([t])},selectRanges:function(L){var K=this.root.editor,K=K&&K._.hiddenSelectionContainer;this.reset();if(K){for(var K=this.root,J,I=0;I<L.length;++I){J=L[I],J.endContainer.equals(K)&&(J.endOffset=Math.min(J.endOffset,K.getChildCount()))}}if(L.length){if(this.isLocked){var H=CKEDITOR.document.getActive();this.unlock();this.selectRanges(L);this.lock();!H.equals(this.root)&&H.focus()}else{var G;L:{var F,E;if(1==L.length&&!(E=L[0]).collapsed&&(G=E.getEnclosedNode())&&G.type==CKEDITOR.NODE_ELEMENT){E=E.clone();E.shrink(CKEDITOR.SHRINK_ELEMENT,!0);if((F=E.getEnclosedNode())&&F.type==CKEDITOR.NODE_ELEMENT){G=F}if("false"==G.getAttribute("contenteditable")){break L}}G=void 0}if(G){this.fake(G)}else{if(h0){E=CKEDITOR.dom.walker.whitespaces(!0);F=/\ufeff|\u00a0/;K={table:1,tbody:1,tr:1};1<L.length&&(G=L[L.length-1],L[0].setEnd(G.endContainer,G.endOffset));G=L[0];L=G.collapsed;var B,y,x;if((J=G.getEnclosedNode())&&J.type==CKEDITOR.NODE_ELEMENT&&J.getName() in cS&&(!J.is("a")||!J.getText())){try{x=J.$.createControlRange();x.addElement(J.$);x.select();return}catch(v){}}(G.startContainer.type==CKEDITOR.NODE_ELEMENT&&G.startContainer.getName() in K||G.endContainer.type==CKEDITOR.NODE_ELEMENT&&G.endContainer.getName() in K)&&G.shrink(CKEDITOR.NODE_ELEMENT,!0);x=G.createBookmark();K=x.startNode;L||(H=x.endNode);x=G.document.$.body.createTextRange();x.moveToElementText(K.$);x.moveStart("character",1);H?(F=G.document.$.body.createTextRange(),F.moveToElementText(H.$),x.setEndPoint("EndToEnd",F),x.moveEnd("character",-1)):(B=K.getNext(E),y=K.hasAscendant("pre"),B=!(B&&B.getText&&B.getText().match(F))&&(y||!K.hasPrevious()||K.getPrevious().is&&K.getPrevious().is("br")),y=G.document.createElement("span"),y.setHtml("&#65279;"),y.insertBefore(K),B&&G.document.createText("\ufeff").insertBefore(K));G.setStartBefore(K);K.remove();L?(B?(x.moveStart("character",-1),x.select(),G.document.$.selection.clear()):x.select(),G.moveToPosition(y,CKEDITOR.POSITION_BEFORE_START),y.remove()):(G.setEndBefore(H),H.remove(),x.select())}else{H=this.getNative();if(!H){return}CKEDITOR.env.opera&&(x=this.document.$.createRange(),x.selectNodeContents(this.root.$),H.addRange(x));this.removeAllRanges();for(x=0;x<L.length;x++){if(x<L.length-1&&(G=L[x],B=L[x+1],F=G.clone(),F.setStart(G.endContainer,G.endOffset),F.setEnd(B.startContainer,B.startOffset),!F.collapsed&&(F.shrink(CKEDITOR.NODE_ELEMENT,!0),y=F.getCommonAncestor(),F=F.getEnclosedNode(),y.isReadOnly()||F&&F.isReadOnly()))){B.setStart(G.startContainer,G.startOffset);L.splice(x--,1);continue}G=L[x];y=this.document.$.createRange();B=G.startContainer;if(CKEDITOR.env.opera&&(G.collapsed&&B.type==CKEDITOR.NODE_ELEMENT)&&(F=B.getChild(G.startOffset-1),E=B.getChild(G.startOffset),!F&&!E&&B.is(CKEDITOR.dtd.$removeEmpty)||F&&F.type==CKEDITOR.NODE_ELEMENT||E&&E.type==CKEDITOR.NODE_ELEMENT)){G.insertNode(this.document.createText("")),G.collapse(1)}G.collapsed&&(CKEDITOR.env.webkit&&gG(G))&&(B=this.root,g5(B,!1),F=B.getDocument().createText("\u200b"),B.setCustomData("cke-fillingChar",F),G.insertNode(F),(B=F.getNext())&&!F.getPrevious()&&B.type==CKEDITOR.NODE_ELEMENT&&"br"==B.getName()?(g5(this.root),G.moveToPosition(B,CKEDITOR.POSITION_BEFORE_START)):G.moveToPosition(F,CKEDITOR.POSITION_AFTER_END));y.setStart(G.startContainer.$,G.startOffset);try{y.setEnd(G.endContainer.$,G.endOffset)}catch(t){if(0<=t.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")){G.collapse(1),y.setEnd(G.endContainer.$,G.endOffset)}else{throw t}}H.addRange(y)}}this.reset();this.root.fire("selectionchange")}}}},fake:function(v){var t=this.root.editor;this.reset();var E=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',t.document);t.fire("lockSnapshot");t.editable().append(E);var B=t.getSelection(),y=t.createRange(),x=B.root.on("selectionchange",function(F){F.cancel()},null,null,0);y.setStartAt(E,CKEDITOR.POSITION_AFTER_START);y.setEndAt(E,CKEDITOR.POSITION_BEFORE_END);B.selectRanges([y]);x.removeListener();t.fire("unlockSnapshot");t._.hiddenSelectionContainer=E;E=this._.cache;B=new CKEDITOR.dom.range(this.root);B.setStartBefore(v);B.setEndAfter(v);E.ranges=new CKEDITOR.dom.rangeList(B);E.selectedElement=E.startElement=v;E.type=CKEDITOR.SELECTION_ELEMENT;E.selectedText=E.nativeSel=null;this.isFake=1;this.rev=dk++;t._.fakeSelection=this;this.root.fire("selectionchange")},isHidden:function(){var t=this.getCommonAncestor();t&&t.type==CKEDITOR.NODE_TEXT&&(t=t.getParent());return !(!t||!t.data("cke-hidden-sel"))},createBookmarks:function(t){t=this.getRanges().createBookmarks(t);this.isFake&&(t.isFake=1);return t},createBookmarks2:function(t){t=this.getRanges().createBookmarks2(t);this.isFake&&(t.isFake=1);return t},selectBookmarks:function(v){for(var t=[],y=0;y<v.length;y++){var x=new CKEDITOR.dom.range(this.root);x.moveToBookmark(v[y]);t.push(x)}v.isFake?this.fake(t[0].getEnclosedNode()):this.selectRanges(t);return this},getCommonAncestor:function(){var t=this.getRanges();return !t.length?null:t[0].startContainer.getCommonAncestor(t[t.length-1].endContainer)},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){var v=this.getNative();try{v&&v[h0?"empty":"removeAllRanges"]()}catch(t){}this.reset()}};"use strict";CKEDITOR.editor.prototype.attachStyleStateChange=function(v,t){var x=this._.styleStateChangeCallbacks;x||(x=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(B){for(var y=0;y<x.length;y++){var F=x[y],E=F.style.checkActive(B.data.path)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;F.fn.call(this,E)}}));x.push({style:v,fn:t})};CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;var q=function(v,t){for(var B,y;(v=v.getParent())&&!v.equals(t);){if(v.getAttribute("data-nostyle")){B=v}else{if(!y){var x=v.getAttribute("contentEditable");"false"==x?B=v:"true"==x&&(y=1)}}}return B},jD=function(ab){var aa=ab.document;if(ab.collapsed){aa=bH(this,aa),ab.insertNode(aa),ab.moveToPosition(aa,CKEDITOR.POSITION_BEFORE_END)}else{var Z=this.element,Y=this._.definition,X,W=Y.ignoreReadonly,V=W||Y.includeReadonly;void 0==V&&(V=ab.root.getCustomData("cke_includeReadonly"));var U=CKEDITOR.dtd[Z];U||(X=!0,U=CKEDITOR.dtd.span);ab.enlarge(CKEDITOR.ENLARGE_INLINE,1);ab.trim();var T=ab.createBookmark(),S=T.startNode,R=T.endNode,Q=S,O;if(!W){var P=ab.getCommonAncestor(),W=q(S,P),P=q(R,P);W&&(Q=W.getNextSourceNode(!0));P&&(R=P)}for(Q.getPosition(R)==CKEDITOR.POSITION_FOLLOWING&&(Q=0);Q;){W=!1;if(Q.equals(R)){Q=null,W=!0}else{var M=Q.type==CKEDITOR.NODE_ELEMENT?Q.getName():null,P=M&&"false"==Q.getAttribute("contentEditable"),L=M&&Q.getAttribute("data-nostyle");if(M&&Q.data("cke-bookmark")){Q=Q.getNextSourceNode(!0);continue}if(P&&V&&CKEDITOR.dtd.$block[M]){for(var J=Q,E=eS(J),G=void 0,N=E.length,y=0,J=N&&new CKEDITOR.dom.range(J.getDocument());y<N;++y){var G=E[y],K=CKEDITOR.filter.instances[G.data("cke-filter")];if(K?K.check(this):1){J.selectNodeContents(G),jD.call(this,J)}}}if(E=M?!U[M]||L?0:P&&!V?0:(Q.getPosition(R)|gD)==gD&&(!Y.childRule||Y.childRule(Q)):1){if((E=Q.getParent())&&((E.getDtd()||CKEDITOR.dtd.span)[Z]||X)&&(!Y.parentRule||Y.parentRule(E))){if(!O&&(!M||!CKEDITOR.dtd.$removeEmpty[M]||(Q.getPosition(R)|gD)==gD)){O=ab.clone(),O.setStartBefore(Q)}M=Q.type;if(M==CKEDITOR.NODE_TEXT||P||M==CKEDITOR.NODE_ELEMENT&&!Q.getChildCount()){for(var M=Q,I;(W=!M.getNext(ez))&&(I=M.getParent(),U[I.getName()])&&(I.getPosition(S)|jm)==jm&&(!Y.childRule||Y.childRule(I));){M=I}O.setEndAfter(M)}}else{W=!0}}else{W=!0}Q=Q.getNextSourceNode(L||P)}if(W&&O&&!O.collapsed){for(var W=bH(this,aa),P=W.hasAttributes(),L=O.getCommonAncestor(),M={},E={},G={},N={},H,F,B;W&&L;){if(L.getName()==Z){for(H in Y.attributes){if(!N[H]&&(B=L.getAttribute(F))){W.getAttribute(H)==B?E[H]=1:N[H]=1}}for(F in Y.styles){if(!G[F]&&(B=L.getStyle(F))){W.getStyle(F)==B?M[F]=1:G[F]=1}}}L=L.getParent()}for(H in E){W.removeAttribute(H)}for(F in M){W.removeStyle(F)}P&&!W.hasAttributes()&&(W=null);W?(O.extractContents().appendTo(W),O.insertNode(W),iJ.call(this,W),W.mergeSiblings(),CKEDITOR.env.ie||W.$.normalize()):(W=new CKEDITOR.dom.element("span"),O.extractContents().appendTo(W),O.insertNode(W),iJ.call(this,W),W.remove(!0));O=null}}ab.moveToBookmark(T);ab.shrink(CKEDITOR.SHRINK_TEXT);ab.shrink(CKEDITOR.NODE_ELEMENT,!0)}},d8=function(J){function I(){for(var L=new CKEDITOR.dom.elementPath(G.getParent()),K=new CKEDITOR.dom.elementPath(v.getParent()),P=null,O=null,N=0;N<L.elements.length;N++){var M=L.elements[N];if(M==L.block||M==L.blockLimit){break}t.checkElementRemovable(M)&&(P=M)}for(N=0;N<K.elements.length;N++){M=K.elements[N];if(M==K.block||M==K.blockLimit){break}t.checkElementRemovable(M)&&(O=M)}O&&v.breakParent(O);P&&G.breakParent(P)}J.enlarge(CKEDITOR.ENLARGE_INLINE,1);var H=J.createBookmark(),G=H.startNode;if(J.collapsed){for(var F=new CKEDITOR.dom.elementPath(G.getParent(),J.root),E,B=0,y;B<F.elements.length&&(y=F.elements[B])&&!(y==F.block||y==F.blockLimit);B++){if(this.checkElementRemovable(y)){var x;J.collapsed&&(J.checkBoundaryOfElement(y,CKEDITOR.END)||(x=J.checkBoundaryOfElement(y,CKEDITOR.START)))?(E=y,E.match=x?"start":"end"):(y.mergeSiblings(),y.is(this.element)?gk.call(this,y):fS(y,gN(this)[y.getName()]))}}if(E){y=G;for(B=0;;B++){x=F.elements[B];if(x.equals(E)){break}else{if(x.match){continue}else{x=x.clone()}}x.append(y);y=x}y["start"==E.match?"insertBefore":"insertAfter"](E)}}else{var v=H.endNode,t=this;I();for(F=G;!F.equals(v);){E=F.getNextSourceNode(),F.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(F)&&(F.getName()==this.element?gk.call(this,F):fS(F,gN(this)[F.getName()]),E.type==CKEDITOR.NODE_ELEMENT&&E.contains(G)&&(I(),E=G.getNext())),F=E}}J.moveToBookmark(H);J.shrink(CKEDITOR.NODE_ELEMENT,!0)},eS=function(v){var t=[];v.forEach(function(x){if("true"==x.getAttribute("contenteditable")){return t.push(x),!1}},CKEDITOR.NODE_ELEMENT,!0);return t},dQ=function(v){var t=v.getEnclosedNode()||v.getCommonAncestor(!1,!0);(v=(new CKEDITOR.dom.elementPath(t,v.root)).contains(this.element,1))&&!v.isReadOnly()&&bp(v,this)},dp=function(v){var t=v.getCommonAncestor(!0,!0);if(v=(new CKEDITOR.dom.elementPath(t,v.root)).contains(this.element,1)){var t=this._.definition,B=t.attributes;if(B){for(var y in B){v.removeAttribute(y,B[y])}}if(t.styles){for(var x in t.styles){t.styles.hasOwnProperty(x)&&v.removeStyle(x)}}}},cW=function(v){var t=v.createBookmark(!0),E=v.createIterator();E.enforceRealBlocks=!0;this._.enterMode&&(E.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var B,y=v.document,x;B=E.getNextParagraph();){if(!B.isReadOnly()&&(E.activeFilter?E.activeFilter.check(this):1)){x=bH(this,y,B),hR(B,x)}}v.moveToBookmark(t)},cE=function(v){var t=v.createBookmark(1),B=v.createIterator();B.enforceRealBlocks=!0;B.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var y,x;y=B.getNextParagraph();){this.checkElementRemovable(y)&&(y.is("pre")?((x=this._.enterMode==CKEDITOR.ENTER_BR?null:v.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&y.copyAttributes(x),hR(y,x)):gk.call(this,y))}v.moveToBookmark(t)},hR=function(K,J){var I=!J;I&&(J=K.getDocument().createElement("div"),K.copyAttributes(J));var H=J&&J.is("pre"),G=K.is("pre"),F=!H&&G;if(H&&!G){G=J;(F=K.getBogus())&&F.remove();F=K.getHtml();F=fB(F,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");F=F.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");F=F.replace(/([ \t\n\r]+|&nbsp;)/g," ");F=F.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var E=K.getDocument().createElement("div");E.append(G);G.$.outerHTML="<pre>"+F+"</pre>";G.copyAttributes(E.getFirst());G=E.getFirst().remove()}else{G.setHtml(F)}J=G}else{if(F){if(I){G=[K.getHtml()]}else{K.getName();var B=[];fB(K.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(M,L,N){return L+"</pre>"+N+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(M,L){B.push(L)});G=B}F=J;1<G.length&&(E=new CKEDITOR.dom.documentFragment(F.getDocument()));for(var y=0;y<G.length;y++){var x=G[y],x=x.replace(/(\r\n|\r)/g,"\n"),x=fB(x,/^[ \t]*\n/,""),x=fB(x,/\n$/,""),x=fB(x,/^[ \t]+|[ \t]+$/g,function(M,L){return 1==M.length?"&nbsp;":L?" "+CKEDITOR.tools.repeat("&nbsp;",M.length-1):CKEDITOR.tools.repeat("&nbsp;",M.length-1)+" "}),x=x.replace(/\n/g,"<br>"),x=x.replace(/[ \t]{2,}/g,function(L){return CKEDITOR.tools.repeat("&nbsp;",L.length-1)+" "});if(E){var v=F.clone();v.setHtml(x);E.append(v)}else{F.setHtml(x)}}J=E||F}else{K.moveChildren(J)}}J.replace(K);if(H){var I=J,t;if((t=I.getPrevious(aX))&&t.type==CKEDITOR.NODE_ELEMENT&&t.is("pre")){H=fB(t.getHtml(),/\n$/,"")+"\n\n"+fB(I.getHtml(),/^\n/,""),CKEDITOR.env.ie?I.$.outerHTML="<pre>"+H+"</pre>":I.setHtml(H),t.remove()}}else{I&&fz(J)}},fB=function(v,t,B){var y="",x="";v=v.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(F,E,G){E&&(y=E);G&&(x=G);return""});return y+v.replace(t,B)+x},gk=function(v,t){var G=this._.definition,F=G.attributes,G=G.styles,E=gN(this)[v.getName()],B=CKEDITOR.tools.isEmpty(F)&&CKEDITOR.tools.isEmpty(G),y;for(y in F){if(!(("class"==y||this._.definition.fullMatch)&&v.getAttribute(y)!=hu(y,F[y]))&&!(t&&"data-"==y.slice(0,5))){B=v.hasAttribute(y),v.removeAttribute(y)}}for(var x in G){this._.definition.fullMatch&&v.getStyle(x)!=hu(x,G[x],!0)||(B=B||!!v.getStyle(x),v.removeStyle(x))}fS(v,E,g1[v.getName()]);B&&(this._.definition.alwaysRemoveElement?fz(v,1):!CKEDITOR.dtd.$block[v.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!v.hasAttributes()?fz(v):v.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))},iJ=function(v){for(var t=gN(this),E=v.getElementsByTag(this.element),B,y=E.count();0<=--y;){B=E.getItem(y),B.isReadOnly()||gk.call(this,B,!0)}for(var x in t){if(x!=this.element){E=v.getElementsByTag(x);for(y=E.count()-1;0<=y;y--){B=E.getItem(y),B.isReadOnly()||fS(B,t[x])}}}},fS=function(v,t,F){if(t=t&&t.attributes){for(var E=0;E<t.length;E++){var B=t[E][0],y;if(y=v.getAttribute(B)){var x=t[E][1];(null===x||x.test&&x.test(y)||"string"==typeof x&&y==x)&&v.removeAttribute(B)}}}F||fz(v)},fz=function(v,t){if(!v.hasAttributes()||t){if(CKEDITOR.dtd.$block[v.getName()]){var y=v.getPrevious(aX),x=v.getNext(aX);y&&(y.type==CKEDITOR.NODE_TEXT||!y.isBlockBoundary({br:1}))&&v.append("br",1);x&&(x.type==CKEDITOR.NODE_TEXT||!x.isBlockBoundary({br:1}))&&v.append("br");v.remove(!0)}else{y=v.getFirst(),x=v.getLast(),v.remove(!0),y&&(y.type==CKEDITOR.NODE_ELEMENT&&y.mergeSiblings(),x&&!y.equals(x)&&x.type==CKEDITOR.NODE_ELEMENT&&x.mergeSiblings())}}},bH=function(v,t,y){var x;x=v.element;"*"==x&&(x="span");x=new CKEDITOR.dom.element(x,t);y&&y.copyAttributes(x);x=bp(x,v);t.getCustomData("doc_processing_style")&&x.hasAttribute("id")?x.removeAttribute("id"):t.setCustomData("doc_processing_style",1);return x},bp=function(v,t){var B=t._.definition,y=B.attributes,B=CKEDITOR.style.getStyleText(B);if(y){for(var x in y){v.setAttribute(x,y[x])}}B&&v.setAttribute("style",B);return v},gJ=function(v,t){for(var x in v){v[x]=v[x].replace(cm,function(y,B){return t[B]})}},gN=function(v){if(v._.overrides){return v._.overrides}var t=v._.overrides={},G=v._.definition.overrides;if(G){CKEDITOR.tools.isArray(G)||(G=[G]);for(var F=0;F<G.length;F++){var E=G[F],B,y;"string"==typeof E?B=E.toLowerCase():(B=E.element?E.element.toLowerCase():v.element,y=E.attributes);E=t[B]||(t[B]={});if(y){var E=E.attributes=E.attributes||[],x;for(x in y){E.push([x.toLowerCase(),y[x]])}}}}return t},hu=function(v,t,y){var x=new CKEDITOR.dom.element("span");x[y?"setStyle":"setAttribute"](v,t);return x[y?"getStyle":"getAttribute"](v)},e7=function(v,t){for(var F=v.document,E=v.getRanges(),B=t?this.removeFromRange:this.applyToRange,y,x=E.createIterator();y=x.getNextRange();){B.call(this,y)}v.selectRanges(E);F.removeCustomData("doc_processing_style")},g1={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},bL={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},gq=/\s*(?:;\s*|$)/,cm=/#\((.+?)\)/g,ez=CKEDITOR.dom.walker.bookmark(0,1),aX=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(v,t){var x=v.attributes;x&&x.style&&(v.styles=CKEDITOR.tools.extend({},v.styles,CKEDITOR.tools.parseCssText(x.style)),delete x.style);t&&(v=CKEDITOR.tools.clone(v),gJ(v.attributes,t),gJ(v.styles,t));x=this.element=v.element?"string"==typeof v.element?v.element.toLowerCase():v.element:"*";this.type=v.type||(g1[x]?CKEDITOR.STYLE_BLOCK:bL[x]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE);"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT);this._={definition:v}};CKEDITOR.editor.prototype.applyStyle=function(t){t.checkApplicable(this.elementPath())&&e7.call(t,this.getSelection())};CKEDITOR.editor.prototype.removeStyle=function(t){t.checkApplicable(this.elementPath())&&e7.call(t,this.getSelection(),1)};CKEDITOR.style.prototype={apply:function(t){e7.call(this,t.getSelection())},remove:function(t){e7.call(this,t.getSelection(),1)},applyToRange:function(t){return(this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?jD:this.type==CKEDITOR.STYLE_BLOCK?cW:this.type==CKEDITOR.STYLE_OBJECT?dQ:null).call(this,t)},removeFromRange:function(t){return(this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?d8:this.type==CKEDITOR.STYLE_BLOCK?cE:this.type==CKEDITOR.STYLE_OBJECT?dp:null).call(this,t)},applyToObject:function(t){bp(t,this)},checkActive:function(v){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(v.block||v.blockLimit,!0);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var t=v.elements,B=0,y;B<t.length;B++){if(y=t[B],!(this.type==CKEDITOR.STYLE_INLINE&&(y==v.block||y==v.blockLimit))){if(this.type==CKEDITOR.STYLE_OBJECT){var x=y.getName();if(!("string"==typeof this.element?x==this.element:x in this.element)){continue}}if(this.checkElementRemovable(y,!0)){return !0}}}}return !1},checkApplicable:function(v,t){if(t&&!t.check(this)){return !1}switch(this.type){case CKEDITOR.STYLE_OBJECT:return !!v.contains(this.element);case CKEDITOR.STYLE_BLOCK:return !!v.blockLimit.getDtd()[this.element]}return !0},checkElementMatch:function(v,t){var G=this._.definition;if(!v||!G.ignoreReadonly&&v.isReadOnly()){return !1}var F=v.getName();if("string"==typeof this.element?F==this.element:F in this.element){if(!t&&!v.hasAttributes()){return !0}if(F=G._AC){G=F}else{var F={},E=0,B=G.attributes;if(B){for(var y in B){E++,F[y]=B[y]}}if(y=CKEDITOR.style.getStyleText(G)){F.style||E++,F.style=y}F._length=E;G=G._AC=F}if(G._length){for(var x in G){if("_length"!=x){E=v.getAttribute(x)||"";if("style"==x){v:{F=G[x];"string"==typeof F&&(F=CKEDITOR.tools.parseCssText(F));"string"==typeof E&&(E=CKEDITOR.tools.parseCssText(E,!0));y=void 0;for(y in F){if(!(y in E&&(E[y]==F[y]||"inherit"==F[y]||"inherit"==E[y]))){F=!1;break v}}F=!0}}else{F=G[x]==E}if(F){if(!t){return !0}}else{if(t){return !1}}}}if(t){return !0}}else{return !0}}return !1},checkElementRemovable:function(v,t){if(this.checkElementMatch(v,t)){return !0}var E=gN(this)[v.getName()];if(E){var B;if(!(E=E.attributes)){return !0}for(var y=0;y<E.length;y++){if(B=E[y][0],B=v.getAttribute(B)){var x=E[y][1];if(null===x||"string"==typeof x&&B==x||x.test(B)){return !0}}}}return !1},buildPreview:function(v){var t=this._.definition,E=[],B=t.element;"bdo"==B&&(B="span");var E=["<",B],y=t.attributes;if(y){for(var x in y){E.push(" ",x,'="',y[x],'"')}}(y=CKEDITOR.style.getStyleText(t))&&E.push(' style="',y,'"');E.push(">",v||t.name,"</",B,">");return E.join("")},getDefinition:function(){return this._.definition}};CKEDITOR.style.getStyleText=function(v){var t=v._ST;if(t){return t}var t=v.styles,F=v.attributes&&v.attributes.style||"",E="";F.length&&(F=F.replace(gq,";"));for(var B in t){var y=t[B],x=(B+":"+y).replace(gq,";");"inherit"==y?E+=x:F+=x}F.length&&(F=CKEDITOR.tools.normalizeCssText(F,!0));return v._ST=F+E};var gD=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,jm=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED;CKEDITOR.styleCommand=function(v,t){this.requiredContent=this.allowedContent=this.style=v;CKEDITOR.tools.extend(this,t,!0)};CKEDITOR.styleCommand.prototype.exec=function(t){t.focus();this.state==CKEDITOR.TRISTATE_OFF?t.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&t.removeStyle(this.style)};CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(v,t,x){CKEDITOR.stylesSet.addExternal(v,t,"");CKEDITOR.stylesSet.load(v,x)};CKEDITOR.editor.prototype.getStylesSet=function(v){if(this._.stylesDefinitions){v(this._.stylesDefinitions)}else{var t=this,y=t.config.stylesCombo_stylesSet||t.config.stylesSet;if(!1===y){v(null)}else{if(y instanceof Array){t._.stylesDefinitions=y,v(y)}else{y||(y="default");var y=y.split(":"),x=y[0];CKEDITOR.stylesSet.addExternal(x,y[1]?y.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(x,function(B){t._.stylesDefinitions=B[x];v(t._.stylesDefinitions)})}}}};CKEDITOR.dom.comment=function(v,t){"string"==typeof v&&(v=(t?t.$:document).createComment(v));CKEDITOR.dom.domObject.call(this,v)};CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"\x3c!--"+this.$.nodeValue+"--\x3e"}});"use strict";var fY={},fF={},e9;for(e9 in CKEDITOR.dtd.$blockLimit){e9 in CKEDITOR.dtd.$list||(fY[e9]=1)}for(e9 in CKEDITOR.dtd.$block){e9 in CKEDITOR.dtd.$blockLimit||e9 in CKEDITOR.dtd.$empty||(fF[e9]=1)}CKEDITOR.dom.elementPath=function(I,H){var G=null,F=null,E=[],B=I,y;H=H||I.getDocument().getBody();do{if(B.type==CKEDITOR.NODE_ELEMENT){E.push(B);if(!this.lastElement&&(this.lastElement=B,B.is(CKEDITOR.dtd.$object)||"false"==B.getAttribute("contenteditable"))){continue}if(B.equals(H)){break}if(!F&&(y=B.getName(),"true"==B.getAttribute("contenteditable")?F=B:!G&&fF[y]&&(G=B),fY[y])){var x;if(x=!G){if(y="div"==y){I:{y=B.getChildren();x=0;for(var v=y.count();x<v;x++){var t=y.getItem(x);if(t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[t.getName()]){y=!0;break I}}y=!1}y=!y}x=y}x?G=B:F=B}}}while(B=B.getParent());F||(F=H);this.block=G;this.blockLimit=F;this.root=H;this.elements=E};CKEDITOR.dom.elementPath.prototype={compare:function(v){var t=this.elements;v=v&&v.elements;if(!v||t.length!=v.length){return !1}for(var x=0;x<t.length;x++){if(!t[x].equals(v[x])){return !1}}return !0},contains:function(v,t,E){var B;"string"==typeof v&&(B=function(F){return F.getName()==v});v instanceof CKEDITOR.dom.element?B=function(F){return F.equals(v)}:CKEDITOR.tools.isArray(v)?B=function(F){return -1<CKEDITOR.tools.indexOf(v,F.getName())}:"function"==typeof v?B=v:"object"==typeof v&&(B=function(F){return F.getName() in v});var y=this.elements,x=y.length;t&&x--;E&&(y=Array.prototype.slice.call(y,0),y.reverse());for(t=0;t<x;t++){if(B(y[t])){return y[t]}}return null},isContextFor:function(v){var t;return v in CKEDITOR.dtd.$block?(t=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!t.getDtd()[v]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}};CKEDITOR.dom.text=function(v,t){"string"==typeof v&&(v=(t?t.$:document).createTextNode(v));this.$=v};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(t){this.$.nodeValue=t},split:function(v){var t=this.$.parentNode,E=t.childNodes.length,B=this.getLength(),y=this.getDocument(),x=new CKEDITOR.dom.text(this.$.splitText(v),y);t.childNodes.length==E&&(v>=B?(x=y.createText(""),x.insertAfter(this)):(v=y.createText(""),v.insertAfter(x),v.remove()));return x},substring:function(v,t){return"number"!=typeof t?this.$.nodeValue.substr(v):this.$.nodeValue.substring(v,t)}});var fn=function(v,t,F){var E=v.serializable,B=t[F?"endContainer":"startContainer"],y=F?"endOffset":"startOffset",x=E?t.document.getById(v.startNode):v.startNode;v=E?t.document.getById(v.endNode):v.endNode;B.equals(x.getPrevious())?(t.startOffset=t.startOffset-B.getLength()-v.getPrevious().getLength(),B=v.getNext()):B.equals(v.getPrevious())&&(t.startOffset-=B.getLength(),B=v.getNext());B.equals(x.getParent())&&t[y]++;B.equals(v.getParent())&&t[y]++;t[F?"endContainer":"startContainer"]=B;return t};CKEDITOR.dom.rangeList=function(t){if(t instanceof CKEDITOR.dom.rangeList){return t}t?t instanceof CKEDITOR.dom.range&&(t=[t]):t=[];return CKEDITOR.tools.extend(t,dy)};var dy={createIterator:function(){var v=this,t=CKEDITOR.dom.walker.bookmark(),y=[],x;return{getNextRange:function(H){x=void 0==x?0:x+1;var G=v[x];if(G&&1<v.length){if(!x){for(var F=v.length-1;0<=F;F--){y.unshift(v[F].createBookmark(!0))}}if(H){for(var E=0;v[x+E+1];){var B=G.document;H=0;F=B.getById(y[E].endNode);for(B=B.getById(y[E+1].startNode);;){F=F.getNextSourceNode(!1);if(B.equals(F)){H=1}else{if(t(F)||F.type==CKEDITOR.NODE_ELEMENT&&F.isBlockBoundary()){continue}}break}if(!H){break}E++}}for(G.moveToBookmark(y.shift());E--;){F=v[++x],F.moveToBookmark(y.shift()),G.setEnd(F.endContainer,F.endOffset)}}return G}}},createBookmarks:function(v){for(var t=[],B,y=0;y<this.length;y++){t.push(B=this[y].createBookmark(v,!0));for(var x=y+1;x<this.length;x++){this[x]=fn(B,this[x]),this[x]=fn(B,this[x],!0)}}return t},createBookmarks2:function(v){for(var t=[],x=0;x<this.length;x++){t.push(this[x].createBookmark2(v))}return t},moveToBookmarks:function(v){for(var t=0;t<this.length;t++){this[t].moveToBookmark(v[t])}}},aF=function(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")},eV=function(v){var t=CKEDITOR.skin["ua_"+v],B=CKEDITOR.env;if(t){for(var t=t.split(",").sort(function(F,E){return F>E?-1:1}),y=0,x;y<t.length;y++){x=t[y];if(B.ie&&(x.replace(/^ie/,"")==B.version||B.quirks&&"iequirks"==x)){x="ie"}if(B[x]){v+="_"+t[y];break}}}return CKEDITOR.getUrl(aF()+v+".css")},ek=function(v,t){eC[v]||(CKEDITOR.document.appendStyleSheet(eV(v)),eC[v]=1);t&&t()},ds=function(v){var t=v.getById(dT);t||(t=v.getHead().append("style"),t.setAttribute("id",dT),t.setAttribute("type","text/css"));return t},am=function(v,t,F){var E,B,y;if(CKEDITOR.env.webkit){t=t.split("}").slice(0,-1);for(B=0;B<t.length;B++){t[B]=t[B].split("{")}}for(var x=0;x<v.length;x++){if(CKEDITOR.env.webkit){for(B=0;B<t.length;B++){y=t[B][1];for(E=0;E<F.length;E++){y=y.replace(F[E][0],F[E][1])}v[x].$.sheet.addRule(t[B][0],y)}}else{y=t;for(E=0;E<F.length;E++){y=y.replace(F[E][0],F[E][1])}CKEDITOR.env.ie&&11>CKEDITOR.env.version?v[x].$.styleSheet.cssText+=y:v[x].$.innerHTML+=y}}},eC={};CKEDITOR.skin={path:aF,loadPart:function(v,t){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(aF()+"skin.js"),function(){ek(v,t)}):ek(v,t)},getPath:function(t){return CKEDITOR.getUrl(eV(t))},icons:{},addIcon:function(v,t,y,x){v=v.toLowerCase();this.icons[v]||(this.icons[v]={path:t,offset:y||0,bgsize:x||"16px"})},getIconStyle:function(v,t,E,B,y){var x;v&&(v=v.toLowerCase(),t&&(x=this.icons[v+"-rtl"]),x||(x=this.icons[v]));v=E||x&&x.path||"";B=B||x&&x.offset;y=y||x&&x.bgsize||"16px";return v&&"background-image:url("+CKEDITOR.getUrl(v)+");background-position:0 "+B+"px;background-size:"+y+";"}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(v){var t=ds(CKEDITOR.document);return(this.setUiColor=function(x){var B=CKEDITOR.skin.chameleon,y=[[cZ,x]];this.uiColor=x;am([t],B(this,"editor"),y);am(cH,B(this,"panel"),y)}).call(this,v)}});var dT="cke_ui_color",cH=[],cZ=/\$color/g;CKEDITOR.on("instanceLoaded",function(v){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var t=v.editor;v=function(x){x=(x.data[0]||x.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!x.getById("cke_ui_color")){x=ds(x);cH.push(x);var y=t.getUiColor();y&&am([x],CKEDITOR.skin.chameleon(t,"panel"),[[cZ,y]])}};t.on("panelShow",v);t.on("menuShow",v);t.config.uiColor&&t.setUiColor(t.config.uiColor)}});if(CKEDITOR.env.webkit){CKEDITOR.env.hc=!1}else{var hZ=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);hZ.appendTo(CKEDITOR.document.getHead());try{var hN=hZ.getComputedStyle("border-top-color"),iY=hZ.getComputedStyle("border-right-color");CKEDITOR.env.hc=!!(hN&&hN==iY)}catch(ep){CKEDITOR.env.hc=!1}hZ.remove()}CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc");CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(hZ=CKEDITOR._.pending){delete CKEDITOR._.pending;for(hN=0;hN<hZ.length;hN++){CKEDITOR.editor.prototype.constructor.apply(hZ[hN][0],hZ[hN][1]),CKEDITOR.add(hZ[hN][0])}}CKEDITOR.skin.name="moono";CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko";CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8,opera";var io=CKEDITOR.skin,iv=function(v,t){for(var F=v.match(/[^#]./g),E=0;3>E;E++){var B=F,y=E,x;x=parseInt(F[E],16);x=("0"+(0>t?0|x*(1+t):0|x+(255-x)*t).toString(16)).slice(-2);B[y]=x}return"#"+F.join("")},ao,hE=new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");ao=function(v,t){return hE.output({from:v,to:t})};var g7={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};io.chameleon=function(v,t){var x=v.uiColor,x={id:"."+v.id,defaultBorder:iv(x,-0.1),defaultGradient:ao(iv(x,0.9),x),lightGradient:ao(iv(x,1),iv(x,0.7)),mediumGradient:ao(iv(x,0.8),iv(x,0.5)),ckeButtonOn:ao(iv(x,0.6),iv(x,0.7)),ckeResizer:iv(x,-0.4),ckeToolbarSeparator:iv(x,0.5),ckeColorauto:iv(x,0.8),dialogBody:iv(x,0.7),dialogTabSelected:ao("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:iv(x,-0.6),elementsPathBg:x,menubuttonIcon:iv(x,0.5),menubuttonIconHover:iv(x,0.3)};return g7[t].output(x).replace(/\[/g,"{").replace(/\]/g,"}")};CKEDITOR.plugins.add("dialogui",{onLoad:function(){var v=function(H){this._||(this._={});this._["default"]=this._.initValue=H["default"]||"";this._.required=H.required||!1;for(var G=[this._],I=1;I<arguments.length;I++){G.push(arguments[I])}G.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,G);return this._},t={build:function(H,G,I){return new CKEDITOR.ui.dialog.textInput(H,G,I)}},F={build:function(H,G,I){return new CKEDITOR.ui.dialog[G.type](H,G,I)}},E={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(G){this.setValue(this.getInitValue(),G)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},B=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(H,G){this._.domOnChangeRegistered||(H.on("load",function(){this.getInputElement().on("change",function(){H.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",G)}},!0),y=/^on([A-Z]\w+)/,x=function(H){for(var G in H){(y.test(G)||"title"==G||"type"==G)&&delete H[G]}return H};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(G,K,J,I){if(!(4>arguments.length)){var H=v.call(this,K);H.labelId=CKEDITOR.tools.getNextId()+"_label";this._.children=[];CKEDITOR.ui.dialog.uiElement.call(this,G,K,J,"div",null,{role:"presentation"},function(){var L=[],M=K.required?" cke_required":"";"horizontal"!=K.labelLayout?L.push('<label class="cke_dialog_ui_labeled_label'+M+'" ',' id="'+H.labelId+'"',H.inputId?' for="'+H.inputId+'"':"",(K.labelStyle?' style="'+K.labelStyle+'"':"")+">",K.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',K.controlStyle?' style="'+K.controlStyle+'"':"",' role="radiogroup" aria-labelledby="'+H.labelId+'">',I.call(this,G,K),"</div>"):(M={type:"hbox",widths:K.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+M+'" id="'+H.labelId+'" for="'+H.inputId+'"'+(K.labelStyle?' style="'+K.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(K.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(K.controlStyle?' style="'+K.controlStyle+'"':"")+">"+I.call(this,G,K)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(G,M,L));return L.join("")})}},textInput:function(G,M,K){if(!(3>arguments.length)){v.call(this,M);var J=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",I={"class":"cke_dialog_ui_input_"+M.type,id:J,type:M.type};M.validate&&(this.validate=M.validate);M.maxLength&&(I.maxlength=M.maxLength);M.size&&(I.size=M.size);M.inputStyle&&(I.style=M.inputStyle);var H=this,L=!1;G.on("load",function(){H.getInputElement().on("keydown",function(N){13==N.data.getKeystroke()&&(L=!0)});H.getInputElement().on("keyup",function(N){13==N.data.getKeystroke()&&L&&(G.getButton("ok")&&setTimeout(function(){G.getButton("ok").click()},0),L=!1)},null,null,1000)});CKEDITOR.ui.dialog.labeledElement.call(this,G,M,K,function(){var O=['<div class="cke_dialog_ui_input_',M.type,'" role="presentation"'];M.width&&O.push('style="width:'+M.width+'" ');O.push("><input ");I["aria-labelledby"]=this._.labelId;this._.required&&(I["aria-required"]=this._.required);for(var N in I){O.push(N+'="'+I[N]+'" ')}O.push(" /></div>");return O.join("")})}},textarea:function(G,L,K){if(!(3>arguments.length)){v.call(this,L);var J=this,I=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",H={};L.validate&&(this.validate=L.validate);H.rows=L.rows||5;H.cols=L.cols||20;H["class"]="cke_dialog_ui_input_textarea "+(L["class"]||"");"undefined"!=typeof L.inputStyle&&(H.style=L.inputStyle);L.dir&&(H.dir=L.dir);CKEDITOR.ui.dialog.labeledElement.call(this,G,L,K,function(){H["aria-labelledby"]=this._.labelId;this._.required&&(H["aria-required"]=this._.required);var N=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',I,'" '],M;for(M in H){N.push(M+'="'+CKEDITOR.tools.htmlEncode(H[M])+'" ')}N.push(">",CKEDITOR.tools.htmlEncode(J._["default"]),"</textarea></div>");return N.join("")})}},checkbox:function(G,J,I){if(!(3>arguments.length)){var H=v.call(this,J,{"default":!!J["default"]});J.validate&&(this.validate=J.validate);CKEDITOR.ui.dialog.uiElement.call(this,G,J,I,"span",null,null,function(){var K=CKEDITOR.tools.extend({},J,{id:J.id?J.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),N=[],M=CKEDITOR.tools.getNextId()+"_label",L={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":M};x(K);J["default"]&&(L.checked="checked");"undefined"!=typeof K.inputStyle&&(K.style=K.inputStyle);H.checkbox=new CKEDITOR.ui.dialog.uiElement(G,K,N,"input",null,L);N.push(' <label id="',M,'" for="',L.id,'"'+(J.labelStyle?' style="'+J.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(J.label),"</label>");return N.join("")})}},radio:function(G,K,J){if(!(3>arguments.length)){v.call(this,K);this._["default"]||(this._["default"]=this._.initValue=K.items[0][1]);K.validate&&(this.validate=K.valdiate);var I=[],H=this;CKEDITOR.ui.dialog.labeledElement.call(this,G,K,J,function(){for(var S=[],Q=[],P=(K.id?K.id:CKEDITOR.tools.getNextId())+"_radio",M=0;M<K.items.length;M++){var V=K.items[M],T=void 0!==V[2]?V[2]:V[0],U=void 0!==V[1]?V[1]:V[0],O=CKEDITOR.tools.getNextId()+"_radio_input",R=O+"_label",O=CKEDITOR.tools.extend({},K,{id:O,title:null,type:null},!0),T=CKEDITOR.tools.extend({},O,{title:T},!0),N={type:"radio","class":"cke_dialog_ui_radio_input",name:P,value:U,"aria-labelledby":R},L=[];H._["default"]==U&&(N.checked="checked");x(O);x(T);"undefined"!=typeof O.inputStyle&&(O.style=O.inputStyle);O.keyboardFocusable=!0;I.push(new CKEDITOR.ui.dialog.uiElement(G,O,L,"input",null,N));L.push(" ");new CKEDITOR.ui.dialog.uiElement(G,T,L,"label",null,{id:R,"for":N.id},V[0]);S.push(L.join(""))}new CKEDITOR.ui.dialog.hbox(G,I,S,Q);return Q.join("")});this._.children=I}},button:function(G,L,K){if(arguments.length){"function"==typeof L&&(L=L(G.getParentEditor()));v.call(this,L,{disabled:L.disabled||!1});CKEDITOR.event.implementOn(this);var J=this;G.on("load",function(){var M=this.getElement();M.on("click",function(N){J.click();N.data.preventDefault()});M.on("keydown",function(N){N.data.getKeystroke() in {32:1}&&(J.click(),N.data.preventDefault())});M.unselectable()},this);var I=CKEDITOR.tools.extend({},L);delete I.style;var H=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,G,I,K,"a",null,{style:L.style,href:"javascript:void(0)",title:L.label,hidefocus:"true","class":L["class"],role:"button","aria-labelledby":H},'<span id="'+H+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(L.label)+"</span>")}},select:function(G,J,I){if(!(3>arguments.length)){var H=v.call(this,J);J.validate&&(this.validate=J.validate);H.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,G,J,I,function(){var K=CKEDITOR.tools.extend({},J,{id:J.id?J.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),P=[],O=[],L={id:H.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};P.push('<div class="cke_dialog_ui_input_',J.type,'" role="presentation"');J.width&&P.push('style="width:'+J.width+'" ');P.push(">");void 0!=J.size&&(L.size=J.size);void 0!=J.multiple&&(L.multiple=J.multiple);x(K);for(var N=0,M;N<J.items.length&&(M=J.items[N]);N++){O.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==M[1]?M[1]:M[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(M[0]))}"undefined"!=typeof K.inputStyle&&(K.style=K.inputStyle);H.select=new CKEDITOR.ui.dialog.uiElement(G,K,P,"select",null,L,O.join(""));P.push("</div>");return P.join("")})}},file:function(G,J,I){if(!(3>arguments.length)){void 0===J["default"]&&(J["default"]="");var H=CKEDITOR.tools.extend(v.call(this,J),{definition:J,buttons:[]});J.validate&&(this.validate=J.validate);G.on("load",function(){CKEDITOR.document.getById(H.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,G,J,I,function(){H.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var K=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',H.frameId,'" title="',J.label,'" src="javascript:void('];K.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");K.push(')"></iframe>');return K.join("")})}},fileButton:function(G,L,K){if(!(3>arguments.length)){v.call(this,L);var J=this;L.validate&&(this.validate=L.validate);var I=CKEDITOR.tools.extend({},L),H=I.onClick;I.className=(I.className?I.className+" ":"")+"cke_dialog_ui_button";I.onClick=function(M){var N=L["for"];if(!H||!1!==H.call(this,M)){G.getContentElement(N[0],N[1]).submit(),this.disable()}};G.on("load",function(){G.getContentElement(L["for"][0],L["for"][1])._.buttons.push(J)});CKEDITOR.ui.dialog.button.call(this,G,I,K)}},html:function(){var H=/^\s*<[\w:]+\s+([^>]*)?>/,G=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,I=/\/$/;return function(P,O,N){if(!(3>arguments.length)){var L=[],M=O.html;"<"!=M.charAt(0)&&(M="<span>"+M+"</span>");var K=O.focus;if(K){var J=this.focus;this.focus=function(){("function"==typeof K?K:J).call(this);this.fire("focus")};O.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,P,O,L,"span",null,null,"");L=L.join("").match(H);M=M.match(G)||["","",""];I.test(M[1])&&(M[1]=M[1].slice(0,-1),M[2]="/"+M[2]);N.push([M[1]," ",L[1]||"",M[2]].join(""))}}}(),fieldset:function(H,G,L,K,J){var I=J.label;this._={children:G};CKEDITOR.ui.dialog.uiElement.call(this,H,J,K,"fieldset",null,null,function(){var N=[];I&&N.push("<legend"+(J.labelStyle?' style="'+J.labelStyle+'"':"")+">"+I+"</legend>");for(var M=0;M<L.length;M++){N.push(L[M])}return N.join("")})}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(H){var G=CKEDITOR.document.getById(this._.labelId);1>G.getChildCount()?(new CKEDITOR.dom.text(H,CKEDITOR.document)).appendTo(G):G.getChild(0).$.nodeValue=H;return this},getLabel:function(){var G=CKEDITOR.document.getById(this._.labelId);return !G||1>G.getChildCount()?"":G.getChild(0).getText()},eventProcessors:B},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return !this._.disabled?this.fire("click",{dialog:this._.dialog}):!1},enable:function(){this._.disabled=!1;var G=this.getElement();G&&G.removeClass("cke_disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return !this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(H,G){this.on("click",function(){G.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var G=this.selectParentTab();setTimeout(function(){var H=G.getInputElement();H&&H.$.focus()},0)},select:function(){var G=this.selectParentTab();setTimeout(function(){var H=G.getInputElement();H&&(H.$.focus(),H.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(G){!G&&(G="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},E,!0);CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(H,G,K){var J=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),I=this.getInputElement().$;J.$.text=H;J.$.value=void 0===G||null===G?H:G;void 0===K||null===K?CKEDITOR.env.ie?I.add(J.$):I.add(J.$,null):I.add(J.$,K);return this},remove:function(G){this.getInputElement().$.remove(G);return this},clear:function(){for(var G=this.getInputElement().$;0<G.length;){G.remove(0)}return this},keyboardFocusable:!0},E,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(H,G){this.getInputElement().$.checked=H;!G&&this.fire("change",{value:H})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(H,G){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version){return B.onChange.apply(this,arguments)}H.on("load",function(){var I=this._.checkbox.getElement();I.on("propertychange",function(J){J=J.data.$;"checked"==J.propertyName&&this.fire("change",{value:I.$.checked})},this)},this);this.on("change",G);return null}},keyboardFocusable:!0},E,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(H,G){for(var K=this._.children,J,I=0;I<K.length&&(J=K[I]);I++){J.getElement().$.checked=J.getValue()==H}!G&&this.fire("change",{value:H})},getValue:function(){for(var H=this._.children,G=0;G<H.length;G++){if(H[G].getElement().$.checked){return H[G].getValue()}}return null},accessKeyUp:function(){var H=this._.children,G;for(G=0;G<H.length;G++){if(H[G].getElement().$.checked){H[G].getElement().focus();return}}H[0].getElement().focus()},eventProcessors:{onChange:function(H,G){if(CKEDITOR.env.ie){H.on("load",function(){for(var J=this._.children,I=this,K=0;K<J.length;K++){J[K].getElement().on("propertychange",function(L){L=L.data.$;"checked"==L.propertyName&&this.$.checked&&I.fire("change",{value:this.getAttribute("value")})})}},this),this.on("change",G)}else{return B.onChange.apply(this,arguments)}return null}}},E,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,E,{getInputElement:function(){var G=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<G.$.forms.length?new CKEDITOR.dom.element(G.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(H){var G=/^on([A-Z]\w+)/,K,J=function(M,L,O,N){M.on("formLoaded",function(){M.getInputElement().on(O,N,M)})},I;for(I in H){if(K=I.match(G)){this.eventProcessors[I]?this.eventProcessors[I].call(this,this._.dialog,H[I]):J(this,this._.dialog,K[1].toLowerCase(),H[I])}}return this},reset:function(){function O(){M.$.open();var Q="";L.size&&(Q=L.size-(CKEDITOR.env.ie?7:0));var P=N.frameId+"_input";M.$.write(['<html dir="'+H+'" lang="'+G+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+H+'" lang="'+G+'" action="',CKEDITOR.tools.htmlEncode(L.action),'"><label id="',N.labelId,'" for="',P,'" style="display:none">',CKEDITOR.tools.htmlEncode(L.label),'</label><input id="',P,'" aria-labelledby="',N.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(L.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<Q?Q:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+J+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+I+")}","\x3c/script>"].join(""));M.$.close();for(Q=0;Q<K.length;Q++){K[Q].enable()}}var N=this._,M=CKEDITOR.document.getById(N.frameId).getFrameDocument(),L=N.definition,K=N.buttons,J=this.formLoadedNumber,I=this.formUnloadNumber,H=N.dialog._.editor.lang.dir,G=N.dialog._.editor.langCode;J||(J=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),I=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(J);CKEDITOR.tools.removeFunction(I)}));CKEDITOR.env.gecko?setTimeout(O,500):O()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(H,G){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",G)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",t);CKEDITOR.dialog.addUIElement("password",t);CKEDITOR.dialog.addUIElement("textarea",F);CKEDITOR.dialog.addUIElement("checkbox",F);CKEDITOR.dialog.addUIElement("radio",F);CKEDITOR.dialog.addUIElement("button",F);CKEDITOR.dialog.addUIElement("select",F);CKEDITOR.dialog.addUIElement("file",F);CKEDITOR.dialog.addUIElement("fileButton",F);CKEDITOR.dialog.addUIElement("html",F);CKEDITOR.dialog.addUIElement("fieldset",{build:function(O,N,M){for(var L=N.children,K,J=[],I=[],H=0;H<L.length&&(K=L[H]);H++){var G=[];J.push(G);I.push(CKEDITOR.dialog._.uiElementBuilders[K.type].build(O,K,G))}return new CKEDITOR.ui.dialog[N.type](O,I,J,M,N)}})}});CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;var j=function(){for(var v=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+v,x=t-1;x>t-v;x--){if(this._.tabs[this._.tabIdList[x%v]][0].$.offsetHeight){return this._.tabIdList[x%v]}}return null},cp=function(){for(var v=this._.tabIdList.length,t=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),x=t+1;x<t+v;x++){if(this._.tabs[this._.tabIdList[x%v]][0].$.offsetHeight){return this._.tabIdList[x%v]}}return null},bO=function(v,t){for(var E=v.$.getElementsByTagName("input"),B=0,y=E.length;B<y;B++){var x=new CKEDITOR.dom.element(E[B]);"text"==x.getAttribute("type").toLowerCase()&&(t?(x.setAttribute("value",x.getCustomData("fake_value")||""),x.removeCustomData("fake_value")):(x.setCustomData("fake_value",x.getAttribute("value")),x.setAttribute("value","")))}},gP=function(v,t){var x=this.getInputElement();x&&(v?x.removeAttribute("aria-invalid"):x.setAttribute("aria-invalid",!0));v||(this.select?this.select():this.focus());t&&alert(t);this.fire("validated",{valid:v,msg:t})},gw=function(){var t=this.getInputElement();t&&t.removeAttribute("aria-invalid")},dB=function(v,t,x){this.element=t;this.focusIndex=x;this.tabIndex=0;this.isFocusable=function(){return !t.getAttribute("disabled")&&t.isVisible()};this.focus=function(){v._.currentFocusIndex=this.focusIndex;this.element.focus()};t.on("keydown",function(y){y.data.getKeystroke() in {32:1,13:1}&&this.fire("click")});t.on("focus",function(){this.fire("mouseover")});t.on("blur",function(){this.fire("mouseout")})},i1=function(v,t){this._={dialog:v};CKEDITOR.tools.extend(this,t)},jw=function(t){t.data.preventDefault(1)},iu=function(H){var G=CKEDITOR.document.getWindow(),F=H.config,E=F.dialog_backgroundCoverColor||"white",B=F.dialog_backgroundCoverOpacity,y=F.baseFloatZIndex,F=CKEDITOR.tools.genKey(E,B,y),x=gu[F];x?x.show():(y=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",y,"; top: 0px; left: 0px; ",!CKEDITOR.env.ie6Compat?"background-color: "+E:"",'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(E="<html><body style=\\'background-color:"+E+";\\'></body></html>",y.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),y.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+E+"' );document.close();")+"})())"),y.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),y.push("</div>"),x=CKEDITOR.dom.element.createFromHtml(y.join("")),x.setOpacity(void 0!=B?B:0.5),x.on("keydown",jw),x.on("keypress",jw),x.on("keyup",jw),x.appendTo(CKEDITOR.document.getBody()),gu[F]=x);H.focusManager.add(x);hq=x;H=function(){var I=G.getViewPaneSize();x.setStyles({width:I.width+"px",height:I.height+"px"})};var v=function(){var I=G.getScrollPosition(),J=CKEDITOR.dialog._.currentTop;x.setStyles({left:I.x+"px",top:I.y+"px"});if(J){do{I=J.getPosition(),J.move(I.x,I.y)}while(J=J._.parentDialog)}};iU=H;G.on("resize",H);H();(!CKEDITOR.env.mac||!CKEDITOR.env.webkit)&&x.focus();if(CKEDITOR.env.ie6Compat){var t=function(){v();arguments.callee.prevScrollHandler.apply(this,arguments)};G.$.setTimeout(function(){t.prevScrollHandler=window.onscroll||function(){};window.onscroll=t},0);v()}},hH=function(t){hq&&(t.focusManager.remove(hq),t=CKEDITOR.document.getWindow(),hq.hide(),t.removeListener("resize",iU),CKEDITOR.env.ie6Compat&&t.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),iU=null)},eR=CKEDITOR.tools.cssLength,f3='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(ci,ch){function cf(v){var t=bb._.focusList;v=v||0;if(!(1>t.length)){var B=bb._.currentFocusIndex;try{t[B].getInputElement().$.blur()}catch(y){}for(var x=B=(B+v+t.length)%t.length;v&&!t[x].isFocusable()&&!(x=(x+v+t.length)%t.length,x==B);){}t[x].focus();"text"==t[x].type&&t[x].select()}}function ce(t){if(bb==CKEDITOR.dialog._.currentTop){var x=t.data.getKeystroke(),v="rtl"==ci.lang.dir;bh=bg=0;if(9==x||x==CKEDITOR.SHIFT+9){x=x==CKEDITOR.SHIFT+9,bb._.tabBarMode?(x=x?j.call(bb):cp.call(bb),bb.selectPage(x),bb._.tabs[x][0].focus()):cf(x?-1:1),bh=1}else{if(x==CKEDITOR.ALT+121&&!bb._.tabBarMode&&1<bb.getPageCount()){bb._.tabBarMode=!0,bb._.tabs[bb._.currentTabId][0].focus(),bh=1}else{if((37==x||39==x)&&bb._.tabBarMode){x=x==(v?39:37)?j.call(bb):cp.call(bb),bb.selectPage(x),bb._.tabs[x][0].focus(),bh=1}else{if((13==x||32==x)&&bb._.tabBarMode){this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,cf(1),bh=1}else{if(13==x){x=t.data.getTarget();if(!x.is("a","button","select","textarea")&&(!x.is("input")||"button"!=x.$.type)){(x=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(x.click,0,x),bh=1}bg=1}else{if(27==x){(x=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(x.click,0,x):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),bg=1}else{return}}}}}}cd(t)}}function cd(t){bh?t.data.preventDefault(1):bg&&t.data.stopPropagation()}var cc=CKEDITOR.dialog._.dialogDefinitions[ch],cb=CKEDITOR.tools.clone(fL),ca=ci.config.dialog_buttonsOrder||"OS",bj=ci.lang.dir,bi={},bh,bg;("OS"==ca&&CKEDITOR.env.mac||"rtl"==ca&&"ltr"==bj||"ltr"==ca&&"rtl"==bj)&&cb.buttons.reverse();var cc=CKEDITOR.tools.extend(cc(ci),cb),cc=CKEDITOR.tools.clone(cc),cc=new hk(this,cc),cb=ci,cb=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",f3).output({id:CKEDITOR.tools.getNextNumber(),editorId:cb.id,langDir:cb.lang.dir,langCode:cb.langCode,editorDialogClass:"cke_editor_"+cb.name.replace(/\./g,"\\.")+"_dialog",closeTitle:cb.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),be=cb.getChild([0,0,0,0,0]),bf=be.getChild(0),bd=be.getChild(1);if(CKEDITOR.env.ie&&!CKEDITOR.env.ie6Compat){var bc="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())";CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+bc+'" tabIndex="-1"></iframe>').appendTo(be.getParent())}bf.unselectable();bd.unselectable();cb={element:cb,parts:{dialog:cb.getChild(0),title:bf,close:bd,tabs:be.getChild(2),contents:be.getChild([3,0,0,0]),footer:be.getChild([3,0,1,0])}};this._={editor:ci,element:cb.element,name:ch,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=cb.parts;CKEDITOR.tools.setTimeout(function(){ci.fire("ariaWidget",this.parts.contents)},0,this);cb={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};cb["rtl"==bj?"right":"left"]=0;this.parts.dialog.setStyles(cb);CKEDITOR.event.call(this);this.definition=cc=CKEDITOR.fire("dialogDefinition",{name:ch,definition:cc},ci).definition;if(!("removeDialogTabs" in ci._)&&ci.config.removeDialogTabs){cb=ci.config.removeDialogTabs.split(";");for(bj=0;bj<cb.length;bj++){if(ca=cb[bj].split(":"),2==ca.length){be=ca[0],bi[be]||(bi[be]=[]),bi[be].push(ca[1])}}ci._.removeDialogTabs=bi}if(ci._.removeDialogTabs&&(bi=ci._.removeDialogTabs[ch])){for(bj=0;bj<bi.length;bj++){cc.removeContents(bi[bj])}}if(cc.onLoad){this.on("load",cc.onLoad)}if(cc.onShow){this.on("show",cc.onShow)}if(cc.onHide){this.on("hide",cc.onHide)}if(cc.onOk){this.on("ok",function(t){ci.fire("saveSnapshot");setTimeout(function(){ci.fire("saveSnapshot")},0);!1===cc.onOk.call(this,t)&&(t.data.hide=!1)})}if(cc.onCancel){this.on("cancel",function(t){!1===cc.onCancel.call(this,t)&&(t.data.hide=!1)})}var bb=this,ah=function(v){var t=bb._.contents,y;for(y in t){for(var x in t[y]){if(v.call(this,t[y][x])){return}}}};this.on("ok",function(t){ah(function(v){if(v.validate){var y=v.validate(this),x="string"==typeof y||!1===y;x&&(t.data.hide=!1,t.stop());gP.call(v,!x,"string"==typeof y?y:void 0);return x}})},this,null,0);this.on("cancel",function(t){ah(function(v){if(v.isChanged()){return !ci.config.dialog_noConfirmCancel&&!confirm(ci.lang.common.confirmCancel)&&(t.data.hide=!1),!0}})},this,null,0);this.parts.close.on("click",function(t){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();t.data.preventDefault()},this);this.changeFocus=cf;var aj=this._.element;ci.focusManager.add(aj,1);this.on("show",function(){aj.on("keydown",ce,this);if(CKEDITOR.env.opera||CKEDITOR.env.gecko){aj.on("keypress",cd,this)}});this.on("hide",function(){aj.removeListener("keydown",ce);(CKEDITOR.env.opera||CKEDITOR.env.gecko)&&aj.removeListener("keypress",cd);ah(function(t){gw.apply(t)})});this.on("iframeAdded",function(t){(new CKEDITOR.dom.document(t.data.iframe.$.contentWindow.document)).on("keydown",ce,this,null,0)});this.on("show",function(){var t=bb._.focusList;t.sort(function(B,y){return B.tabIndex!=y.tabIndex?y.tabIndex-B.tabIndex:B.focusIndex-y.focusIndex});for(var x=t.length,v=0;v<x;v++){t[v].focusIndex=v}ci.config.dialog_startupFocusTab&&1<bb._.pageCount?(bb._.tabBarMode=!0,bb._.tabs[bb._.currentTabId][0].focus()):this._.hasFocus||((this._.currentFocusIndex=-1,cc.onFocus)?(t=cc.onFocus.call(this))&&t.focus():cf(1))},this,null,4294967295);if(CKEDITOR.env.ie6Compat){this.on("load",function(){var v=this.getElement(),t=v.getFirst();t.remove();t.appendTo(v)},this)}var ac=this,ad=function(v){var t=ac.getSize(),F=CKEDITOR.document.getWindow().getViewPaneSize(),E=v.data.$.screenX,B=v.data.$.screenY,y=E-Z.x,x=B-Z.y;Z={x:E,y:B};ba.x+=y;ba.y+=x;ac.move(ba.x+ae[3]<ag?-ae[3]:ba.x-ae[1]>F.width-t.width-ag?F.width-t.width+("rtl"==ai.lang.dir?0:ae[1]):ba.x,ba.y+ae[0]<ag?-ae[0]:ba.y-ae[2]>F.height-t.height-ag?F.height-t.height+ae[2]:ba.y,1);v.data.preventDefault()},aa=function(){CKEDITOR.document.removeListener("mousemove",ad);CKEDITOR.document.removeListener("mouseup",aa);if(CKEDITOR.env.ie6Compat){var t=hq.getChild(0).getFrameDocument();t.removeListener("mousemove",ad);t.removeListener("mouseup",aa)}},Z=null,ba=null;ac.getElement().getFirst();var ai=ac.getParentEditor(),ag=ai.config.dialog_magnetDistance,ae=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof ag&&(ag=20);ac.parts.title.on("mousedown",function(v){Z={x:v.data.$.screenX,y:v.data.$.screenY};CKEDITOR.document.on("mousemove",ad);CKEDITOR.document.on("mouseup",aa);ba=ac.getPosition();if(CKEDITOR.env.ie6Compat){var t=hq.getChild(0).getFrameDocument();t.on("mousemove",ad);t.on("mouseup",aa)}v.data.preventDefault()},ac);var ab=this,Y=function(v){var t="rtl"==R.lang.dir,G=T.width,F=T.height,E=G+(v.data.$.screenX-W)*(t?-1:1)*(ab._.moved?1:2),B=F+(v.data.$.screenY-S)*(ab._.moved?1:2),y=ab._.element.getFirst(),y=t&&y.getComputedStyle("right"),x=ab.getPosition();x.y+B>U.height&&(B=U.height-x.y);if((t?y:x.x)+E>U.width){E=U.width-(t?y:x.x)}if(af==CKEDITOR.DIALOG_RESIZE_WIDTH||af==CKEDITOR.DIALOG_RESIZE_BOTH){G=Math.max(V.minWidth||0,E-cg)}if(af==CKEDITOR.DIALOG_RESIZE_HEIGHT||af==CKEDITOR.DIALOG_RESIZE_BOTH){F=Math.max(V.minHeight||0,B-P)}ab.resize(G,F);ab._.moved||ab.layout();v.data.preventDefault()},X=function(){CKEDITOR.document.removeListener("mouseup",X);CKEDITOR.document.removeListener("mousemove",Y);Q&&(Q.remove(),Q=null);if(CKEDITOR.env.ie6Compat){var t=hq.getChild(0).getFrameDocument();t.removeListener("mouseup",X);t.removeListener("mousemove",Y)}},W,S,V=ab.definition,af=V.resizable;if(af!=CKEDITOR.DIALOG_RESIZE_NONE){var R=ab.getParentEditor(),cg,P,U,T,Q,O=CKEDITOR.tools.addFunction(function(v){T=ab.getSize();var t=ab.parts.contents;t.$.getElementsByTagName("iframe").length&&(Q=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),t.append(Q));P=T.height-ab.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.opera||CKEDITOR.env.ie&&CKEDITOR.env.quirks));cg=T.width-ab.parts.contents.getSize("width",1);W=v.screenX;S=v.screenY;U=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",Y);CKEDITOR.document.on("mouseup",X);CKEDITOR.env.ie6Compat&&(t=hq.getChild(0).getFrameDocument(),t.on("mousemove",Y),t.on("mouseup",X));v.preventDefault&&v.preventDefault()});ab.on("load",function(){var t="";af==CKEDITOR.DIALOG_RESIZE_WIDTH?t=" cke_resizer_horizontal":af==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(t=" cke_resizer_vertical");t=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+t+" cke_resizer_"+R.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(R.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+O+', event )">'+("ltr"==R.lang.dir?"\u25e2":"\u25e3")+"</div>");ab.parts.footer.append(t,1)});R.on("destroy",function(){CKEDITOR.tools.removeFunction(O)})}(new CKEDITOR.dom.text(cc.title,CKEDITOR.document)).appendTo(this.parts.title);for(bj=0;bj<cc.contents.length;bj++){(bi=cc.contents[bj])&&this.addPage(bi)}this.parts.tabs.on("click",function(v){var t=v.data.getTarget();t.hasClass("cke_dialog_tab")&&(t=t.$.id,this.selectPage(t.substring(4,t.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,cf(1)),v.data.preventDefault())},this);bj=[];bi=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:cc.buttons},bj).getChild();this.parts.footer.setHtml(bj.join(""));for(bj=0;bj<bi.length;bj++){this._.buttons[bi[bj].id]=bi[bj]}};var ft=function(t){t.reset&&t.reset(1)};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(v,t){if(!this._.contentSize||!(this._.contentSize.width==v&&this._.contentSize.height==t)){CKEDITOR.dialog.fire("resize",{dialog:this,width:v,height:t},this._.editor),this.fire("resize",{width:v,height:t},this._.editor),this.parts.contents.setStyles({width:v+"px",height:t+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:v,height:t}}},getSize:function(){var t=this._.element.getFirst();return{width:t.$.offsetWidth||0,height:t.$.offsetHeight||0}},move:function(v,t,E){var B=this._.element.getFirst(),y="rtl"==this._.editor.lang.dir,x="fixed"==B.getComputedStyle("position");CKEDITOR.env.ie&&B.setStyle("zoom","100%");if(!x||!this._.position||!(this._.position.x==v&&this._.position.y==t)){this._.position={x:v,y:t},x||(x=CKEDITOR.document.getWindow().getScrollPosition(),v+=x.x,t+=x.y),y&&(x=this.getSize(),v=CKEDITOR.document.getWindow().getViewPaneSize().width-x.width-v),t={top:(0<t?t:0)+"px"},t[y?"right":"left"]=(0<v?v:0)+"px",B.setStyles(t),E&&(this._.moved=1)}},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var H=this._.element,G=this.definition;!H.getParent()||!H.getParent().equals(CKEDITOR.document.getBody())?H.appendTo(CKEDITOR.document.getBody()):H.setStyle("display","block");if(CKEDITOR.env.gecko&&10900>CKEDITOR.env.version){var F=this.parts.dialog;F.setStyle("position","absolute");setTimeout(function(){F.setStyle("position","fixed")},0)}this.resize(this._.contentSize&&this._.contentSize.width||G.width||G.minWidth,this._.contentSize&&this._.contentSize.height||G.height||G.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,iu(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this);H.on("keydown",gz);H.on(CKEDITOR.env.opera?"keypress":"keyup",f6);this._.hasFocus=!1;for(var E in G.contents){if(G.contents[E]){var H=G.contents[E],B=this._.tabs[H.id],y=H.requiredContent,x=0;if(B){for(var v in this._.contents[H.id]){var t=this._.contents[H.id][v];"hbox"==t.type||"vbox"==t.type||!t.getInputElement()||(t.requiredContent&&!this._.editor.activeFilter.check(t.requiredContent)?t.disable():(t.enable(),x++))}!x||y&&!this._.editor.activeFilter.check(y)?B[0].addClass("cke_dialog_tab_disabled"):B[0].removeClass("cke_dialog_tab_disabled")}}}CKEDITOR.tools.setTimeout(function(){this.layout();var J=this,I=function(){J.layout()},K=CKEDITOR.document.getWindow();K.on("resize",I);J.on("hide",function(){K.removeListener("resize",I)});this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(L){L.setInitValue&&L.setInitValue()})},100,this)},layout:function(){var v=this.parts.dialog,t=this.getSize(),B=CKEDITOR.document.getWindow().getViewPaneSize(),y=(B.width-t.width)/2,x=(B.height-t.height)/2;CKEDITOR.env.ie6Compat||(t.height+(0<x?x:0)>B.height||t.width+(0<y?y:0)>B.width?v.setStyle("position","absolute"):v.setStyle("position","fixed"));this.move(this._.moved?this._.position.x:y,this._.moved?this._.position.y:x)},foreach:function(v){for(var t in this._.contents){for(var x in this._.contents[t]){v.call(this,this._.contents[t][x])}}return this},reset:function(){this.foreach(ft);return this},setupContent:function(){var t=arguments;this.foreach(function(v){v.setup&&v.setup.apply(v,t)})},commitContent:function(){var t=arguments;this.foreach(function(v){CKEDITOR.env.ie&&this._.currentFocusIndex==v.focusIndex&&v.getInputElement().$.blur();v.commit&&v.commit.apply(v,t)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var v=this._.element;v.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(var t in d7){for(var B=d7[t],y=B.length-1;0<=y;y--){(B[y].dialog==this||B[y].uiElement==this)&&B.splice(y,1)}0===B.length&&delete d7[t]}for(;CKEDITOR.dialog._.currentTop!=this;){CKEDITOR.dialog._.currentTop.hide()}this._.parentDialog?(t=this._.parentDialog.getElement().getFirst(),t.setStyle("z-index",parseInt(t.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))):hH(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog){CKEDITOR.dialog._.currentZIndex-=10}else{CKEDITOR.dialog._.currentZIndex=null;v.removeListener("keydown",gz);v.removeListener(CKEDITOR.env.opera?"keypress":"keyup",f6);var x=this._.editor;x.focus();setTimeout(function(){x.focusManager.unlock()},0)}delete this._.parentDialog;this.foreach(function(E){E.resetInitValue&&E.resetInitValue()})}},addPage:function(v){if(!v.requiredContent||this._.editor.filter.check(v.requiredContent)){for(var t=[],F=v.label?' title="'+CKEDITOR.tools.htmlEncode(v.label)+'"':"",E=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:v.elements,expand:!!v.expand,padding:v.padding,style:v.style||"width: 100%;"},t),B=this._.contents[v.id]={},y=E.getChild(),x=0;E=y.shift();){!E.notAllowed&&"hbox"!=E.type&&"vbox"!=E.type&&x++,B[E.id]=E,"function"==typeof E.getChild&&y.push.apply(y,E.getChild())}x||(v.hidden=!0);t=CKEDITOR.dom.element.createFromHtml(t.join(""));t.setAttribute("role","tabpanel");E=CKEDITOR.env;B="cke_"+v.id+"_"+CKEDITOR.tools.getNextNumber();F=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",F,v.hidden?' style="display:none"':"",' id="',B,'"',E.gecko&&10900<=E.version&&!E.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',v.label,"</a>"].join(""));t.setAttribute("aria-labelledby",B);this._.tabs[v.id]=[F,t];this._.tabIdList.push(v.id);!v.hidden&&this._.pageCount++;this._.lastTab=F;this.updateStyle();t.setAttribute("name",v.id);t.appendTo(this.parts.contents);F.unselectable();this.parts.tabs.append(F);v.accessKey&&(fO(this,this,"CTRL+"+v.accessKey,e0,eI),this._.accessKeyMap["CTRL+"+v.accessKey]=v.id)}},selectPage:function(v){if(this._.currentTabId!=v&&!this._.tabs[v][0].hasClass("cke_dialog_tab_disabled")&&!0!==this.fire("selectPage",{page:v,currentPage:this._.currentTabId})){for(var t in this._.tabs){var B=this._.tabs[t][0],y=this._.tabs[t][1];t!=v&&(B.removeClass("cke_dialog_tab_selected"),y.hide());y.setAttribute("aria-hidden",t!=v)}var x=this._.tabs[v];x[0].addClass("cke_dialog_tab_selected");CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(bO(x[1]),x[1].show(),setTimeout(function(){bO(x[1],1)},0)):x[1].show();this._.currentTabId=v;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,v)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(v){var t=this._.tabs[v]&&this._.tabs[v][0];t&&1!=this._.pageCount&&t.isVisible()&&(v==this._.currentTabId&&this.selectPage(j.call(this)),t.hide(),this._.pageCount--,this.updateStyle())},showPage:function(t){if(t=this._.tabs[t]&&this._.tabs[t][0]){t.show(),this._.pageCount++,this.updateStyle()}},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(v,t){var x=this._.contents[v];return x&&x[t]},getValueOf:function(v,t){return this.getContentElement(v,t).getValue()},setValueOf:function(v,t,x){return this.getContentElement(v,t).setValue(x)},getButton:function(t){return this._.buttons[t]},click:function(t){return this._.buttons[t].click()},disableButton:function(t){return this._.buttons[t].disable()},enableButton:function(t){return this._.buttons[t].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(v,t){if("undefined"==typeof t){t=this._.focusList.length,this._.focusList.push(new dB(this,v,t))}else{this._.focusList.splice(t,0,new dB(this,v,t));for(var x=t+1;x<this._.focusList.length;x++){this._.focusList[x].focusIndex++}}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(v,t){if(!this._.dialogDefinitions[v]||"function"==typeof t){this._.dialogDefinitions[v]=t}},exists:function(t){return !!this._.dialogDefinitions[t]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(v,t,x){v=v.config.removeDialogTabs;return !(v&&v.match(RegExp("(?:^|;)"+t+":"+x+"(?:$|;)","i")))},okButton:function(){var t=function(v,x){x=x||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:v.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(y){y=y.data.dialog;!1!==y.fire("ok",{hide:!0}).hide&&y.hide()}},x,!0)};t.type="button";t.override=function(v){return CKEDITOR.tools.extend(function(x){return t(x,v)},{type:"button"},!0)};return t}(),cancelButton:function(){var t=function(v,x){x=x||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:v.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(y){y=y.data.dialog;!1!==y.fire("cancel",{hide:!0}).hide&&y.hide()}},x,!0)};t.type="button";t.override=function(v){return CKEDITOR.tools.extend(function(x){return t(x,v)},{type:"button"},!0)};return t}(),addUIElement:function(v,t){this._.uiElementBuilders[v]=t}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var fL={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},eP=function(v,t,B){for(var y=0,x;x=v[y];y++){if(x.id==t||B&&x[B]&&(x=eP(x[B],t,B))){return x}}return null},ex=function(v,t,F,E,B){if(F){for(var y=0,x;x=v[y];y++){if(x.id==F){return v.splice(y,0,t),t}if(E&&x[E]&&(x=ex(x[E],t,F,E,!0))){return x}}if(B){return null}}v.push(t);return t},d5=function(v,t,B){for(var y=0,x;x=v[y];y++){if(x.id==t){return v.splice(y,1)}if(B&&x[B]&&(x=d5(x[B],t,B))){return x}}return null},hk=function(v,t){this.dialog=v;for(var B=t.contents,y=0,x;x=B[y];y++){B[y]=x&&new i1(v,x)}CKEDITOR.tools.extend(this,t)};hk.prototype={getContents:function(t){return eP(this.contents,t)},getButton:function(t){return eP(this.buttons,t)},addContents:function(v,t){return ex(this.contents,v,t)},addButton:function(v,t){return ex(this.buttons,v,t)},removeContents:function(t){d5(this.contents,t)},removeButton:function(t){d5(this.buttons,t)}};i1.prototype={get:function(t){return eP(this.elements,t,"children")},add:function(v,t){return ex(this.elements,v,t,"children")},remove:function(t){d5(this.elements,t,"children")}};var iU,gu={},hq,d7={},gz=function(v){var t=v.data.$.ctrlKey||v.data.$.metaKey,B=v.data.$.altKey,y=v.data.$.shiftKey,x=String.fromCharCode(v.data.$.keyCode);if((t=d7[(t?"CTRL+":"")+(B?"ALT+":"")+(y?"SHIFT+":"")+x])&&t.length){t=t[t.length-1],t.keydown&&t.keydown.call(t.uiElement,t.dialog,t.key),v.data.preventDefault()}},f6=function(v){var t=v.data.$.ctrlKey||v.data.$.metaKey,B=v.data.$.altKey,y=v.data.$.shiftKey,x=String.fromCharCode(v.data.$.keyCode);if((t=d7[(t?"CTRL+":"")+(B?"ALT+":"")+(y?"SHIFT+":"")+x])&&t.length){t=t[t.length-1],t.keyup&&(t.keyup.call(t.uiElement,t.dialog,t.key),v.data.preventDefault())}},fO=function(v,t,B,y,x){(d7[B]||(d7[B]=[])).push({uiElement:v,dialog:t,key:B,keyup:x||v.accessKeyUp,keydown:y||v.accessKeyDown})},eI=function(v,t){v._.accessKeyMap[t]&&v.selectPage(v._.accessKeyMap[t])},e0=function(){};CKEDITOR.ui.dialog={uiElement:function(O,N,M,L,K,J,I){if(!(4>arguments.length)){var H=(L.call?L(N):L)||"div",G=["<",H," "],F=(K&&K.call?K(N):K)||{},E=(J&&J.call?J(N):J)||{},B=(I&&I.call?I.call(this,O,N):I)||"",x=this.domId=E.id||CKEDITOR.tools.getNextId()+"_uiElement";this.id=N.id;N.requiredContent&&!O.getParentEditor().filter.check(N.requiredContent)&&(F.display="none",this.notAllowed=!0);E.id=x;var y={};N.type&&(y["cke_dialog_ui_"+N.type]=1);N.className&&(y[N.className]=1);N.disabled&&(y.cke_disabled=1);for(var v=E["class"]&&E["class"].split?E["class"].split(" "):[],x=0;x<v.length;x++){v[x]&&(y[v[x]]=1)}v=[];for(x in y){v.push(x)}E["class"]=v.join(" ");N.title&&(E.title=N.title);y=(N.style||"").split(";");N.align&&(v=N.align,F["margin-left"]="left"==v?0:"auto",F["margin-right"]="right"==v?0:"auto");for(x in F){y.push(x+":"+F[x])}N.hidden&&y.push("display:none");for(x=y.length-1;0<=x;x--){""===y[x]&&y.splice(x,1)}0<y.length&&(E.style=(E.style?E.style+"; ":"")+y.join("; "));for(x in E){G.push(x+'="'+CKEDITOR.tools.htmlEncode(E[x])+'" ')}G.push(">",B,"</",H,">");M.push(G.join(""));(this._||(this._={})).dialog=O;"boolean"==typeof N.isChanged&&(this.isChanged=function(){return N.isChanged});"function"==typeof N.isChanged&&(this.isChanged=N.isChanged);"function"==typeof N.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(P){return function(Q){P.call(this,N.setValue.call(this,Q))}}));"function"==typeof N.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(P){return function(){return N.getValue.call(this,P.call(this))}}));CKEDITOR.event.implementOn(this);this.registerEvents(N);this.accessKeyUp&&this.accessKeyDown&&N.accessKey&&fO(this,O,"CTRL+"+N.accessKey);var t=this;O.on("load",function(){var P=t.getInputElement();if(P){var Q=t.type in {checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";P.on("focus",function(){O._.tabBarMode=!1;O._.hasFocus=!0;t.fire("focus");Q&&this.addClass(Q)});P.on("blur",function(){t.fire("blur");Q&&this.removeClass(Q)})}});CKEDITOR.tools.extend(this,N);this.keyboardFocusable&&(this.tabIndex=N.tabIndex||0,this.focusIndex=O._.focusList.push(this)-1,this.on("focus",function(){O._.currentFocusIndex=t.focusIndex}))}},hbox:function(I,H,G,F,E){if(!(4>arguments.length)){this._||(this._={});var B=this._.children=H,y=E&&E.widths||null,x=E&&E.height||null,v,t={role:"presentation"};E&&E.align&&(t.align=E.align);CKEDITOR.ui.dialog.uiElement.call(this,I,E||{type:"hbox"},F,"table",{},t,function(){var K=['<tbody><tr class="cke_dialog_ui_hbox">'];for(v=0;v<G.length;v++){var J="cke_dialog_ui_hbox_child",L=[];0===v&&(J="cke_dialog_ui_hbox_first");v==G.length-1&&(J="cke_dialog_ui_hbox_last");K.push('<td class="',J,'" role="presentation" ');y?y[v]&&L.push("width:"+eR(y[v])):L.push("width:"+Math.floor(100/G.length)+"%");x&&L.push("height:"+eR(x));E&&void 0!=E.padding&&L.push("padding:"+eR(E.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&B[v].align&&L.push("text-align:"+B[v].align);0<L.length&&K.push('style="'+L.join("; ")+'" ');K.push(">",G[v],"</td>")}K.push("</tr></tbody>");return K.join("")})}},vbox:function(v,t,G,F,E){if(!(3>arguments.length)){this._||(this._={});var B=this._.children=t,y=E&&E.width||null,x=E&&E.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,v,E||{type:"vbox"},F,"div",null,{role:"presentation"},function(){var H=['<table role="presentation" cellspacing="0" border="0" '];H.push('style="');E&&E.expand&&H.push("height:100%;");H.push("width:"+eR(y||"100%"),";");CKEDITOR.env.webkit&&H.push("float:none;");H.push('"');H.push('align="',CKEDITOR.tools.htmlEncode(E&&E.align||("ltr"==v.getParentEditor().lang.dir?"left":"right")),'" ');H.push("><tbody>");for(var J=0;J<G.length;J++){var I=[];H.push('<tr><td role="presentation" ');y&&I.push("width:"+eR(y||"100%"));x?I.push("height:"+eR(x[J])):E&&E.expand&&I.push("height:"+Math.floor(100/G.length)+"%");E&&void 0!=E.padding&&I.push("padding:"+eR(E.padding));CKEDITOR.env.ie&&CKEDITOR.env.quirks&&B[J].align&&I.push("text-align:"+B[J].align);0<I.length&&H.push('style="',I.join("; "),'" ');H.push(' class="cke_dialog_ui_vbox_child">',G[J],"</td></tr>")}H.push("</tbody></table>");return H.join("")})}}};CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(v,t){this.getInputElement().setValue(v);!t&&this.fire("change",{value:v});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return !1},selectParentTab:function(){for(var t=this.getInputElement();(t=t.getParent())&&-1==t.$.className.search("cke_dialog_page_contents");){}if(!t){return this}t=t.getAttribute("name");this._.dialog._.currentTabId!=t&&this._.dialog.selectPage(t);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(v){var t=/^on([A-Z]\w+)/,B,y=function(F,E,H,G){E.on("load",function(){F.getInputElement().on(H,G,F)})},x;for(x in v){if(B=x.match(t)){this.eventProcessors[x]?this.eventProcessors[x].call(this,this._.dialog,v[x]):y(this,this._.dialog,B[1].toLowerCase(),v[x])}}return this},eventProcessors:{onLoad:function(v,t){v.on("load",t,this)},onShow:function(v,t){v.on("show",t,this)},onHide:function(v,t){v.on("hide",t,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var t=this.getElement();this.getInputElement().setAttribute("disabled","true");t.addClass("cke_disabled")},enable:function(){var t=this.getElement();this.getInputElement().removeAttribute("disabled");t.removeClass("cke_disabled")},isEnabled:function(){return !this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return !this.isEnabled()||!this.isVisible()?!1:!0}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(t){if(1>arguments.length){return this._.children.concat()}t.splice||(t=[t]);return 2>t.length?this._.children[t[0]]:this._.children[t[0]]&&this._.children[t[0]].getChild?this._.children[t[0]].getChild(t.slice(1,t.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;var e3={build:function(H,G,F){for(var E=G.children,B,y=[],x=[],v=0;v<E.length&&(B=E[v]);v++){var t=[];y.push(t);x.push(CKEDITOR.dialog._.uiElementBuilders[B.type].build(H,B,t))}return new CKEDITOR.ui.dialog[G.type](H,x,y,F,G)}};CKEDITOR.dialog.addUIElement("hbox",e3);CKEDITOR.dialog.addUIElement("vbox",e3);CKEDITOR.dialogCommand=function(v,t){this.dialogName=v;CKEDITOR.tools.extend(this,t,!0)};CKEDITOR.dialogCommand.prototype={exec:function(t){CKEDITOR.env.opera?CKEDITOR.tools.setTimeout(function(){t.openDialog(this.dialogName)},0,this):t.openDialog(this.dialogName)},canUndo:!1,editorFocus:1};var eq=/^([a]|[^a])+$/,dY=/^\d*$/,dE=/^\d*(?:\.\d+)?$/,c4=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,cM=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,cu=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var t=arguments;return function(){var v=this&&this.getValue?this.getValue():t[0],F=void 0,E=CKEDITOR.VALIDATE_AND,B=[],y;for(y=0;y<t.length;y++){if("function"==typeof t[y]){B.push(t[y])}else{break}}y<t.length&&"string"==typeof t[y]&&(F=t[y],y++);y<t.length&&"number"==typeof t[y]&&(E=t[y]);var x=E==CKEDITOR.VALIDATE_AND?!0:!1;for(y=0;y<B.length;y++){x=E==CKEDITOR.VALIDATE_AND?x&&B[y](v):x||B[y](v)}return !x?F:!0}},regex:function(v,t){return function(x){x=this&&this.getValue?this.getValue():x;return !v.test(x)?t:!0}},notEmpty:function(t){return this.regex(eq,t)},integer:function(t){return this.regex(dY,t)},number:function(t){return this.regex(dE,t)},cssLength:function(t){return this.functions(function(v){return cM.test(CKEDITOR.tools.trim(v))},t)},htmlLength:function(t){return this.functions(function(v){return c4.test(CKEDITOR.tools.trim(v))},t)},inlineStyle:function(t){return this.functions(function(v){return cu.test(CKEDITOR.tools.trim(v))},t)},equals:function(v,t){return this.functions(function(x){return x==v},t)},notEqual:function(v,t){return this.functions(function(x){return x!=v},t)}};CKEDITOR.on("instanceDestroyed",function(v){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var t;t=CKEDITOR.dialog._.currentTop;){t.hide()}for(var y in gu){gu[y].remove()}gu={}}v=v.editor._.storedDialogs;for(var x in v){v[x].destroy()}});CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(v,t){var y=null,x=CKEDITOR.dialog._.dialogDefinitions[v];null===CKEDITOR.dialog._.currentTop&&iu(this);if("function"==typeof x){y=this._.storedDialogs||(this._.storedDialogs={}),y=y[v]||(y[v]=new CKEDITOR.dialog(this,v)),t&&t.call(y,y),y.show()}else{if("failed"==x){throw hH(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+v+'" failed when loading definition.')}"string"==typeof x&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(x),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[v]&&(CKEDITOR.dialog._.dialogDefinitions[v]="failed");this.openDialog(v,t)},this,0,1)}CKEDITOR.skin.loadPart("dialog");return y}});CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(t){t.on("doubleclick",function(v){v.data.dialog&&t.openDialog(v.data.dialog)},null,null,999)}});CKEDITOR.plugins.add("about",{requires:"dialog",init:function(v){var t=v.addCommand("about",new CKEDITOR.dialogCommand("about"));t.modes={wysiwyg:1,source:1};t.canUndo=!1;t.readOnly=1;v.ui.addButton&&v.ui.addButton("About",{label:v.lang.about.title,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}});CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(v){var t=this;v.addCommand("a11yHelp",{exec:function(){var x=v.langCode,x=t.availableLangs[x]?x:t.availableLangs[x.replace(/-.*/,"")]?x.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+x+".js"),function(){v.lang.a11yhelp=t.langEntries[x];v.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});v.setKeystroke(CKEDITOR.ALT+48,"a11yHelp");CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js")}});var dN=function(v){var t=this.att;v=v&&v.hasAttribute(t)&&v.getAttribute(t)||"";void 0!==v&&this.setValue(v)},dl=function(){for(var v,t=0;t<arguments.length;t++){if(arguments[t] instanceof CKEDITOR.dom.element){v=arguments[t];break}}if(v){var t=this.att,x=this.getValue();x?v.setAttribute(t,x):v.removeAttribute(t,x)}},eL={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(v){v||(v=eL);var t=[];v.id&&t.push("id");v.dir&&t.push("dir");var x="";t.length&&(x+="["+t.join(",")+"]");v.classes&&(x+="(*)");v.styles&&(x+="{*}");return x},createAdvancedTab:function(v,t,E){t||(t=eL);var B=v.lang.common,y={id:"advanced",label:B.advancedTab,title:B.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},x=[];if(t.id||t.dir){t.id&&x.push({id:"advId",att:"id",type:"text",requiredContent:E?E+"[id]":null,label:B.id,setup:dN,commit:dl}),t.dir&&x.push({id:"advLangDir",att:"dir",type:"select",requiredContent:E?E+"[dir]":null,label:B.langDir,"default":"",style:"width:100%",items:[[B.notSet,""],[B.langDirLTR,"ltr"],[B.langDirRTL,"rtl"]],setup:dN,commit:dl}),y.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(x)})}if(t.styles||t.classes){x=[],t.styles&&x.push({id:"advStyles",att:"style",type:"text",requiredContent:E?E+"{cke-xyz}":null,label:B.styles,"default":"",validate:CKEDITOR.dialog.validate.inlineStyle(B.invalidInlineStyle),onChange:function(){},getStyle:function(G,F){var H=this.getValue().match(RegExp("(?:^|;)\\s*"+G+"\\s*:\\s*([^;]*)","i"));return H?H[1]:F},updateStyle:function(F,I){var H=this.getValue(),G=v.document.createElement("span");G.setAttribute("style",H);G.setStyle(F,I);H=CKEDITOR.tools.normalizeCssText(G.getAttribute("style"));this.setValue(H,1)},setup:dN,commit:dl}),t.classes&&x.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:E?E+"(cke-xyz)":null,label:B.cssClasses,"default":"",setup:dN,commit:dl}]}),y.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(x)})}return y}});CKEDITOR.plugins.add("basicstyles",{init:function(v){var t=0,E=function(J,I,H,G){if(G){G=new CKEDITOR.style(G);var F=B[H];F.unshift(G);v.attachStyleStateChange(G,function(K){!v.readOnly&&v.getCommand(H).setState(K)});v.addCommand(H,new CKEDITOR.styleCommand(G,{contentForms:F}));v.ui.addButton&&v.ui.addButton(J,{label:I,command:H,toolbar:"basicstyles,"+(t+=10)})}},B={bold:["strong","b",["span",function(F){F=F.styles["font-weight"];return"bold"==F||700<=+F}]],italic:["em","i",["span",function(F){return"italic"==F.styles["font-style"]}]],underline:["u",["span",function(F){return"underline"==F.styles["text-decoration"]}]],strike:["s","strike",["span",function(F){return"line-through"==F.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},y=v.config,x=v.lang.basicstyles;E("Bold",x.bold,"bold",y.coreStyles_bold);E("Italic",x.italic,"italic",y.coreStyles_italic);E("Underline",x.underline,"underline",y.coreStyles_underline);E("Strike",x.strike,"strike",y.coreStyles_strike);E("Subscript",x.subscript,"subscript",y.coreStyles_subscript);E("Superscript",x.superscript,"superscript",y.coreStyles_superscript);v.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};CKEDITOR.config.coreStyles_superscript={element:"sup"};var bZ=function(v,t,B,y){if(!v.isReadOnly()&&!v.equals(B.editable())){CKEDITOR.dom.element.setMarker(y,v,"bidi_processed",1);y=v;for(var x=B.editable();(y=y.getParent())&&!y.equals(x);){if(y.getCustomData("bidi_processed")){v.removeStyle("direction");v.removeAttribute("dir");return}}y="useComputedState" in B.config?B.config.useComputedState:1;if((y?v.getComputedStyle("direction"):v.getStyle("direction")||v.hasAttribute("dir"))!=t){v.removeStyle("direction"),y?(v.removeAttribute("dir"),t!=v.getComputedStyle("direction")&&v.setAttribute("dir",t)):v.setAttribute("dir",t),B.forceNextSelectionCheck()}}},d1=function(t){return{context:"p",allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(v,F){var E=v.config.useComputedState,B,E=void 0===E||E;if(!E){B=F.lastElement;for(var y=v.editable();B&&!(B.getName() in et||B.equals(y));){var x=B.getParent();if(!x){break}B=x}}B=B||F.block||F.blockLimit;B.equals(v.editable())&&(y=v.getSelection().getRanges()[0].getEnclosedNode())&&y.type==CKEDITOR.NODE_ELEMENT&&(B=y);B&&(E=E?B.getComputedStyle("direction"):B.getStyle("direction")||B.getAttribute("dir"),v.getCommand("bidirtl").setState("rtl"==E?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),v.getCommand("bidiltr").setState("ltr"==E?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF));E=(F.block||F.blockLimit||v.editable()).getDirection(1);if(E!=(v._.selDir||v.lang.dir)){v._.selDir=E,v.fire("contentDirChanged",E)}},exec:function(N){var M=N.getSelection(),L=N.config.enterMode,K=M.getRanges();if(K&&K.length){for(var J={},I=M.createBookmarks(),K=K.createIterator(),H,G=0;H=K.getNextRange(1);){var F=H.getEnclosedNode();if(!F||F&&!(F.type==CKEDITOR.NODE_ELEMENT&&F.getName() in by)){var E=H,F=a6,B=L,x=E.getCommonAncestor(!1,!0),E=E.clone();E.enlarge(B==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(E.checkBoundaryOfElement(x,CKEDITOR.START)&&E.checkBoundaryOfElement(x,CKEDITOR.END)){for(E=void 0;x&&x.type==CKEDITOR.NODE_ELEMENT&&(E=x.getParent())&&1==E.getChildCount()&&!(x.getName() in F);){x=E}F=x.type==CKEDITOR.NODE_ELEMENT&&x.getName() in F&&x}else{F=void 0}}F&&bZ(F,t,N,J);var x=new CKEDITOR.dom.walker(H),y=I[G].startNode,v=I[G++].endNode;x.evaluator=function(O){return !!(O.type==CKEDITOR.NODE_ELEMENT&&O.getName() in a6&&!(O.getName()==(L==CKEDITOR.ENTER_P?"p":"div")&&O.getParent().type==CKEDITOR.NODE_ELEMENT&&"blockquote"==O.getParent().getName())&&O.getPosition(y)&CKEDITOR.POSITION_FOLLOWING&&(O.getPosition(v)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;F=x.next();){bZ(F,t,N,J)}H=H.createIterator();for(H.enlargeBr=L!=CKEDITOR.ENTER_BR;F=H.getNextParagraph(L==CKEDITOR.ENTER_P?"p":"div");){bZ(F,t,N,J)}}CKEDITOR.dom.element.clearAllMarkers(J);N.forceNextSelectionCheck();M.selectBookmarks(I);N.focus()}}}},b2=function(v){var t=v==cT.setAttribute,y=v==cT.removeAttribute,x=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(G,F){if(!this.isReadOnly()){var E;if(E=G==(t||y?"dir":"direction")||"style"==G&&(y||x.test(F))){v:{E=this;for(var B=E.getDocument().getBody().getParent();E;){if(E.equals(B)){E=!1;break v}E=E.getParent()}E=!0}E=!E}if(E&&(E=this.getDirection(1),B=v.apply(this,arguments),E!=this.getDirection(1))){return this.getDocument().fire("dirChanged",this),B}}return v.apply(this,arguments)}},a6={table:1,ul:1,ol:1,blockquote:1,div:1},by={},et={};CKEDITOR.tools.extend(by,a6,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(et,by,{td:1});CKEDITOR.plugins.add("bidi",{init:function(v){function t(y,G,F,E,B){v.addCommand(F,new CKEDITOR.command(v,E));v.ui.addButton&&v.ui.addButton(y,{label:G,command:F,toolbar:"bidi,"+B})}if(!v.blockless){var x=v.lang.bidi;t("BidiLtr",x.ltr,"bidiltr",d1("ltr"),10);t("BidiRtl",x.rtl,"bidirtl",d1("rtl"),20);v.on("contentDom",function(){v.document.on("dirChanged",function(y){v.fire("dirChanged",{node:y.data,dir:y.data.getDirection(1)})})});v.on("contentDirChanged",function(y){y=(v.lang.dir!=y.data?"add":"remove")+"Class";var B=v.ui.space(v.config.toolbarLocation);if(B){B[y]("cke_mixed_dir_content")}})}}});for(var cT=CKEDITOR.dom.element.prototype,aO=["setStyle","removeStyle","setAttribute","removeAttribute"],cB=0;cB<aO.length;cB++){cT[aO[cB]]=CKEDITOR.tools.override(cT[aO[cB]],b2)}var bB={exec:function(J){var I=J.getCommand("blockquote").state,H=J.getSelection(),G=H&&H.getRanges()[0];if(G){var F=H.createBookmarks();if(CKEDITOR.env.ie){var E=F[0].startNode,B=F[0].endNode,y;if(E&&"blockquote"==E.getParent().getName()){for(y=E;y=y.getNext();){if(y.type==CKEDITOR.NODE_ELEMENT&&y.isBlockBoundary()){E.move(y,!0);break}}}if(B&&"blockquote"==B.getParent().getName()){for(y=B;y=y.getPrevious();){if(y.type==CKEDITOR.NODE_ELEMENT&&y.isBlockBoundary()){B.move(y);break}}}}var x=G.createIterator();x.enlargeBr=J.config.enterMode!=CKEDITOR.ENTER_BR;if(I==CKEDITOR.TRISTATE_OFF){for(E=[];I=x.getNextParagraph();){E.push(I)}1>E.length&&(I=J.document.createElement(J.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),B=F.shift(),G.insertNode(I),I.append(new CKEDITOR.dom.text("\ufeff",J.document)),G.moveToBookmark(B),G.selectNodeContents(I),G.collapse(!0),B=G.createBookmark(),E.push(I),F.unshift(B));y=E[0].getParent();G=[];for(B=0;B<E.length;B++){I=E[B],y=y.getCommonAncestor(I.getParent())}for(I={table:1,tbody:1,tr:1,ol:1,ul:1};I[y.getName()];){y=y.getParent()}for(B=null;0<E.length;){for(I=E.shift();!I.getParent().equals(y);){I=I.getParent()}I.equals(B)||G.push(I);B=I}for(;0<G.length;){if(I=G.shift(),"blockquote"==I.getName()){for(B=new CKEDITOR.dom.documentFragment(J.document);I.getFirst();){B.append(I.getFirst().remove()),E.push(B.getLast())}B.replace(I)}else{E.push(I)}}G=J.document.createElement("blockquote");for(G.insertBefore(E[0]);0<E.length;){I=E.shift(),G.append(I)}}else{if(I==CKEDITOR.TRISTATE_ON){B=[];for(y={};I=x.getNextParagraph();){for(E=G=null;I.getParent();){if("blockquote"==I.getParent().getName()){G=I.getParent();E=I;break}I=I.getParent()}G&&E&&!E.getCustomData("blockquote_moveout")&&(B.push(E),CKEDITOR.dom.element.setMarker(y,E,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(y);I=[];E=[];for(y={};0<B.length;){x=B.shift(),G=x.getParent(),x.getPrevious()?x.getNext()?(x.breakParent(x.getParent()),E.push(x.getNext())):x.remove().insertAfter(G):x.remove().insertBefore(G),G.getCustomData("blockquote_processed")||(E.push(G),CKEDITOR.dom.element.setMarker(y,G,"blockquote_processed",!0)),I.push(x)}CKEDITOR.dom.element.clearAllMarkers(y);for(B=E.length-1;0<=B;B--){G=E[B];J:{y=G;for(var x=0,v=y.getChildCount(),t=void 0;x<v&&(t=y.getChild(x));x++){if(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary()){y=!1;break J}}y=!0}y&&G.remove()}if(J.config.enterMode==CKEDITOR.ENTER_BR){for(G=!0;I.length;){if(x=I.shift(),"div"==x.getName()){B=new CKEDITOR.dom.documentFragment(J.document);G&&x.getPrevious()&&!(x.getPrevious().type==CKEDITOR.NODE_ELEMENT&&x.getPrevious().isBlockBoundary())&&B.append(J.document.createElement("br"));for(G=x.getNext()&&!(x.getNext().type==CKEDITOR.NODE_ELEMENT&&x.getNext().isBlockBoundary());x.getFirst();){x.getFirst().remove().appendTo(B)}G&&B.append(J.document.createElement("br"));B.replace(x);G=!1}}}}}H.selectBookmarks(F);J.focus()}},refresh:function(v,t){this.setState(v.elementPath(t.block||t.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(t){t.blockless||(t.addCommand("blockquote",bB),t.ui.addButton&&t.ui.addButton("Blockquote",{label:t.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}});var a9=function(t){if(CKEDITOR.env.webkit){if(!t.match(/^[^<]*$/g)&&!t.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi)){return"html"}}else{if(CKEDITOR.env.ie){if(!t.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!t.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi)){return"html"}}else{if(CKEDITOR.env.gecko||CKEDITOR.env.opera){if(!t.match(/^([^<]|<br( ?\/)?>)*$/gi)){return"html"}}else{return"html"}}}return"htmlifiedtext"},dJ=function(v,t){v.enterMode==CKEDITOR.ENTER_BR?t=t.replace(/(<\/p><p>)+/g,function(x){return CKEDITOR.tools.repeat("<br>",2*(x.length/7))}).replace(/<\/?p>/g,""):v.enterMode==CKEDITOR.ENTER_DIV&&(t=t.replace(/<(\/)?p>/g,"<$1div>"));return t};CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(O){var N,M=function(Q){return{type:Q,canUndo:"cut"==Q,startDisabled:!0,exec:function(){"cut"==this.type&&H();var R,T=this.type;if(CKEDITOR.env.ie){R=J(T)}else{try{R=O.document.$.execCommand(T,!1,null)}catch(S){R=!1}}R||alert(O.lang.clipboard[this.type+"Error"]);return R}}},L=function(){y=1;setTimeout(function(){y=0},100)},K=function(){x=1;setTimeout(function(){x=0},10)},J=function(Q){var U=O.document,T=U.getBody(),S=!1,R=function(){S=!0};T.on(Q,R);(7<CKEDITOR.env.version?U.$:U.$.selection.createRange()).execCommand(Q);T.removeListener(Q,R);return S},I=function(Q,S,R){Q={type:Q};if(R&&!O.fire("beforePaste",Q)||!S){return !1}Q.dataValue=S;return O.fire("paste",Q)},H=function(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var Q=O.getSelection(),T,S,R;if(Q.getType()==CKEDITOR.SELECTION_ELEMENT&&(T=Q.getSelectedElement())){S=Q.getRanges()[0],R=O.document.createText(""),R.insertBefore(T),S.setStartBefore(R),S.setEndAfter(T),Q.selectRanges([S]),setTimeout(function(){T.getParent()&&(R.remove(),Q.selectElement(T))},0)}}},G=function(){if(CKEDITOR.env.ie){O.focus();L();var Q=O.focusManager;Q.lock();if(O.editable().fire(t)&&!J("paste")){return Q.unlock(),!1}Q.unlock()}else{try{if(O.editable().fire(t)&&!O.document.$.execCommand("Paste",!1,null)){throw 0}}catch(R){return !1}}return !0},F=function(){var ac={type:"auto"},ab=O.fire("beforePaste",ac),aa=O.document,Z=O.editable(),Y=function(ad){ad.cancel()},X=CKEDITOR.env.gecko&&10902>=CKEDITOR.env.version,W;if(!aa.getById("cke_pastebin")){var V=O.getSelection(),U=V.createBookmarks(),T=new CKEDITOR.dom.element((CKEDITOR.env.webkit||Z.is("body"))&&!CKEDITOR.env.ie&&!CKEDITOR.env.opera?"body":"div",aa);T.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});CKEDITOR.env.opera&&T.appendBogus();var S=0,aa=aa.getWindow();X?(T.insertAfter(U[0].startNode),T.setStyle("display","inline")):(CKEDITOR.env.webkit?(Z.append(T),T.addClass("cke_editable"),Z.is("body")||(X="static"!=Z.getComputedStyle("position")?Z:CKEDITOR.dom.element.get(Z.$.offsetParent),S=X.getDocumentPosition().y)):Z.getAscendant(CKEDITOR.env.ie||CKEDITOR.env.opera?"body":"html",1).append(T),T.setStyles({position:"absolute",top:aa.getScrollPosition().y-S+10+"px",width:"1px",height:Math.max(1,aa.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}));(X=T.getParent().isReadOnly())?(T.setOpacity(0),T.setAttribute("contenteditable",!0)):T.setStyle("ltr"==O.config.contentsLangDirection?"left":"right","-1000px");O.on("selectionChange",Y,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko){W=Z.once("blur",Y,null,null,-100)}X&&T.focus();X=new CKEDITOR.dom.range(T);X.selectNodeContents(T);var R=X.select();CKEDITOR.env.ie&&(W=Z.once("blur",function(){O.lockSelection(R)}));var Q=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){if(CKEDITOR.env.webkit||CKEDITOR.env.opera){CKEDITOR.document[CKEDITOR.env.webkit?"getBody":"getDocumentElement"]().$.scrollTop=Q}W&&W.removeListener();CKEDITOR.env.ie&&Z.focus();V.selectBookmarks(U);T.remove();var ad;if(CKEDITOR.env.webkit&&(ad=T.getFirst())&&ad.is&&ad.hasClass("Apple-style-span")){T=ad}O.removeListener("selectionChange",Y);ad=T.getHtml();ad=ad.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,"");ab&&I(ac.type,ad,0,1)},0)}},E=function(){if("wysiwyg"==O.mode){var Q=B("paste");O.getCommand("cut").setState(B("cut"));O.getCommand("copy").setState(B("copy"));O.getCommand("paste").setState(Q);O.fire("pasteState",Q)}},B=function(Q){if(v&&Q in {paste:1,cut:1}){return CKEDITOR.TRISTATE_DISABLED}if("paste"==Q){return CKEDITOR.TRISTATE_OFF}Q=O.getSelection();var R=Q.getRanges();return Q.getType()==CKEDITOR.SELECTION_NONE||1==R.length&&R[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF},x=0,y=0,v=0,t=CKEDITOR.env.ie?"beforepaste":"paste";O.on("key",function(Q){if("wysiwyg"==O.mode){switch(Q.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:Q=O.editable();L();!CKEDITOR.env.ie&&Q.fire("beforepaste");(CKEDITOR.env.opera||CKEDITOR.env.gecko&&10900>CKEDITOR.env.version)&&Q.fire("paste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:O.fire("saveSnapshot"),setTimeout(function(){O.fire("saveSnapshot")},50)}}});O.on("contentDom",function(){var Q=O.editable();Q.on(t,function(S){(!CKEDITOR.env.ie||!x)&&F(S)});CKEDITOR.env.ie&&Q.on("paste",function(S){y||(L(),S.data.preventDefault(),F(S),J("paste")||O.openDialog("paste"))});CKEDITOR.env.ie&&(Q.on("contextmenu",K,null,null,0),Q.on("beforepaste",function(S){S.data&&!S.data.$.ctrlKey&&K()},null,null,0));Q.on("beforecut",function(){!x&&H(O)});var R;Q.attachListener(CKEDITOR.env.ie?Q:O.document.getDocumentElement(),"mouseup",function(){R=setTimeout(function(){E()},0)});O.on("destroy",function(){clearTimeout(R)});Q.on("keyup",E)});O.on("selectionChange",function(Q){v=Q.data.selection.getRanges()[0].checkReadOnly();E()});O.contextMenu&&O.contextMenu.addListener(function(R,Q){v=Q.getRanges()[0].checkReadOnly();return{cut:B("cut"),copy:B("copy"),paste:B("paste")}});var P=function(Q,V,U,T,S){var R=O.lang.clipboard[V];O.addCommand(V,U);O.ui.addButton&&O.ui.addButton(Q,{label:R,command:V,toolbar:"clipboard,"+T});O.addMenuItems&&O.addMenuItem(V,{label:R,command:V,group:"clipboard",order:S})};P("Cut","cut",M("cut"),10,1);P("Copy","copy",M("copy"),20,4);P("Paste","paste",{canUndo:!1,async:!0,exec:function(R,Q){var T=function(U,V){U&&I(U.type,U.dataValue,!!V);R.fire("afterCommandExec",{name:"paste",command:S,returnValue:!!U})},S=this;"string"==typeof Q?T({type:"auto",dataValue:Q},1):R.getClipboardData(T)}},30,8);O.getClipboardData=function(Q,X){function W(Y){Y.removeListener();Y.cancel();X(Y.data)}function V(Y){Y.removeListener();Y.cancel();R=!0;X({type:S,dataValue:Y.data})}function U(){this.customTitle=Q&&Q.title}var T=!1,S="auto",R=!1;X||(X=Q,Q=null);O.on("paste",W,null,null,0);O.on("beforePaste",function(Y){Y.removeListener();T=!0;S=Y.data.type},null,null,1000);!1===G()&&(O.removeListener("paste",W),T&&O.fire("pasteDialog",U)?(O.on("pasteDialogCommit",V),O.on("dialogHide",function(Y){Y.removeListener();Y.data.removeListener("pasteDialogCommit",V);setTimeout(function(){R||X(null)},10)})):X(null))};CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));O.on("paste",function(R){var Q=R.data.dataValue,V=CKEDITOR.dtd.$block;-1<Q.indexOf("Apple-")&&(Q=Q.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=R.data.type&&(Q=Q.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(X,W){return W.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<Q.indexOf('<br class="Apple-interchange-newline">')&&(R.data.startsWithEOL=1,R.data.preSniffing="html",Q=Q.replace(/<br class="Apple-interchange-newline">/,"")),Q=Q.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(Q.match(/^<[^<]+cke_(editable|contents)/i)){var U,T,S=new CKEDITOR.dom.element("div");for(S.setHtml(Q);1==S.getChildCount()&&(U=S.getFirst())&&U.type==CKEDITOR.NODE_ELEMENT&&(U.hasClass("cke_editable")||U.hasClass("cke_contents"));){S=T=U}T&&(Q=T.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?Q=Q.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(W,X){return X.toLowerCase() in V?(R.data.preSniffing="html","<"+X):W}):CKEDITOR.env.webkit?Q=Q.replace(/<\/(\w+)><div><br><\/div>$/,function(W,X){return X in V?(R.data.endsWithEOL=1,"</"+X+">"):W}):CKEDITOR.env.gecko&&(Q=Q.replace(/(\s)<br>$/,"$1"));R.data.dataValue=Q},null,null,3);O.on("paste",function(ad){ad=ad.data;var ac=ad.type,ab=ad.dataValue,aa,Z=O.config.clipboard_defaultContentType||"html";aa="html"==ac||"html"==ad.preSniffing?"html":a9(ab);if("htmlifiedtext"==aa){var Y=O.config,X=function(ag){return CKEDITOR.tools.repeat("</p><p>",~~(ag/2))+(1==ag%2?"<br>":"")},ab=ab.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),ab=ab.replace(/<\/?[A-Z]+>/g,function(ag){return ag.toLowerCase()});if(!ab.match(/^[^<]$/)){CKEDITOR.env.webkit&&-1<ab.indexOf("<div>")&&(ab=ab.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),ab.match(/<div>(<br>|)<\/div>/)&&(ab="<p>"+ab.replace(/(<div>(<br>|)<\/div>)+/g,function(ag){return X(ag.split("</div><div>").length+1)})+"</p>"),ab=ab.replace(/<\/div><div>/g,"<br>"),ab=ab.replace(/<\/?div>/g,""));if((CKEDITOR.env.gecko||CKEDITOR.env.opera)&&Y.enterMode!=CKEDITOR.ENTER_BR){CKEDITOR.env.gecko&&(ab=ab.replace(/^<br><br>$/,"<br>")),-1<ab.indexOf("<br><br>")&&(ab="<p>"+ab.replace(/(<br>){2,}/g,function(ag){return X(ag.length/4)})+"</p>")}ab=dJ(Y,ab)}}else{if("text"==ac&&"html"==aa){var Y=O.config,W;if(!(W=N)){W=new CKEDITOR.htmlParser.filter;var V={blockquote:1,dl:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ol:1,p:1,table:1,ul:1},U=CKEDITOR.tools.extend({br:0},CKEDITOR.dtd.$inline),T={p:1,br:1,"cke:br":1},S=CKEDITOR.dtd,R=CKEDITOR.tools.extend({area:1,basefont:1,embed:1,iframe:1,map:1,object:1,param:1},CKEDITOR.dtd.$nonBodyContent,CKEDITOR.dtd.$cdata),Q=function(ag){delete ag.name;ag.add(new CKEDITOR.htmlParser.text(" "))},af=function(ah){for(var ag=ah,ai;(ag=ag.next)&&ag.name&&ag.name.match(/^h\d$/);){ai=new CKEDITOR.htmlParser.element("cke:br");ai.isEmpty=!0;for(ah.add(ai);ai=ag.children.shift();){ah.add(ai)}}};W.addRules({elements:{h1:af,h2:af,h3:af,h4:af,h5:af,h6:af,img:function(ah){ah=CKEDITOR.tools.trim(ah.attributes.alt||"");var ag=" ";ah&&!ah.match(/(^http|\.(jpe?g|gif|png))/i)&&(ag=" ["+ah+"] ");return new CKEDITOR.htmlParser.text(ag)},td:Q,th:Q,$:function(ah){var ag=ah.name,ai;if(R[ag]){return !1}ah.attributes={};if("br"==ag){return ah}if(V[ag]){ah.name="p"}else{if(U[ag]){delete ah.name}else{if(S[ag]){ai=new CKEDITOR.htmlParser.element("cke:br");ai.isEmpty=!0;if(CKEDITOR.dtd.$empty[ag]){return ai}ah.add(ai,0);ai=ai.clone();ai.isEmpty=!0;ah.add(ai);delete ah.name}}}T[ah.name]||delete ah.name;return ah}}},{applyToAll:!0});W=N=W}ab=new CKEDITOR.htmlParser.fragment.fromHtml(ab);Q=new CKEDITOR.htmlParser.basicWriter;ab.writeHtml(Q,W);var ab=Q.getHtml(),ab=ab.replace(/\s*(<\/?[a-z:]+ ?\/?>)\s*/g,"$1").replace(/(<cke:br \/>){2,}/g,"<cke:br />").replace(/(<cke:br \/>)(<\/?p>|<br \/>)/g,"$2").replace(/(<\/?p>|<br \/>)(<cke:br \/>)/g,"$1").replace(/<(cke:)?br( \/)?>/g,"<br>").replace(/<p><\/p>/g,""),ae=0,ab=ab.replace(/<\/?p>/g,function(ag){if("<p>"==ag){if(1<++ae){return"</p><p>"}}else{if(0<--ae){return"</p><p>"}}return ag}).replace(/<p><\/p>/g,""),ab=dJ(Y,ab)}}ad.startsWithEOL&&(ab='<br data-cke-eol="1">'+ab);ad.endsWithEOL&&(ab+='<br data-cke-eol="1">');"auto"==ac&&(ac="html"==aa||"html"==Z?"html":"text");ad.type=ac;ad.dataValue=ab;delete ad.preSniffing;delete ad.startsWithEOL;delete ad.endsWithEOL},null,null,6);O.on("paste",function(Q){Q=Q.data;O.insertHtml(Q.dataValue,Q.type);setTimeout(function(){O.fire("afterPaste")},0)},null,null,1000);O.on("pasteDialog",function(Q){setTimeout(function(){O.openDialog("paste",Q.data)},0)})}});var hY='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&10900<=CKEDITOR.env.version&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac){hY+=' onkeypress="return false;"'}CKEDITOR.env.gecko&&(hY+=' onblur="this.style.cssText = this.style.cssText;"');var hY=hY+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);"  onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),hY=hY+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>',aR=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),az=CKEDITOR.addTemplate("button",hY);CKEDITOR.plugins.add("button",{beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(t){CKEDITOR.tools.extend(this,t,{title:t.label,click:t.click||function(v){v.execCommand(t.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(t){return new CKEDITOR.ui.button(t)}};CKEDITOR.ui.button.prototype={render:function(N,M){var L=CKEDITOR.env,K=this._.id=CKEDITOR.tools.getNextId(),J="",I=this.command,H;this._.editor=N;var G={id:K,button:this,editor:N,focus:function(){CKEDITOR.document.getById(K).focus()},execute:function(){this.button.click(N)},attach:function(O){this.button.attach(O)}},F=CKEDITOR.tools.addFunction(function(O){if(G.onkey){return O=new CKEDITOR.dom.event(O),!1!==G.onkey(G,O.getKeystroke())}}),E=CKEDITOR.tools.addFunction(function(P){var O;G.onfocus&&(O=!1!==G.onfocus(G,new CKEDITOR.dom.event(P)));CKEDITOR.env.gecko&&10900>CKEDITOR.env.version&&P.preventBubble();return O}),B=0,y=CKEDITOR.tools.addFunction(function(){if(CKEDITOR.env.opera){var O=N.editable();O.isInline()&&O.hasFocus&&(N.lockSelection(),B=1)}});G.clickFn=H=CKEDITOR.tools.addFunction(function(){B&&(N.unlockSelection(1),B=0);G.execute()});if(this.modes){var v={},x=function(){var O=N.mode;O&&(O=this.modes[O]?void 0!=v[O]?v[O]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,O=N.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:O,this.setState(O),this.refresh&&this.refresh())};N.on("beforeModeUnload",function(){N.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(v[N.mode]=this._.state)},this);N.on("activeFilterChange",x,this);N.on("mode",x,this);!this.readOnly&&N.on("readOnly",x,this)}else{if(I&&(I=N.getCommand(I))){I.on("state",function(){this.setState(I.state)},this),J+=I.state==CKEDITOR.TRISTATE_ON?"on":I.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"}}if(this.directional){N.on("contentDirChanged",function(O){var Q=CKEDITOR.document.getById(this._.id),P=Q.getFirst();O=O.data;O!=N.lang.dir?Q.addClass("cke_"+O):Q.removeClass("cke_ltr").removeClass("cke_rtl");P.setAttribute("style",CKEDITOR.skin.getIconStyle(t,"rtl"==O,this.icon,this.iconOffset))},this)}I||(J+="off");var t=x=this.name||this.command;this.icon&&!/\./.test(this.icon)&&(t=this.icon,this.icon=null);L={id:K,name:x,iconName:t,label:this.label,cls:this.className||"",state:J,ariaDisabled:"disabled"==J?"true":"false",title:this.title,titleJs:L.gecko&&10900<=L.version&&!L.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:F,mousedownFn:y,focusFn:E,clickFn:H,style:CKEDITOR.skin.getIconStyle(t,"rtl"==N.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?aR.output():""};az.output(L,M);if(this.onRender){this.onRender()}return G},setState:function(v){if(this._.state==v){return !1}this._.state=v;var t=CKEDITOR.document.getById(this._.id);return t?(t.setState(v,"cke_button"),v==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled"),this.hasArrow?(v=v==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(v)):v==CKEDITOR.TRISTATE_ON?t.setAttribute("aria-pressed",!0):t.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(v){if(this._.feature){return this._.feature}var t=this;!this.allowedContent&&!this.requiredContent&&this.command&&(t=v.getCommand(this.command)||t);return this._.feature=t}};CKEDITOR.ui.prototype.addButton=function(v,t){this.add(v,CKEDITOR.UI_BUTTON,t)};CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function t(v){var x=this._;x.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(v),x.on?x.panel.hide():x.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(v){var x=v.panel||{};delete v.panel;this.base(v);this.document=x.parent&&x.parent.getDocument()||CKEDITOR.document;x.block={attributes:x.attributes};this.hasArrow=x.toolbarRelated=!0;this.click=t;this._={panelDefinition:x}},statics:{handler:{create:function(v){return new CKEDITOR.ui.panelButton(v)}}},proto:{createPanel:function(v){var G=this._;if(!G.panel){var F=this._.panelDefinition,E=this._.panelDefinition.block,B=F.parent||CKEDITOR.document.getBody(),y=this._.panel=new CKEDITOR.ui.floatPanel(v,B,F),F=y.addBlock(G.id,E),x=this;y.onShow=function(){x.className&&this.element.addClass(x.className+"_panel");x.setState(CKEDITOR.TRISTATE_ON);G.on=1;x.editorFocus&&v.focus();if(x.onOpen){x.onOpen()}};y.onHide=function(H){x.className&&this.element.getFirst().removeClass(x.className+"_panel");x.setState(x.modes&&x.modes[v.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);G.on=0;if(!H&&x.onClose){x.onClose()}};y.onEscape=function(){y.hide(1);x.document.getById(G.id).focus()};if(this.onBlock){this.onBlock(y,F)}F.onHide=function(){G.on=0;x.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}});CKEDITOR.UI_PANELBUTTON="panelbutton";CKEDITOR.plugins.add("panel",{beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL="panel";CKEDITOR.ui.panel=function(v,t){t&&CKEDITOR.tools.extend(this,t);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=v;this.isFramed=this.forceIFrame||this.css.length;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(t){return new CKEDITOR.ui.panel(t)}};var z=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),d=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),jr=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(v,t){this.getHolderElement=function(){var E=this._.holder;if(!E){if(this.isFramed){var E=this.document.getById(this.id+"_frame"),B=E.getParent(),E=E.getFrameDocument();CKEDITOR.env.iOS&&B.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});B=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0;if(this.onLoad){this.onLoad()}},this));E.write(jr.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+B+");"},y)));E.getWindow().$.CKEDITOR=CKEDITOR;E.on("key"+(CKEDITOR.env.opera?"press":"down"),function(G){var F=G.data.getKeystroke(),H=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(F)?G.data.preventDefault():(27==F||F==("rtl"==H?39:37))&&this.onEscape&&!1===this.onEscape(F)&&G.data.preventDefault()},this);E=E.getBody();E.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(B)}else{E=this.document.getById(this.id)}this._.holder=E}return E};var y={editorId:v.id,id:this.id,langCode:v.langCode,dir:v.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":v.config.baseFloatZIndex+1};if(this.isFramed){var x=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";y.frame=d.output({id:this.id+"_frame",src:x})}x=z.output(y);t&&t.push(x);return x},addBlock:function(v,t){t=this._.blocks[v]=t instanceof CKEDITOR.ui.panel.block?t:new CKEDITOR.ui.panel.block(this.getHolderElement(),t);this._.currentBlock||this.showBlock(v);return t},getBlock:function(t){return this._.blocks[t]},showBlock:function(v){v=this._.blocks[v];var t=this._.currentBlock,x=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");t&&t.hide();this._.currentBlock=v;CKEDITOR.fire("ariaWidget",x);v._.focusIndex=-1;this._.onKeyDown=v.onKeyDown&&CKEDITOR.tools.bind(v.onKeyDown,v);v.show();return v},destroy:function(){this.element&&this.element.remove()}};CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(v,t){this.element=v.append(v.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}}));t&&CKEDITOR.tools.extend(this,t);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]});this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(t){-1!=t&&(t=this.element.getElementsByTag("a").getItem(this._.focusIndex=t),(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&t.getDocument().getWindow().focus(),t.focus(),this.onMark&&this.onMark(t))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){(!this.onHide||!0!==this.onHide.call(this))&&this.element.setStyle("display","none")},onKeyDown:function(v,t){var B=this.keys[v];switch(B){case"next":for(var y=this._.focusIndex,B=this.element.getElementsByTag("a"),x;x=B.getItem(++y);){if(x.getAttribute("_cke_focus")&&x.$.offsetWidth){this._.focusIndex=y;x.focus();break}}return !x&&!t?(this._.focusIndex=-1,this.onKeyDown(v,1)):!1;case"prev":y=this._.focusIndex;for(B=this.element.getElementsByTag("a");0<y&&(x=B.getItem(--y));){if(x.getAttribute("_cke_focus")&&x.$.offsetWidth){this._.focusIndex=y;x.focus();break}x=null}return !x&&!t?(this._.focusIndex=B.count(),this.onKeyDown(v,1)):!1;case"click":case"mouseup":return y=this._.focusIndex,(x=0<=y&&this.element.getElementsByTag("a").getItem(y))&&(x.$[B]?x.$[B]():x.$["on"+B]()),!1}return !0}}});CKEDITOR.plugins.add("floatpanel",{requires:"panel"});var fJ={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(H,G,F,E){function B(){t.hide()}F.forceIFrame=1;F.toolbarRelated&&H.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(G=CKEDITOR.document.getById("cke_"+H.name));var y=G.getDocument(),x=G;E=E||0;E=CKEDITOR.tools.genKey(y.getUniqueId(),x.getUniqueId(),H.lang.dir,H.uiColor||"",F.css||"",E||"");var v=fJ[E];v||(v=fJ[E]=new CKEDITOR.ui.panel(y,F),v.element=x.append(CKEDITOR.dom.element.createFromHtml(v.render(H),y)),v.element.setStyles({display:"none",position:"absolute"}));E=v;var x=E.element,v=x.getFirst(),t=this;x.disableContextMenu();this.element=x;this._={editor:H,panel:E,parentElement:G,definition:F,document:y,iframe:v,children:[],dir:H.lang.dir};H.on("mode",B);H.on("resize",B);y.getWindow().on("resize",B)},proto:{addBlock:function(v,t){return this._.panel.addBlock(v,t)},addListBlock:function(v,t){return this._.panel.addListBlock(v,t)},getBlock:function(t){return this._.panel.getBlock(t)},showBlock:function(N,M,L,K,J,I){var H=this._.panel,G=H.showBlock(N);this.allowBlur(!1);N=this._.editor.editable();this._.returnFocus=N.hasFocus?N:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);var F=this.element;N=this._.iframe;N=CKEDITOR.env.ie?N:new CKEDITOR.dom.window(N.$.contentWindow);var E=F.getDocument(),B=this._.parentElement.getPositionedAncestor(),y=M.getDocumentPosition(E),E=B?B.getDocumentPosition(E):{x:0,y:0},v="rtl"==this._.dir,x=y.x+(K||0)-E.x,t=y.y+(J||0)-E.y;if(v&&(1==L||4==L)){x+=M.$.offsetWidth}else{if(!v&&(2==L||3==L)){x+=M.$.offsetWidth-1}}if(3==L||4==L){t+=M.$.offsetHeight-1}this._.panel._.offsetParentId=M.getId();F.setStyles({top:t+"px",left:0,display:""});F.setOpacity(0);F.getFirst().removeStyle("width");this._.editor.focusManager.add(N);this._.blurSet||(CKEDITOR.event.useCapture=!0,N.on("blur",function(O){this.allowBlur()&&O.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(delete this._.returnFocus,this.hide())},this),N.on("focus",function(){this._.focused=!0;this.hideChild();this.allowBlur(!0)},this),CKEDITOR.event.useCapture=!1,this._.blurSet=1);H.onEscape=CKEDITOR.tools.bind(function(O){if(this.onEscape&&!1===this.onEscape(O)){return !1}},this);CKEDITOR.tools.setTimeout(function(){var O=CKEDITOR.tools.bind(function(){F.removeStyle("width");if(G.autoSize){var R=G.element.getDocument(),R=(CKEDITOR.env.webkit?G.element:R.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<R&&(R+=(F.$.offsetWidth||0)-(F.$.clientWidth||0)+3);F.setStyle("width",R+10+"px");R=G.element.$.scrollHeight;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<R&&(R+=(F.$.offsetHeight||0)-(F.$.clientHeight||0)+3);F.setStyle("height",R+"px");H._.currentBlock.element.setStyle("display","none").removeStyle("display")}else{F.removeStyle("height")}v&&(x-=F.$.offsetWidth);F.setStyle("left",x+"px");var P=H.element.getWindow(),R=F.$.getBoundingClientRect(),P=P.getViewPaneSize(),V=R.width||R.right-R.left,U=R.height||R.bottom-R.top,T=v?R.right:P.width-R.left,S=v?P.width-R.right:R.left;v?T<V&&(x=S>V?x+V:P.width>V?x-R.left:x-R.right+P.width):T<V&&(x=S>V?x-V:P.width>V?x-R.right+P.width:x-R.left);V=R.top;P.height-R.top<U&&(t=V>U?t-U:P.height>U?t-R.bottom+P.height:t-R.top);CKEDITOR.env.ie&&(P=R=new CKEDITOR.dom.element(F.$.offsetParent),"html"==P.getName()&&(P=P.getDocument().getBody()),"rtl"==P.getComputedStyle("direction")&&(x=CKEDITOR.env.ie8Compat?x-2*F.getDocument().getDocumentElement().$.scrollLeft:x-(R.$.scrollWidth-R.$.clientWidth)));var R=F.getFirst(),Q;(Q=R.getCustomData("activePanel"))&&Q.onHide&&Q.onHide.call(this,1);R.setCustomData("activePanel",this);F.setStyles({top:t+"px",left:x+"px"});F.setOpacity(1);I&&I()},this);H.isLoaded?O():H.onLoad=O;CKEDITOR.tools.setTimeout(function(){var P=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();G.element.focus();CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=P);this.allowBlur(!0);this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this)},focus:function(){if(CKEDITOR.env.webkit){var t=CKEDITOR.document.getActive();!t.equals(this._.iframe)&&t.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var t=this._.iframe.getFrameDocument().getActive();t.is("a")&&(this._.lastFocused=t)},hide:function(t){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild();CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur();this.element.setStyle("display","none");this.visible=0;this.element.getFirst().removeCustomData("activePanel");if(t=t&&this._.returnFocus){CKEDITOR.env.webkit&&t.type&&t.getWindow().$.focus(),t.focus()}delete this._.lastFocused;this._.editor.fire("panelHide",this)}},allowBlur:function(v){var t=this._.panel;void 0!=v&&(t.allowBlur=v);return t.allowBlur},showAsChild:function(v,t,E,B,y,x){this._.activeChild==v&&v._.panel._.offsetParentId==E.getId()||(this.hideChild(),v.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=v,this._.focused=!1,v.showBlock(t,E,B,y,x),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){v.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(v){var t=this._.activeChild;t&&(delete t.onHide,delete this._.activeChild,t.hide(),v&&this.focus())}}});CKEDITOR.on("instanceDestroyed",function(){var v=CKEDITOR.tools.isEmpty(CKEDITOR.instances),t;for(t in fJ){var x=fJ[t];v?x.destroy():x.element.hide()}v&&(fJ={})});CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(v){function t(G,K,J,I){var H=new CKEDITOR.style(y["colorButton_"+K+"Style"]),F=CKEDITOR.tools.getNextId()+"_colorBox";v.ui.add(G,CKEDITOR.UI_PANELBUTTON,{label:J,title:J,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+I,allowedContent:H,requiredContent:H,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":x.panelTitle}},onBlock:function(L,O){O.autoSize=!0;O.element.addClass("cke_colorblock");O.element.setHtml(E(L,K,F));O.element.getDocument().getBody().setStyle("overflow","hidden");CKEDITOR.ui.fire("ready",this);var N=O.keys,M="rtl"==v.lang.dir;N[M?37:39]="next";N[40]="next";N[9]="next";N[M?39:37]="prev";N[38]="prev";N[CKEDITOR.SHIFT+9]="prev";N[32]="click"},refresh:function(){v.activeFilter.check(H)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var L=v.getSelection(),L=L&&L.getStartElement(),L=v.elementPath(L),M;if(L){L=L.block||L.blockLimit||v.document.getBody();do{M=L&&L.getComputedStyle("back"==K?"background-color":"color")||"transparent"}while("back"==K&&"transparent"==M&&L&&(L=L.getParent()));if(!M||"transparent"==M){M="#ffffff"}this._.panel._.iframe.getFrameDocument().getById(F).setStyle("background-color",M);return M}}})}function E(N,M,L){var K=[],J=y.colorButton_colors.split(","),I=CKEDITOR.tools.addFunction(function(S,R){if("?"==S){var Q=arguments.callee,P=function(T){this.removeListener("ok",P);this.removeListener("cancel",P);"ok"==T.name&&Q(this.getContentElement("picker","selectedColor").getValue(),R)};v.openDialog("colordialog",function(){this.on("ok",P);this.on("cancel",P)})}else{v.focus();N.hide();v.fire("saveSnapshot");v.removeStyle(new CKEDITOR.style(y["colorButton_"+R+"Style"],{color:"inherit"}));if(S){var O=y["colorButton_"+R+"Style"];O.childRule="back"==R?function(T){return B(T)}:function(T){return !(T.is("a")||T.getElementsByTag("a").count())||B(T)};v.applyStyle(new CKEDITOR.style(O,{color:S}))}v.fire("saveSnapshot")}});K.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',x.auto,'" onclick="CKEDITOR.tools.callFunction(',I,",null,'",M,"');return false;\" href=\"javascript:void('",x.auto,'\')" role="option"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" id="',L,'"></span></td><td colspan=7 align=center>',x.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(L=0;L<J.length;L++){0===L%8&&K.push("</tr><tr>");var G=J[L].split("/"),H=G[0],F=G[1]||H;G[1]||(H="#"+H.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));G=v.lang.colorbutton.colors[F]||F;K.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',G,'" onclick="CKEDITOR.tools.callFunction(',I,",'",H,"','",M,"'); return false;\" href=\"javascript:void('",G,'\')" role="option"><span class="cke_colorbox" style="background-color:#',F,'"></span></a></td>')}(v.plugins.colordialog&&void 0===y.colorButton_enableMore||y.colorButton_enableMore)&&K.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',x.more,'" onclick="CKEDITOR.tools.callFunction(',I,",'?','",M,"');return false;\" href=\"javascript:void('",x.more,"')\"",' role="option">',x.more,"</a></td>");K.push("</tr></table>");return K.join("")}function B(F){return"false"==F.getAttribute("contentEditable")||F.getAttribute("data-nostyle")}var y=v.config,x=v.lang.colorbutton;CKEDITOR.env.hc||(t("TextColor","fore",x.textColorTitle,10),t("BGColor","back",x.bgColorTitle,20))}});CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF";CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};CKEDITOR.plugins.colordialog={requires:"dialog",init:function(v){var t=new CKEDITOR.dialogCommand("colordialog");t.editorFocus=!1;v.addCommand("colordialog",t);CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js");v.getColorFromDialog=function(x,E){var B=function(F){this.removeListener("ok",B);this.removeListener("cancel",B);F="ok"==F.name?this.getValueOf("picker","selectedColor"):null;x.call(E,F)},y=function(F){F.on("ok",B);F.on("cancel",B)};v.execCommand("colordialog");if(v._.storedDialogs&&v._.storedDialogs.colordialog){y(v._.storedDialogs.colordialog)}else{CKEDITOR.on("dialogDefinition",function(G){if("colordialog"==G.data.name){var F=G.data.definition;G.removeListener();F.onLoad=CKEDITOR.tools.override(F.onLoad,function(H){return function(){y(this);F.onLoad=H;"function"==typeof H&&H.call(this)}})}})}}}};CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog);CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(t){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js"));t.addCommand("templates",new CKEDITOR.dialogCommand("templates"));t.ui.addButton&&t.ui.addButton("Templates",{label:t.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var c7={},cP={};CKEDITOR.addTemplates=function(v,t){c7[v]=t};CKEDITOR.getTemplates=function(t){return c7[t]};CKEDITOR.loadTemplates=function(v,t){for(var B=[],y=0,x=v.length;y<x;y++){cP[v[y]]||(B.push(v[y]),cP[v[y]]=1)}B.length?CKEDITOR.scriptLoader.load(B,t):setTimeout(t,0)};CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")];CKEDITOR.config.templates_replaceContent=!0;CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(v){for(var t=v.config.menu_groups.split(","),B=v._.menuGroups={},y=v._.menuItems={},x=0;x<t.length;x++){B[t[x]]=x+1}v.addMenuGroup=function(F,E){B[F]=E||100};v.addMenuItem=function(F,E){B[E.group]&&(y[F]=new CKEDITOR.menuItem(this,F,E))};v.addMenuItems=function(F){for(var E in F){this.addMenuItem(E,F[E])}};v.getMenuItem=function(E){return y[E]};v.removeMenuItem=function(E){delete y[E]}}});var dP='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac){dP+=' onkeypress="return false;"'}CKEDITOR.env.gecko&&(dP+=' onblur="this.style.cssText = this.style.cssText;"');var dP=dP+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),iO=CKEDITOR.addTemplate("menuItem",dP+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),bS=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(v,t){t=this._.definition=t||{};this.id=CKEDITOR.tools.getNextId();this.editor=v;this.items=[];this._.listeners=[];this._.level=t.level||1;var y=CKEDITOR.tools.extend({},t.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),x=y.block.attributes=y.attributes||{};!x.role&&(x.role="menu");this._.panelDefinition=y},_:{onShow:function(){var v=this.editor.getSelection(),t=v&&v.getStartElement(),G=this.editor.elementPath(),F=this._.listeners;this.removeAll();for(var E=0;E<F.length;E++){var B=F[E](t,v,G);if(B){for(var y in B){var x=this.editor.getMenuItem(y);if(x&&(!x.command||this.editor.getCommand(x.command).state)){x.state=B[y],this.add(x)}}}}},onClick:function(t){this.hide();if(t.onClick){t.onClick()}else{t.command&&this.editor.execCommand(t.command)}},onEscape:function(v){var t=this.parent;t?t._.panel.hideChild(1):27==v&&this.hide(1);return !1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(v){var t=this._.subMenu,E=this.items[v];if(E=E.getItems&&E.getItems()){t?t.removeAll():(t=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),t.parent=this,t._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var B in E){var y=this.editor.getMenuItem(B);y&&(y.state=E[B],t.add(y))}var x=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+(""+v));setTimeout(function(){t.show(x,2)},0)}else{this._.panel.hideChild(1)}}},proto:{add:function(t){t.order||(t.order=this.items.length);this.items.push(t)},removeAll:function(){this.items=[]},show:function(L,K,J,I){if(this.parent||!(this._.onShow(),!this.items.length)){K=K||("rtl"==this.editor.lang.dir?2:1);var H=this.items,G=this.editor,F=this._.panel,E=this._.element;if(!F){F=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);F.onEscape=CKEDITOR.tools.bind(function(M){if(!1===this._.onEscape(M)){return !1}},this);F.onShow=function(){F._.panel.getHolderElement().getParent().addClass("cke cke_reset_all")};F.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);E=F.addBlock(this.id,this._.panelDefinition.block);E.autoSize=!0;var B=E.keys;B[40]="next";B[9]="next";B[38]="prev";B[CKEDITOR.SHIFT+9]="prev";B["rtl"==G.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";B[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(B[13]="mouseup");E=this._.element=E.element;B=E.getDocument();B.getBody().setStyle("overflow","hidden");B.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(M){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,G.config.menu_subMenuDelay||400,this,[M])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this);this._.itemClickFn=CKEDITOR.tools.addFunction(function(N){var M=this.items[N];if(M.state==CKEDITOR.TRISTATE_DISABLED){this.hide(1)}else{if(M.getItems){this._.showSubMenu(N)}else{this._.onClick(M)}}},this)}H.sort(function(N,M){return N.group<M.group?-1:N.group>M.group?1:N.order<M.order?-1:N.order>M.order?1:0});for(var B=G.elementPath(),B=['<div class="cke_menu'+(B&&B.direction()!=G.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],y=H.length,x=y&&H[0].group,v=0;v<y;v++){var t=H[v];x!=t.group&&(B.push('<div class="cke_menuseparator" role="separator"></div>'),x=t.group);t.render(this,v,B)}B.push("</div>");E.setHtml(B.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(F,this.id,L,K,J,I):F.showBlock(this.id,L,K,J,I);G.fire("menuShow",[F])}},addListener:function(t){this._.listeners.push(t)},hide:function(t){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(t)}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(v,t,x){CKEDITOR.tools.extend(this,x,{order:0,className:"cke_menubutton__"+t});this.group=v._.menuGroups[this.group];this.editor=v;this.name=t},proto:{render:function(I,H,G){var F=I.id+(""+H),E="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,B="",y=E==CKEDITOR.TRISTATE_ON?"on":E==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in {menuitemcheckbox:1,menuitemradio:1}&&(B=' aria-checked="'+(E==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var x=this.getItems,v="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",t=this.name;this.icon&&!/\./.test(this.icon)&&(t=this.icon);I={id:F,name:this.name,iconName:t,label:this.label,cls:this.className||"",state:y,hasPopup:x?"true":"false",disabled:E==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:I._.itemOverFn,moveOutFn:I._.itemOutFn,clickFn:I._.itemClickFn,index:H,iconStyle:CKEDITOR.skin.getIconStyle(t,"rtl"==this.editor.lang.dir,t==this.icon?null:this.icon,this.iconOffset),arrowHtml:x?bS.output({label:v}):"",role:this.role?this.role:"menuitem",ariaChecked:B};iO.output(I,G)}}});CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div";CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(t){this.base.call(this,t,{panel:{className:"cke_menu_panel",attributes:{"aria-label":t.lang.contextmenu.options}}})},proto:{addTarget:function(v,t){v.on("contextmenu",function(B){B=B.data;var I=CKEDITOR.env.webkit?y:CKEDITOR.env.mac?B.$.metaKey:B.$.ctrlKey;if(!t||!I){B.preventDefault();var H=B.getTarget().getDocument(),G=B.getTarget().getDocument().getDocumentElement(),I=!H.equals(CKEDITOR.document),H=H.getWindow().getScrollPosition(),F=I?B.$.clientX:B.$.pageX||H.x+B.$.clientX,E=I?B.$.clientY:B.$.pageY||H.y+B.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(G,null,F,E)},CKEDITOR.env.ie?200:0,this)}},this);if(CKEDITOR.env.webkit){var y,x=function(){y=0};v.on("keydown",function(B){y=CKEDITOR.env.mac?B.data.$.metaKey:B.data.$.ctrlKey});v.on("keyup",x);v.on("contextmenu",x)}},open:function(v,t,y,x){this.editor.focus();v=v||CKEDITOR.document.getDocumentElement();this.editor.selectionChange(1);this.show(v,t,y,x)}}})},beforeInit:function(v){var t=v.contextMenu=new CKEDITOR.plugins.contextMenu(v);v.on("contentDom",function(){t.addTarget(v.editable(),!1!==v.config.browserContextMenuOnCtrl)});v.addCommand("contextMenu",{exec:function(){v.contextMenu.open(v.document.getBody())}});v.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu");v.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}});CKEDITOR.plugins.add("div",{requires:"dialog",init:function(v){if(!v.blockless){var t=v.lang.div,x="div(*)";CKEDITOR.dialog.isTabEnabled(v,"editdiv","advanced")&&(x+=";div[dir,id,lang,title]{*}");v.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:x,requiredContent:"div",contextSensitive:!0,refresh:function(B,y){this.setState("div" in (B.config.div_wrapTable?y.root:y.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}}));v.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"}));v.addCommand("removediv",{requiredContent:"div",exec:function(E){function y(K){if((K=CKEDITOR.plugins.div.getSurroundDiv(E,K))&&!K.data("cke-div-added")){F.push(K),K.data("cke-div-added")}}for(var J=E.getSelection(),I=J&&J.getRanges(),H,G=J.createBookmarks(),F=[],B=0;B<I.length;B++){H=I[B],H.collapsed?y(J.getStartElement()):(H=new CKEDITOR.dom.walker(H),H.evaluator=y,H.lastForward())}for(B=0;B<F.length;B++){F[B].remove(!0)}J.selectBookmarks(G)}});v.ui.addButton&&v.ui.addButton("CreateDiv",{label:t.toolbar,command:"creatediv",toolbar:"blocks,50"});v.addMenuItems&&(v.addMenuItems({editdiv:{label:t.edit,command:"editdiv",group:"div",order:1},removediv:{label:t.remove,command:"removediv",group:"div",order:5}}),v.contextMenu&&v.contextMenu.addListener(function(y){return !y||y.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(v)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}));CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js");CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}});CKEDITOR.plugins.div={getSurroundDiv:function(v,t){var x=v.elementPath(t);return v.elementPath(x.blockLimit).contains(function(y){return y.is("div")&&!y.isReadOnly()},1)}};CKEDITOR.plugins.add("resize",{init:function(M){var L,K,J,I,H=M.config,G=M.ui.spaceId("resizer"),F=M.element?M.element.getDirection(1):"ltr";!H.resize_dir&&(H.resize_dir="vertical");void 0==H.resize_maxWidth&&(H.resize_maxWidth=3000);void 0==H.resize_maxHeight&&(H.resize_maxHeight=3000);void 0==H.resize_minWidth&&(H.resize_minWidth=750);void 0==H.resize_minHeight&&(H.resize_minHeight=250);if(!1!==H.resize_enabled){var E=null,B=("both"==H.resize_dir||"horizontal"==H.resize_dir)&&H.resize_minWidth!=H.resize_maxWidth,y=("both"==H.resize_dir||"vertical"==H.resize_dir)&&H.resize_minHeight!=H.resize_maxHeight,x=function(P){var O=L,N=K,Q=O+(P.data.$.screenX-J)*("rtl"==F?-1:1);P=N+(P.data.$.screenY-I);B&&(O=Math.max(H.resize_minWidth,Math.min(Q,H.resize_maxWidth)));y&&(N=Math.max(H.resize_minHeight,Math.min(P,H.resize_maxHeight)));M.resize(B?O:null,N)},t=function(){CKEDITOR.document.removeListener("mousemove",x);CKEDITOR.document.removeListener("mouseup",t);M.document&&(M.document.removeListener("mousemove",x),M.document.removeListener("mouseup",t))},v=CKEDITOR.tools.addFunction(function(N){E||(E=M.getResizable());L=E.$.offsetWidth||0;K=E.$.offsetHeight||0;J=N.screenX;I=N.screenY;H.resize_minWidth>L&&(H.resize_minWidth=L);H.resize_minHeight>K&&(H.resize_minHeight=K);CKEDITOR.document.on("mousemove",x);CKEDITOR.document.on("mouseup",t);M.document&&(M.document.on("mousemove",x),M.document.on("mouseup",t));N.preventDefault&&N.preventDefault()});M.on("destroy",function(){CKEDITOR.tools.removeFunction(v)});M.on("uiSpace",function(N){if("bottom"==N.data.space){var P="";B&&!y&&(P=" cke_resizer_horizontal");!B&&y&&(P=" cke_resizer_vertical");var O='<span id="'+G+'" class="cke_resizer'+P+" cke_resizer_"+F+'" title="'+CKEDITOR.tools.htmlEncode(M.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+v+', event)">'+("ltr"==F?"\u25e2":"\u25e3")+"</span>";"ltr"==F&&"ltr"==P?N.data.html+=O:N.data.html=O+N.data.html}},M,null,100);M.on("maximize",function(N){M.ui.space("resizer")[N.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}});var cx=function(t){return t._.toolbarGroups||(t._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])},b5=function(){this.toolbars=[];this.focusCommandExecuted=!1};b5.prototype.focus=function(){for(var v=0,t;t=this.toolbars[v++];){for(var y=0,x;x=t.items[y++];){if(x.focus){x.focus();return}}}};var bs={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(t){t.toolbox&&(t.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){t.toolbox.focus()},100):t.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(v){var t,x=function(H,G){var F,E="rtl"==v.lang.dir,B=v.config.toolbarGroupCycling,y=E?37:39,E=E?39:37,B=void 0===B||B;switch(G){case 9:case CKEDITOR.SHIFT+9:for(;!F||!F.items.length;){if(F=9==G?(F?F.next:H.toolbar.next)||v.toolbox.toolbars[0]:(F?F.previous:H.toolbar.previous)||v.toolbox.toolbars[v.toolbox.toolbars.length-1],F.items.length){for(H=F.items[t?F.items.length-1:0];H&&!H.focus;){(H=t?H.previous:H.next)||(F=0)}}}H&&H.focus();return !1;case y:F=H;do{F=F.next,!F&&B&&(F=H.toolbar.items[0])}while(F&&!F.focus);F?F.focus():x(H,9);return !1;case 40:return H.button&&H.button.hasArrow?(v.once("panelShow",function(I){I.data._.panel._.currentBlock.onKeyDown(40)}),H.execute()):x(H,40==G?y:E),!1;case E:case 38:F=H;do{F=F.previous,!F&&B&&(F=H.toolbar.items[H.toolbar.items.length-1])}while(F&&!F.focus);F?F.focus():(t=1,x(H,CKEDITOR.SHIFT+9),t=0);return !1;case 27:return v.focus(),!1;case 13:case 32:return H.execute(),!1}return !0};v.on("uiSpace",function(U){if(U.data.space==v.config.toolbarLocation){U.removeListener();v.toolbox=new b5;var T=CKEDITOR.tools.getNextId(),S=['<span id="',T,'" class="cke_voice_label">',v.lang.toolbar.toolbars,"</span>",'<span id="'+v.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',T,'" onmousedown="return false;">'],T=!1!==v.config.toolbarStartupExpanded,R,Q;v.config.toolbarCanCollapse&&v.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&S.push('<span class="cke_toolbox_main"'+(T?">":' style="display:none">'));var P=v.toolbox.toolbars,O;O=function(V,X){if(X.length){V.items?V.items.push(v.ui.create("-")):V.items=[];for(var W;W=X.shift();){if(W="string"==typeof W?W:W.name,!N||-1==CKEDITOR.tools.indexOf(N,W)){(W=v.ui.create(W))&&v.addFeature(W)&&V.items.push(W)}}}};var N=v.config.removeButtons,N=N&&N.split(","),M=v.config.toolbar;"string"==typeof M&&(M=v.config["toolbar_"+M]);if(M){var K=M,M=[],L,J,I;for(L=0;L<K.length;++L){J=K[L],I={},"/"==J?M.push(J):CKEDITOR.tools.isArray(J)?(O(I,CKEDITOR.tools.clone(J)),M.push(I)):J.items&&(O(I,CKEDITOR.tools.clone(J.items)),I.name=J.name,M.push(I))}O=M}else{M={};for(L in v.ui.items){J=v.ui.items[L],I=J.toolbar||"others",I=I.split(","),J=I[0],I=parseInt(I[1]||-1,10),M[J]||(M[J]=[]),M[J].push({name:L,order:I})}for(J in M){M[J]=M[J].sort(function(W,V){return W.order==V.order?0:0>V.order?-1:0>W.order?1:W.order<V.order?-1:1})}L=CKEDITOR.tools.clone(v.config.toolbarGroups)||cx(v);for(J=0;J<L.length;J++){if(I=L[J],"/"!=I){"string"==typeof I&&(I=L[J]={name:I});var G=I.groups;if(G){for(var B=0;B<G.length;B++){K=G[B],(K=M[K])&&O(I,K)}}(K=M[I.name])&&O(I,K)}}O=L}O=v.toolbar=O;for(K=0;K<O.length;K++){var E=0;if(J=O[K]){if(R&&(S.push("</span>"),Q=R=0),"/"===J){S.push('<span class="cke_toolbar_break"></span>')}else{I=J.items||J;for(G=0;G<I.length;G++){var B=I[G],F;if(B){if(B.type==CKEDITOR.UI_SEPARATOR){Q=R&&B}else{F=!1!==B.canGroup;if(!E){M=CKEDITOR.tools.getNextId();E={id:M,items:[]};L=J.name&&(v.lang.toolbar.toolbarGroups[J.name]||J.name);S.push('<span id="',M,'" class="cke_toolbar"',L?' aria-labelledby="'+M+'_label"':"",' role="toolbar">');L&&S.push('<span id="',M,'_label" class="cke_voice_label">',L,"</span>");S.push('<span class="cke_toolbar_start"></span>');var y=P.push(E)-1;0<y&&(E.previous=P[y-1],E.previous.next=E)}F?R||(S.push('<span class="cke_toolgroup" role="presentation">'),R=1):R&&(S.push("</span>"),R=0);M=function(V){V=V.render(v,S);y=E.items.push(V)-1;0<y&&(V.previous=E.items[y-1],V.previous.next=V);V.toolbar=E;V.onkey=x;V.onfocus=function(){v.toolbox.focusCommandExecuted||v.focus()}};Q&&(M(Q),Q=0);M(B)}}}R&&(S.push("</span>"),Q=R=0);E&&S.push('<span class="cke_toolbar_end"></span></span>')}}}v.config.toolbarCanCollapse&&S.push("</span>");if(v.config.toolbarCanCollapse&&v.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var H=CKEDITOR.tools.addFunction(function(){v.execCommand("toolbarCollapse")});v.on("destroy",function(){CKEDITOR.tools.removeFunction(H)});v.addCommand("toolbarCollapse",{readOnly:1,exec:function(W){var V=W.ui.space("toolbar_collapser"),ac=V.getPrevious(),ab=W.ui.space("contents"),aa=ac.getParent(),Z=parseInt(ab.$.style.height,10),Y=aa.$.offsetHeight,X=V.hasClass("cke_toolbox_collapser_min");X?(ac.show(),V.removeClass("cke_toolbox_collapser_min"),V.setAttribute("title",W.lang.toolbar.toolbarCollapse)):(ac.hide(),V.addClass("cke_toolbox_collapser_min"),V.setAttribute("title",W.lang.toolbar.toolbarExpand));V.getFirst().setText(X?"\u25b2":"\u25c0");ab.setStyle("height",Z-(aa.$.offsetHeight-Y)+"px");W.fire("resize")},modes:{wysiwyg:1,source:1}});v.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");S.push('<a title="'+(T?v.lang.toolbar.toolbarCollapse:v.lang.toolbar.toolbarExpand)+'" id="'+v.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser');T||S.push(" cke_toolbox_collapser_min");S.push('" onclick="CKEDITOR.tools.callFunction('+H+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}S.push("</span>");U.data.html+=S.join("")}});v.on("destroy",function(){if(this.toolbox){var B,y=0,G,F,E;for(B=this.toolbox.toolbars;y<B.length;y++){F=B[y].items;for(G=0;G<F.length;G++){E=F[G],E.clickFn&&CKEDITOR.tools.removeFunction(E.clickFn),E.keyDownFn&&CKEDITOR.tools.removeFunction(E.keyDownFn)}}}});v.on("uiReady",function(){var y=v.ui.space("toolbox");y&&v.focusManager.add(y,1)});v.addCommand("toolbarFocus",bs);v.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");v.ui.add("-",CKEDITOR.UI_SEPARATOR,{});v.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(B,y){y.push('<span class="cke_toolbar_separator" role="separator"></span>');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(v,t,E){var B=cx(this.editor),y=0===t,x={name:v};if(E){if(E=CKEDITOR.tools.search(B,function(F){return F.name==E})){!E.groups&&(E.groups=[]);if(t&&(t=CKEDITOR.tools.indexOf(E.groups,t),0<=t)){E.groups.splice(t+1,0,v);return}y?E.groups.splice(0,0,v):E.groups.push(v);return}t=null}t&&(t=CKEDITOR.tools.indexOf(B,function(F){return F.name==t}));y?B.splice(0,0,v):"number"==typeof t?B.splice(t+1,0,x):B.push(v)};CKEDITOR.UI_SEPARATOR="separator";CKEDITOR.config.toolbarLocation="top";var bE;bE={editorFocus:!1,readOnly:1,exec:function(t){(t=CKEDITOR.document.getById(t._.elementsPath.idBase+"0"))&&t.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}};var fr="";if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac){fr+=' onkeypress="return false;"'}CKEDITOR.env.gecko&&(fr+=' onblur="this.style.cssText = this.style.cssText;"');var a0=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+(CKEDITOR.env.gecko&&10900>CKEDITOR.env.version?' onfocus="event.preventBubble();"':"")+fr+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(t){t._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]};t.on("uiSpace",function(I){if("bottom"==I.data.space){I=I.data;var H=function(J){J=B.list[J];if(J.equals(t.editable())||"true"==J.getAttribute("contenteditable")){var K=t.createRange();K.selectNodeContents(J);K.select()}else{t.getSelection().selectElement(J)}t.focus()},G=function(){E&&E.setHtml('<span class="cke_path_empty">&nbsp;</span>');delete B.list},F=t.ui.spaceId("path"),E,B=t._.elementsPath,y=B.idBase;I.html+='<span id="'+F+'_label" class="cke_voice_label">'+t.lang.elementspath.eleLabel+'</span><span id="'+F+'" class="cke_path" role="group" aria-labelledby="'+F+'_label"><span class="cke_path_empty">&nbsp;</span></span>';t.on("uiReady",function(){var J=t.ui.space("path");J&&t.focusManager.add(J,1)});B.onClick=H;var x=CKEDITOR.tools.addFunction(H),v=CKEDITOR.tools.addFunction(function(J,M){var L=B.idBase,K;M=new CKEDITOR.dom.event(M);K="rtl"==t.lang.dir;switch(M.getKeystroke()){case K?39:37:case 9:return(K=CKEDITOR.document.getById(L+(J+1)))||(K=CKEDITOR.document.getById(L+"0")),K.focus(),!1;case K?37:39:case CKEDITOR.SHIFT+9:return(K=CKEDITOR.document.getById(L+(J-1)))||(K=CKEDITOR.document.getById(L+(B.list.length-1))),K.focus(),!1;case 27:return t.focus(),!1;case 13:case 32:return H(J),!1}return !0});t.on("selectionChange",function(){t.editable();for(var Q=[],P=B.list=[],N=[],M=B.filters,L=!0,J=t.elementPath().elements,U,R=J.length;R--;){var S=J[R],T=0;U=S.data("cke-display-name")?S.data("cke-display-name"):S.data("cke-real-element-type")?S.data("cke-real-element-type"):S.getName();L=S.hasAttribute("contenteditable")?"true"==S.getAttribute("contenteditable"):L;!L&&!S.hasAttribute("contenteditable")&&(T=1);for(var O=0;O<M.length;O++){var K=M[O](S,U);if(!1===K){T=1;break}U=K||U}T||(P.unshift(S),N.unshift(U))}P=P.length;for(M=0;M<P;M++){U=N[M],L=t.lang.elementspath.eleTitle.replace(/%1/,U),U=a0.output({id:y+M,label:L,text:U,jsTitle:"javascript:void('"+U+"')",index:M,keyDownFn:v,clickFn:x}),Q.unshift(U)}E||(E=CKEDITOR.document.getById(F));N=E;N.setHtml(Q.join("")+'<span class="cke_path_empty">&nbsp;</span>');t.fire("elementsPathUpdate",{space:N})});t.on("readOnly",G);t.on("contentDomUnload",G);t.addCommand("elementsPathFocus",bE);t.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}})}});var aC=function(v,t,x){x=v.config.forceEnterMode||x;"wysiwyg"==v.mode&&(t||(t=v.activeEnterMode),v.elementPath().isContextFor("p")||(t=CKEDITOR.ENTER_BR,x=1),v.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?bm(v,t,null,x):aU(v,t,null,x),v.fire("saveSnapshot"))},D=function(v){v=v.getSelection().getRanges(!0);for(var t=v.length-1;0<t;t--){v[t].deleteContents()}return v[0]};CKEDITOR.plugins.add("enterkey",{init:function(t){t.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(v){aC(v)}});t.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(v){aC(v,v.activeShiftEnterMode,1)}});t.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var aI=CKEDITOR.dom.walker.whitespaces(),ap=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(M,L,K,J){if(K=K||D(M)){var I=K.document,H=K.checkStartOfBlock(),G=K.checkEndOfBlock(),F=M.elementPath(K.startContainer).block,E=L==CKEDITOR.ENTER_DIV?"div":"p",B;if(H&&G){if(F&&(F.is("li")||F.getParent().is("li"))){K=F.getParent();B=K.getParent();J=!F.hasPrevious();var y=!F.hasNext(),E=M.getSelection(),x=E.createBookmarks(),H=F.getDirection(1),G=F.getAttribute("class"),t=F.getAttribute("style"),v=B.getDirection(1)!=H;M=M.enterMode!=CKEDITOR.ENTER_BR||v||t||G;if(B.is("li")){if(J||y){F[J?"insertBefore":"insertAfter"](B)}else{F.breakParent(B)}}else{if(M){if(B=I.createElement(L==CKEDITOR.ENTER_P?"p":"div"),v&&B.setAttribute("dir",H),t&&B.setAttribute("style",t),G&&B.setAttribute("class",G),F.moveChildren(B),J||y){B[J?"insertBefore":"insertAfter"](K)}else{F.breakParent(K),B.insertAfter(K)}}else{if(F.appendBogus(!0),J||y){for(;I=F[J?"getFirst":"getLast"]();){I[J?"insertBefore":"insertAfter"](K)}}else{for(F.breakParent(K);I=F.getLast();){I.insertAfter(K)}}}F.remove()}E.selectBookmarks(x);return}if(F&&F.getParent().is("blockquote")){F.breakParent(F.getParent());F.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||F.getPrevious().remove();F.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||F.getNext().remove();K.moveToElementEditStart(F);K.select();return}}else{if(F&&F.is("pre")&&!G){bm(M,L,K,J);return}}if(G=K.splitBlock(E)){L=G.previousBlock;F=G.nextBlock;M=G.wasStartOfBlock;H=G.wasEndOfBlock;if(F){x=F.getParent(),x.is("li")&&(F.breakParent(x),F.move(F.getNext(),1))}else{if(L&&(x=L.getParent())&&x.is("li")){L.breakParent(x),x=L.getNext(),K.moveToElementEditStart(x),L.move(L.getPrevious())}}if(!M&&!H){F.is("li")&&(B=K.clone(),B.selectNodeContents(F),B=new CKEDITOR.dom.walker(B),B.evaluator=function(N){return !(ap(N)||aI(N)||N.type==CKEDITOR.NODE_ELEMENT&&N.getName() in CKEDITOR.dtd.$inline&&!(N.getName() in CKEDITOR.dtd.$empty))},(x=B.next())&&x.type==CKEDITOR.NODE_ELEMENT&&x.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?I.createElement("br"):I.createText("\u00a0")).insertBefore(x)),F&&K.moveToElementEditStart(F)}else{if(L){if(L.is("li")||!g.test(L.getName())&&!L.is("pre")){B=L.clone()}}else{F&&(B=F.clone())}B?J&&!B.is("li")&&B.renameNode(E):x&&x.is("li")?B=x:(B=I.createElement(E),L&&(y=L.getDirection())&&B.setAttribute("dir",y));if(I=G.elementPath){J=0;for(E=I.elements.length;J<E;J++){x=I.elements[J];if(x.equals(I.block)||x.equals(I.blockLimit)){break}CKEDITOR.dtd.$removeEmpty[x.getName()]&&(x=x.clone(),B.moveChildren(x),B.append(x))}}B.appendBogus();B.getParent()||K.insertNode(B);B.is("li")&&B.removeAttribute("value");if(CKEDITOR.env.ie&&M&&(!H||!L.getChildCount())){K.moveToElementEditStart(H?L:B),K.select()}K.moveToElementEditStart(M&&!H?F:B)}K.select();K.scrollIntoView()}}},enterBr:function(v,t,G,F){if(G=G||D(v)){var E=G.document,B=G.checkEndOfBlock(),y=new CKEDITOR.dom.elementPath(v.getSelection().getStartElement()),x=y.block,y=x&&y.block.getName();!F&&"li"==y?aU(v,t,G,F):(!F&&B&&g.test(y)?(B=x.getDirection())?(E=E.createElement("div"),E.setAttribute("dir",B),E.insertAfter(x),G.setStart(E,0)):(E.createElement("br").insertAfter(x),CKEDITOR.env.gecko&&E.createText("").insertAfter(x),G.setStartAt(x.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(x="pre"==y&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?E.createText("\r"):E.createElement("br"),G.deleteContents(),G.insertNode(x),CKEDITOR.env.needsBrFiller?(E.createText("\ufeff").insertAfter(x),B&&x.getParent().appendBogus(),x.getNext().$.nodeValue="",G.setStartAt(x.getNext(),CKEDITOR.POSITION_AFTER_START)):G.setStartAt(x,CKEDITOR.POSITION_AFTER_END)),G.collapse(!0),G.select(),G.scrollIntoView())}}};var ju=CKEDITOR.plugins.enterkey,bm=ju.enterBr,aU=ju.enterBlock,g=/^h[1-6]$/,iR=function(v,t){var G={},F=[],E={nbsp:"\u00a0",shy:"\u00ad",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};v=v.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(H,J){var I=t?"&"+J+";":E[J];G[I]=t?E[J]:"&"+J+";";F.push(I);return""});if(!t&&v){v=v.split(",");var B=document.createElement("div"),y;B.innerHTML="&"+v.join(";&")+";";y=B.innerHTML;B=null;for(B=0;B<y.length;B++){var x=y.charAt(B);G[x]="&"+v[B]+";";F.push(x)}}G.regex=F.join(t?"|":"");return G};CKEDITOR.plugins.add("entities",{afterInit:function(H){var G=H.config;if(H=(H=H.dataProcessor)&&H.htmlFilter){var F=[];!1!==G.basicEntities&&F.push("nbsp,gt,lt,amp");G.entities&&(F.length&&F.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),G.entities_latin&&F.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),G.entities_greek&&F.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),G.entities_additional&&F.push(G.entities_additional));var E=iR(F.join(",")),B=E.regex?"["+E.regex+"]":"a^";delete E.regex;G.entities&&G.entities_processNumerical&&(B="[^ -~]|"+B);var B=RegExp(B,"g"),y=function(I){return"force"==G.entities_processNumerical||!E[I]?"&#"+I.charCodeAt(0)+";":E[I]},x=iR("nbsp,gt,lt,amp,shy",!0),v=RegExp(x.regex,"g"),t=function(I){return x[I]};H.addRules({text:function(I){return I.replace(v,t).replace(B,y)}},{applyToAll:!0,excludeNestedEditable:!0})}}});CKEDITOR.config.basicEntities=!0;CKEDITOR.config.entities=!0;CKEDITOR.config.entities_latin=!0;CKEDITOR.config.entities_greek=!0;CKEDITOR.config.entities_additional="#39";CKEDITOR.plugins.add("popup");CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(v,t,G,F){t=t||"80%";G=G||"70%";"string"==typeof t&&1<t.length&&"%"==t.substr(t.length-1,1)&&(t=parseInt(window.screen.width*parseInt(t,10)/100,10));"string"==typeof G&&1<G.length&&"%"==G.substr(G.length-1,1)&&(G=parseInt(window.screen.height*parseInt(G,10)/100,10));640>t&&(t=640);420>G&&(G=420);var E=parseInt((window.screen.height-G)/2,10),B=parseInt((window.screen.width-t)/2,10);F=(F||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+t+",height="+G+",top="+E+",left="+B;var y=window.open("",null,F,!0);if(!y){return !1}try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(y.moveTo(B,E),y.resizeTo(t,G)),y.focus(),y.location.href=v}catch(x){window.open(v,null,F,!0)}return !0}});var bW=function(v,t){var y=[];if(t){for(var x in t){y.push(x+"="+encodeURIComponent(t[x]))}}else{return v}return v+(-1!=v.indexOf("?")?"&":"?")+y.join("&")},b9=function(t){t+="";return t.charAt(0).toUpperCase()+t.substr(1)},m=function(){var v=this.getDialog(),t=v.getParentEditor();t._.filebrowserSe=this;var y=t.config["filebrowser"+b9(v.getName())+"WindowWidth"]||t.config.filebrowserWindowWidth||"80%",v=t.config["filebrowser"+b9(v.getName())+"WindowHeight"]||t.config.filebrowserWindowHeight||"70%",x=this.filebrowser.params||{};x.CKEditor=t.name;x.CKEditorFuncNum=t._.filebrowserFn;x.langCode||(x.langCode=t.langCode);x=bW(this.filebrowser.url,x);t.popup(x,y,v,t.config.filebrowserWindowFeatures||t.config.fileBrowserWindowFeatures)},jz=function(){var t=this.getDialog();t.getParentEditor()._.filebrowserSe=this;return !t.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value||!t.getContentElement(this["for"][0],this["for"][1]).getAction()?!1:!0},bv=function(K,J,I,H){if(H&&H.length){for(var G,F=H.length;F--;){if(G=H[F],("hbox"==G.type||"vbox"==G.type||"fieldset"==G.type)&&bv(K,J,I,G.children),G.filebrowser){if("string"==typeof G.filebrowser&&(G.filebrowser={action:"fileButton"==G.type?"QuickUpload":"Browse",target:G.filebrowser}),"Browse"==G.filebrowser.action){var E=G.filebrowser.url;void 0===E&&(E=K.config["filebrowser"+b9(J)+"BrowseUrl"],void 0===E&&(E=K.config.filebrowserBrowseUrl));E&&(G.onClick=m,G.filebrowser.url=E,G.hidden=!1)}else{if("QuickUpload"==G.filebrowser.action&&G["for"]&&(E=G.filebrowser.url,void 0===E&&(E=K.config["filebrowser"+b9(J)+"UploadUrl"],void 0===E&&(E=K.config.filebrowserUploadUrl)),E)){var B=G.onClick;G.onClick=function(M){var L=M.sender;return B&&!1===B.call(L,M)?!1:jz.call(L,M)};G.filebrowser.url=E;G.hidden=!1;var y=K,x=I.getContents(G["for"][0]).get(G["for"][1]),v=G.filebrowser,t=v.params||{};t.CKEditor=y.name;t.CKEditorFuncNum=y._.filebrowserFn;t.langCode||(t.langCode=y.langCode);x.action=bW(v.url,t);x.filebrowser=v}}}}}},a3=function(v,t,y){if(-1!==y.indexOf(";")){y=y.split(";");for(var x=0;x<y.length;x++){if(a3(v,t,y[x])){return !0}}return !1}return(v=v.getContents(t).get(y).filebrowser)&&v.url},i7=function(v,t){var B=this._.filebrowserSe.getDialog(),y=this._.filebrowserSe["for"],x=this._.filebrowserSe.filebrowser.onSelect;y&&B.getContentElement(y[0],y[1]).reset();if(!("function"==typeof t&&!1===t.call(this._.filebrowserSe))&&!(x&&!1===x.call(this._.filebrowserSe,v,t))&&("string"==typeof t&&t&&alert(t),v&&(y=this._.filebrowserSe,B=y.getDialog(),y=y.filebrowser.target||null))){if(y=y.split(":"),x=B.getContentElement(y[0],y[1])){x.setValue(v),B.selectPage(y[0])}}};CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(t){t._.filebrowserFn=CKEDITOR.tools.addFunction(i7,t);t.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}});CKEDITOR.on("dialogDefinition",function(v){if(v.editor.plugins.filebrowser){for(var t=v.data.definition,y,x=0;x<t.contents.length;++x){if(y=t.contents[x]){bv(v.editor,v.data.name,t,y.elements),y.hidden&&y.filebrowser&&(y.hidden=!a3(t,y.id,y.filebrowser))}}}});CKEDITOR.plugins.add("find",{requires:"dialog",init:function(v){var t=v.addCommand("find",new CKEDITOR.dialogCommand("find"));t.canUndo=!1;t.readOnly=1;v.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=!1;v.ui.addButton&&(v.ui.addButton("Find",{label:v.lang.find.find,command:"find",toolbar:"find,10"}),v.ui.addButton("Replace",{label:v.lang.find.replace,command:"replace",toolbar:"find,20"}));CKEDITOR.dialog.add("find",this.path+"dialogs/find.js");CKEDITOR.dialog.add("replace",this.path+"dialogs/find.js")}});CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}};var bI=function(v,t){var y=aL.exec(v),x=aL.exec(t);if(y){if(!y[2]&&"px"==x[2]){return x[1]}if("px"==y[2]&&!x[2]){return x[1]+"px"}}return t},aw=CKEDITOR.htmlParser.cssStyle,bq=CKEDITOR.tools.cssLength,aL=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,iD={elements:{$:function(v){var t=v.attributes;if((t=(t=(t=t&&t["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(t)))&&t.children[0])&&v.attributes["data-cke-resizable"]){var y=(new aw(v)).rules;v=t.attributes;var x=y.width,y=y.height;x&&(v.width=bI(v.width,x));y&&(v.height=bI(v.height,y))}return t}}},at=CKEDITOR.plugins.add("fakeobjects",{init:function(t){t.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(t){(t=(t=t.dataProcessor)&&t.htmlFilter)&&t.addRules(iD)}});CKEDITOR.editor.prototype.createFakeElement=function(v,t,B,y){var x=this.lang.fakeobjects,x=x[B]||x.unknown;t={"class":t,"data-cke-realelement":encodeURIComponent(v.getOuterHtml()),"data-cke-real-node-type":v.type,alt:x,title:x,align:v.getAttribute("align")||""};CKEDITOR.env.hc||(t.src=CKEDITOR.getUrl(at.path+"images/spacer.gif"));B&&(t["data-cke-real-element-type"]=B);y&&(t["data-cke-resizable"]=y,B=new aw,y=v.getAttribute("width"),v=v.getAttribute("height"),y&&(B.rules.width=bq(y)),v&&(B.rules.height=bq(v)),B.populate(t));return this.document.createElement("img",{attributes:t})};CKEDITOR.editor.prototype.createFakeParserElement=function(v,t,E,B){var y=this.lang.fakeobjects,y=y[E]||y.unknown,x;x=new CKEDITOR.htmlParser.basicWriter;v.writeHtml(x);x=x.getHtml();t={"class":t,"data-cke-realelement":encodeURIComponent(x),"data-cke-real-node-type":v.type,alt:y,title:y,align:v.attributes.align||""};CKEDITOR.env.hc||(t.src=CKEDITOR.getUrl(at.path+"images/spacer.gif"));E&&(t["data-cke-real-element-type"]=E);B&&(t["data-cke-resizable"]=B,B=v.attributes,v=new aw,E=B.width,B=B.height,void 0!=E&&(v.rules.width=bq(E)),void 0!=B&&(v.rules.height=bq(B)),v.populate(t));return new CKEDITOR.htmlParser.element("img",t)};CKEDITOR.editor.prototype.restoreRealElement=function(v){if(v.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT){return null}var t=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(v.data("cke-realelement")),this.document);if(v.data("cke-resizable")){var x=v.getStyle("width");v=v.getStyle("height");x&&t.setAttribute("width",bI(t.getAttribute("width"),x));v&&t.setAttribute("height",bI(t.getAttribute("height"),v))}return t};var s=function(t){t=t.attributes;return"application/x-shockwave-flash"==t.type||hM.test(t.src||"")},a=function(v,t){return v.createFakeParserElement(t,"cke_flash","flash",!0)},hM=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(v){var t="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(v,"flash","properties")&&(t+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]");CKEDITOR.dialog.isTabEnabled(v,"flash","advanced")&&(t+=";object[id]{*}; embed[bgcolor]{*}(*)");v.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:t,requiredContent:"embed"}));v.ui.addButton&&v.ui.addButton("Flash",{label:v.lang.common.flash,command:"flash",toolbar:"insert,20"});CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js");v.addMenuItems&&v.addMenuItems({flash:{label:v.lang.flash.properties,command:"flash",group:"flash"}});v.on("doubleclick",function(y){var x=y.data.element;x.is("img")&&"flash"==x.data("cke-real-element-type")&&(y.data.dialog="flash")});v.contextMenu&&v.contextMenu.addListener(function(x){if(x&&x.is("img")&&!x.isReadOnly()&&"flash"==x.data("cke-real-element-type")){return{flash:CKEDITOR.TRISTATE_OFF}}})},afterInit:function(v){var t=v.dataProcessor;(t=t&&t.dataFilter)&&t.addRules({elements:{"cke:object":function(x){var y=x.attributes;if((!y.classid||!(""+y.classid).toLowerCase())&&!s(x)){for(y=0;y<x.children.length;y++){if("cke:embed"==x.children[y].name){if(!s(x.children[y])){break}return a(v,x)}}return null}return a(v,x)},"cke:embed":function(x){return !s(x)?null:a(v,x)}}},5)}});CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1});var hp=CKEDITOR.addTemplate("floatcontainer",'<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),hX=CKEDITOR.document.getWindow(),p=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(t){t.on("loaded",function(){var T=this,S=T.config,R=T.fire("uiSpace",{space:"top",html:""}).html,Q,P=function(V,U,W){y.setStyle(U,p(W));y.setStyle("position",V)},O=function(V){var U=M.getDocumentPosition();switch(V){case"top":P("absolute","top",U.y-H-F);break;case"pin":P("fixed","top",x);break;case"bottom":P("absolute","top",U.y+(K.height||K.bottom-K.top)+F)}N=V},N,M,L,K,J,H,I,G=S.floatSpaceDockedOffsetX||0,F=S.floatSpaceDockedOffsetY||0,E=S.floatSpacePinnedOffsetX||0,x=S.floatSpacePinnedOffsetY||0;Q=function(V){if(M=T.editable()){if(V&&"focus"==V.name&&y.show(),y.removeStyle("left"),y.removeStyle("right"),L=y.getClientRect(),K=M.getClientRect(),J=hX.getViewPaneSize(),H=L.height,I="pageXOffset" in hX.$?hX.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,N){H+F<=K.top?O("top"):H+F>J.height-K.bottom?O("pin"):O("bottom");V=J.width/2;V=0<K.left&&K.right<J.width&&K.width>L.width?"rtl"==T.config.contentsLangDirection?"right":"left":V-K.left>K.right-V?"left":"right";var U;L.width>J.width?(V="left",U=0):(U="left"==V?0<K.left?K.left:0:K.right<J.width?J.width-K.right:0,U+L.width>J.width&&(V="left"==V?"right":"left",U=0));y.setStyle(V,p(("pin"==N?E:G)+U+("pin"==N?0:"left"==V?I:-I)))}else{N="pin",O("pin"),Q(V)}}};if(R){var y=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(hp.output({content:R,id:T.id,langDir:T.lang.dir,langCode:T.langCode,name:T.name,style:"display:none;z-index:"+(S.baseFloatZIndex-1),topId:T.ui.spaceId("top"),voiceLabel:T.lang.editorPanel+", "+T.name}))),B=CKEDITOR.tools.eventsBuffer(500,Q),v=CKEDITOR.tools.eventsBuffer(100,Q);y.unselectable();y.on("mousedown",function(U){U=U.data;U.getTarget().hasAscendant("a",1)||U.preventDefault()});T.on("focus",function(U){Q(U);T.on("change",B.input);hX.on("scroll",v.input);hX.on("resize",v.input)});T.on("blur",function(){y.hide();T.removeListener("change",B.input);hX.removeListener("scroll",v.input);hX.removeListener("resize",v.input)});T.on("destroy",function(){hX.removeListener("scroll",v.input);hX.removeListener("resize",v.input);y.clearCustomData();y.remove()});T.focusManager.hasFocus&&y.show();T.focusManager.add(y,1)}},null,null,20)}});CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var v=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),t=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),y=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),x=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(E,B){return this.addBlock(E,new CKEDITOR.ui.listBlock(this.getHolderElement(),B))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(E,B){B=B||{};var F=B.attributes||(B.attributes={});(this.multiSelect=!!B.multiSelect)&&(F["aria-multiselectable"]=!0);!F.role&&(F.role="listbox");this.base.apply(this,arguments);this.element.setAttribute("role",F.role);F=this.keys;F[40]="next";F[9]="next";F[38]="prev";F[CKEDITOR.SHIFT+9]="prev";F[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(F[13]="mouseup");this._.pendingHtml=[];this._.pendingList=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){var B=v.output({items:this._.pendingList.join("")});this._.pendingList=[];this._.pendingHtml.push(B);delete this._.started}},getClick:function(){this._.click||(this._.click=CKEDITOR.tools.addFunction(function(E){var B=this.toggle(E);if(this.onClick){this.onClick(E,B)}},this));return this._.click}},proto:{add:function(B,H,G){var F=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0);this._.items[B]=F;var E;E=CKEDITOR.tools.htmlEncodeAttr(B).replace(x,"\\'");B={id:F,val:E,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(G||B),text:H||B};this._.pendingList.push(t.output(B))},startGroup:function(E){this._.close();var B=CKEDITOR.tools.getNextId();this._.groups[E]=B;this._.pendingHtml.push(y.output({id:B,label:E}))},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));delete this._.size;this._.pendingHtml=[]},toggle:function(E){var B=this.isMarked(E);B?this.unmark(E):this.mark(E);return !B},hideGroup:function(E){var B=(E=this.element.getDocument().getById(this._.groups[E]))&&E.getNext();E&&(E.setStyle("display","none"),B&&"ul"==B.getName()&&B.setStyle("display","none"))},hideItem:function(B){this.element.getDocument().getById(this._.items[B]).setStyle("display","none")},showAll:function(){var E=this._.items,B=this._.groups,H=this.element.getDocument(),G;for(G in E){H.getById(E[G]).setStyle("display","")}for(var F in B){E=H.getById(B[F]),G=E.getNext(),E.setStyle("display",""),G&&"ul"==G.getName()&&G.setStyle("display","")}},mark:function(E){this.multiSelect||this.unmarkAll();E=this._.items[E];var B=this.element.getDocument().getById(E);B.addClass("cke_selected");this.element.getDocument().getById(E+"_option").setAttribute("aria-selected",!0);this.onMark&&this.onMark(B)},unmark:function(E){var B=this.element.getDocument();E=this._.items[E];var F=B.getById(E);F.removeClass("cke_selected");B.getById(E+"_option").removeAttribute("aria-selected");this.onUnmark&&this.onUnmark(F)},unmarkAll:function(){var E=this._.items,B=this.element.getDocument(),G;for(G in E){var F=E[G];B.getById(F).removeClass("cke_selected");B.getById(F+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(B){return this.element.getDocument().getById(this._.items[B]).hasClass("cke_selected")},focus:function(E){this._.focusIndex=-1;var B=this.element.getElementsByTag("a"),G,F=-1;if(E){for(G=this.element.getDocument().getById(this._.items[E]).getFirst();E=B.getItem(++F);){if(E.equals(G)){this._.focusIndex=F;break}}}else{this.element.focus()}G&&setTimeout(function(){G.focus()},0)}}})}});CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}});var dn='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" hidefocus=true title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&10900<=CKEDITOR.env.version&&!CKEDITOR.env.hc?"":'" href="javascript:void(\'{titleJs}\')"')+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';if(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac){dn+=' onkeypress="return false;"'}CKEDITOR.env.gecko&&(dn+=' onblur="this.style.cssText = this.style.cssText;"');var dn=dn+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);"  onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),gX=CKEDITOR.addTemplate("combo",dn);CKEDITOR.UI_RICHCOMBO="richcombo";CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(t){CKEDITOR.tools.extend(this,t,{canGroup:!1,title:t.label,modes:{wysiwyg:1},editorFocus:1});t=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=t.parent&&t.parent.getDocument()||CKEDITOR.document;t.className="cke_combopanel";t.block={multiSelect:t.multiSelect,attributes:t.attributes};t.toolbarRelated=!0;this._={panelDefinition:t,items:{}}},proto:{renderHtml:function(v){var t=[];this.render(v,t);return t.join("")},render:function(K,J){function I(){var L=this.modes[K.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;K.readOnly&&!this.readOnly&&(L=CKEDITOR.TRISTATE_DISABLED);this.setState(L);this.setValue("");L!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}var H=CKEDITOR.env,G="cke_"+this.id,F=CKEDITOR.tools.addFunction(function(L){v&&(K.unlockSelection(1),v=0);B.execute(L)},this),E=this,B={id:G,combo:this,focus:function(){CKEDITOR.document.getById(G).getChild(1).focus()},execute:function(L){var N=E._;if(N.state!=CKEDITOR.TRISTATE_DISABLED){if(E.createPanel(K),N.on){N.panel.hide()}else{E.commit();var M=E.getValue();M?N.list.mark(M):N.list.unmarkAll();N.panel.showBlock(E.id,new CKEDITOR.dom.element(L),4)}}},clickFn:F};K.on("activeFilterChange",I,this);K.on("mode",I,this);!this.readOnly&&K.on("readOnly",I,this);var y=CKEDITOR.tools.addFunction(function(L,N){L=new CKEDITOR.dom.event(L);var M=L.getKeystroke();if(40==M){K.once("panelShow",function(O){O.data._.panel._.currentBlock.onKeyDown(40)})}switch(M){case 13:case 32:case 40:CKEDITOR.tools.callFunction(F,N);break;default:B.onkey(B,M)}L.preventDefault()}),x=CKEDITOR.tools.addFunction(function(){B.onfocus&&B.onfocus()}),v=0,t=CKEDITOR.tools.addFunction(function(){if(CKEDITOR.env.opera){var L=K.editable();L.isInline()&&L.hasFocus&&(K.lockSelection(),v=1)}});B.keyDownFn=y;H={id:G,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:H.gecko&&10900<=H.version&&!H.hc?"":(this.title||"").replace("'",""),keydownFn:y,mousedownFn:t,focusFn:x,clickFn:F};gX.output(H,J);if(this.onRender){this.onRender()}return B},createPanel:function(v){if(!this._.panel){var t=this._.panelDefinition,G=this._.panelDefinition.block,F=t.parent||CKEDITOR.document.getBody(),E="cke_combopanel__"+this.name,B=new CKEDITOR.ui.floatPanel(v,F,t),y=B.addListBlock(this.id,G),x=this;B.onShow=function(){this.element.addClass(E);x.setState(CKEDITOR.TRISTATE_ON);x._.on=1;x.editorFocus&&!v.focusManager.hasFocus&&v.focus();if(x.onOpen){x.onOpen()}v.once("panelShow",function(){y.focus(!y.multiSelect&&x.getValue())})};B.onHide=function(H){this.element.removeClass(E);x.setState(x.modes&&x.modes[v.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);x._.on=0;if(!H&&x.onClose){x.onClose()}};B.onEscape=function(){B.hide(1)};y.onClick=function(I,H){x.onClick&&x.onClick.call(x,I,H);B.hide()};this._.panel=B;this._.list=y;B.getBlock(this.id).onHide=function(){x._.on=0;x.setState(CKEDITOR.TRISTATE_OFF)};this.init&&this.init()}},setValue:function(v,t){this._.value=v;var x=this.document.getById("cke_"+this.id+"_text");x&&(!v&&!t?(t=this.label,x.addClass("cke_combo_inlinelabel")):x.removeClass("cke_combo_inlinelabel"),x.setText("undefined"!=typeof t?t:v))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(t){this._.list.mark(t)},hideItem:function(t){this._.list.hideItem(t)},hideGroup:function(t){this._.list.hideGroup(t)},showAll:function(){this._.list.showAll()},add:function(v,t,x){this._.items[v]=x||v;this._.list.add(v,t,x)},startGroup:function(t){this._.list.startGroup(t)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this));this._.committed=1},setState:function(v){if(this._.state!=v){var t=this.document.getById("cke_"+this.id);t.setState(v,"cke_combo");v==CKEDITOR.TRISTATE_DISABLED?t.setAttribute("aria-disabled",!0):t.removeAttribute("aria-disabled");this._.state=v}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(t){return new CKEDITOR.ui.richCombo(t)}}}});CKEDITOR.ui.prototype.addRichCombo=function(v,t){this.add(v,CKEDITOR.UI_RICHCOMBO,t)};var jC=function(O,N,M,L,K,J,I,H){var G=O.config,F=new CKEDITOR.style(I),E=K.split(";");K=[];for(var B={},x=0;x<E.length;x++){var y=E[x];if(y){var y=y.split("/"),v={},t=E[x]=y[0];v[M]=K[x]=y[1]||t;B[t]=new CKEDITOR.style(I,v);B[t]._.definition.name=t}else{E.splice(x--,1)}}O.ui.addRichCombo(N,{label:L.label,title:L.panelTitle,toolbar:"styles,"+H,allowedContent:F,requiredContent:F,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(G.contentsCss),multiSelect:!1,attributes:{"aria-label":L.panelTitle}},init:function(){this.startGroup(L.panelTitle);for(var Q=0;Q<E.length;Q++){var P=E[Q];this.add(P,B[P].buildPreview(),P)}},onClick:function(P){O.focus();O.fire("saveSnapshot");var Q=B[P];O[this.getValue()==P?"removeStyle":"applyStyle"](Q);O.fire("saveSnapshot")},onRender:function(){O.on("selectionChange",function(Q){var P=this.getValue();Q=Q.data.path.elements;for(var T=0,S;T<Q.length;T++){S=Q[T];for(var R in B){if(B[R].checkElementMatch(S,!0)){R!=P&&this.setValue(R);return}}}this.setValue("",J)},this)},refresh:function(){O.activeFilter.check(F)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})};CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(v){var t=v.config;jC(v,"Font","family",v.lang.font,t.font_names,t.font_defaultLabel,t.font_style,30);jC(v,"FontSize","size",v.lang.font.fontSize,t.fontSize_sizes,t.fontSize_defaultLabel,t.fontSize_style,40)}});CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif";CKEDITOR.config.font_defaultLabel="";CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]};CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px";CKEDITOR.config.fontSize_defaultLabel="";CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]};CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n");CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(H){var G=H.lang,F=0,E={email:1,password:1,search:1,tel:1,text:1,url:1},B={checkbox:"input[type,name,checked]",radio:"input[type,name,checked]",textfield:"input[type,name,value,size,maxlength]",textarea:"textarea[cols,rows,name]",select:"select[name,size,multiple]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},y={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},x=function(L,K,J){var I={allowedContent:B[K],requiredContent:y[K]};"form"==K&&(I.context="form");H.addCommand(K,new CKEDITOR.dialogCommand(K,I));H.ui.addButton&&H.ui.addButton(L,{label:G.common[L.charAt(0).toLowerCase()+L.slice(1)],command:K,toolbar:"forms,"+(F+=10)});CKEDITOR.dialog.add(K,J)},v=this.path+"dialogs/";!H.blockless&&x("Form","form",v+"form.js");x("Checkbox","checkbox",v+"checkbox.js");x("Radio","radio",v+"radio.js");x("TextField","textfield",v+"textfield.js");x("Textarea","textarea",v+"textarea.js");x("Select","select",v+"select.js");x("Button","button",v+"button.js");var t=H.plugins.image;t&&!H.plugins.image2&&x("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js");x("HiddenField","hiddenfield",v+"hiddenfield.js");H.addMenuItems&&(x={checkbox:{label:G.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:G.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:G.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:G.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:G.forms.button.title,command:"button",group:"button"},select:{label:G.forms.select.title,command:"select",group:"select"},textarea:{label:G.forms.textarea.title,command:"textarea",group:"textarea"}},t&&(x.imagebutton={label:G.image.titleButton,command:"imagebutton",group:"imagebutton"}),!H.blockless&&(x.form={label:G.forms.form.menu,command:"form",group:"form"}),H.addMenuItems(x));H.contextMenu&&(!H.blockless&&H.contextMenu.addListener(function(J,I,K){if((J=K.contains("form",1))&&!J.isReadOnly()){return{form:CKEDITOR.TRISTATE_OFF}}}),H.contextMenu.addListener(function(J){if(J&&!J.isReadOnly()){var I=J.getName();if("select"==I){return{select:CKEDITOR.TRISTATE_OFF}}if("textarea"==I){return{textarea:CKEDITOR.TRISTATE_OFF}}if("input"==I){var K=J.getAttribute("type")||"text";switch(K){case"button":case"submit":case"reset":return{button:CKEDITOR.TRISTATE_OFF};case"checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case"radio":return{radio:CKEDITOR.TRISTATE_OFF};case"image":return t?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(E[K]){return{textfield:CKEDITOR.TRISTATE_OFF}}}if("img"==I&&"hiddenfield"==J.data("cke-real-element-type")){return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}}));H.on("doubleclick",function(I){var J=I.data.element;if(!H.blockless&&J.is("form")){I.data.dialog="form"}else{if(J.is("select")){I.data.dialog="select"}else{if(J.is("textarea")){I.data.dialog="textarea"}else{if(J.is("img")&&"hiddenfield"==J.data("cke-real-element-type")){I.data.dialog="hiddenfield"}else{if(J.is("input")){J=J.getAttribute("type")||"text";switch(J){case"button":case"submit":case"reset":I.data.dialog="button";break;case"checkbox":I.data.dialog="checkbox";break;case"radio":I.data.dialog="radio";break;case"image":I.data.dialog="imagebutton"}E[J]&&(I.data.dialog="textfield")}}}}}})},afterInit:function(v){var t=v.dataProcessor,x=t&&t.htmlFilter,t=t&&t.dataFilter;CKEDITOR.env.ie&&x&&x.addRules({elements:{input:function(B){B=B.attributes;var y=B.type;y||(B.type="text");("checkbox"==y||"radio"==y)&&"on"==B.value&&delete B.value}}},{applyToAll:!0});t&&t.addRules({elements:{input:function(y){if("hidden"==y.attributes.type){return v.createFakeParserElement(y,"cke_hidden","hiddenfield")}}}},{applyToAll:!0})}});CKEDITOR.env.ie&&(CKEDITOR.dom.element.prototype.hasAttribute=CKEDITOR.tools.override(CKEDITOR.dom.element.prototype.hasAttribute,function(t){return function(v){this.$.attributes.getNamedItem(v);if("input"==this.getName()){switch(v){case"class":return 0<this.$.className.length;case"checked":return !!this.$.checked;case"value":var x=this.getAttribute("type");return"checkbox"==x||"radio"==x?"on"!=this.$.value:this.$.value}}return t.apply(this,arguments)}}));CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(I){if(!I.blockless){for(var H=I.config,G=I.lang.format,F=H.format_tags.split(";"),E={},B=0,y=[],x=0;x<F.length;x++){var v=F[x],t=new CKEDITOR.style(H["format_"+v]);if(!I.filter.customConfig||I.filter.check(t)){B++,E[v]=t,E[v]._.enterMode=I.config.enterMode,y.push(t)}}0!==B&&I.ui.addRichCombo("Format",{label:G.label,title:G.panelTitle,toolbar:"styles,20",allowedContent:y,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(H.contentsCss),multiSelect:!1,attributes:{"aria-label":G.panelTitle}},init:function(){this.startGroup(G.panelTitle);for(var K in E){var J=G["tag_"+K];this.add(K,E[K].buildPreview(J),J)}},onClick:function(J){I.focus();I.fire("saveSnapshot");J=E[J];var K=I.elementPath();I[J.checkActive(K)?"removeStyle":"applyStyle"](J);setTimeout(function(){I.fire("saveSnapshot")},0)},onRender:function(){I.on("selectionChange",function(J){var L=this.getValue();J=J.data.path;this.refresh();for(var K in E){if(E[K].checkActive(J)){K!=L&&this.setValue(K,I.lang.format["tag_"+K]);return}}this.setValue("")},this)},onOpen:function(){this.showAll();for(var J in E){I.activeFilter.check(E[J])||this.hideItem(J)}},refresh:function(){var J=I.elementPath();if(J){if(J.isContextFor("p")){for(var K in E){if(I.activeFilter.check(E[K])){return}}}this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};var gE={canUndo:!1,exec:function(v){var t=v.document.createElement("hr");v.insertElement(t)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(t){t.blockless||(t.addCommand("horizontalrule",gE),t.ui.addButton&&t.ui.addButton("HorizontalRule",{label:t.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}});CKEDITOR.plugins.add("htmlwriter",{init:function(v){var t=new CKEDITOR.htmlWriter;t.forceSimpleAmpersand=v.config.forceSimpleAmpersand;t.indentationChars=v.config.dataIndentationChars||"\t";v.dataProcessor.writer=t}});CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars="\t";this.selfClosingEnd=" />";this.lineBreakChars="\n";this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var v=CKEDITOR.dtd,t;for(t in CKEDITOR.tools.extend({},v.$nonBodyContent,v.$block,v.$listItem,v.$tableContent)){this.setRules(t,{indent:!v[t]["#"],breakBeforeOpen:1,breakBeforeClose:!v[t]["#"],breakAfterClose:1,needsSpace:t in v.$block&&!(t in {li:1,dt:1,dd:1})})}this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(v){var t=this._.rules[v];this._.afterCloser&&t&&(t.needsSpace&&this._.needsSpace)&&this._.output.push("\n");this._.indent?this.indentation():t&&t.breakBeforeOpen&&(this.lineBreak(),this.indentation());this._.output.push("<",v);this._.afterCloser=0},openTagClose:function(v,t){var x=this._.rules[v];t?(this._.output.push(this.selfClosingEnd),x&&x.breakAfterClose&&(this._.needsSpace=x.needsSpace)):(this._.output.push(">"),x&&x.indent&&(this._.indentation+=this.indentationChars));x&&x.breakAfterOpen&&this.lineBreak();"pre"==v&&(this._.inPre=1)},attribute:function(v,t){"string"==typeof t&&(this.forceSimpleAmpersand&&(t=t.replace(/&amp;/g,"&")),t=CKEDITOR.tools.htmlEncodeAttr(t));this._.output.push(" ",v,'="',t,'"')},closeTag:function(v){var t=this._.rules[v];t&&t.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length));this._.indent?this.indentation():t&&t.breakBeforeClose&&(this.lineBreak(),this.indentation());this._.output.push("</",v,">");"pre"==v&&(this._.inPre=0);t&&t.breakAfterClose&&(this.lineBreak(),this._.needsSpace=t.needsSpace);this._.afterCloser=1},text:function(t){this._.indent&&(this.indentation(),!this._.inPre&&(t=CKEDITOR.tools.ltrim(t)));this._.output.push(t)},comment:function(t){this._.indent&&this.indentation();this._.output.push("\x3c!--",t,"--\x3e")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation);this._.indent=0},reset:function(){this._.output=[];this._.indent=0;this._.indentation="";this._.afterCloser=0;this._.inPre=0},setRules:function(v,t){var x=this._.rules[v];x?CKEDITOR.tools.extend(x,t,!0):this._.rules[v]=t}}});CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(v){var t=v.lang.iframe,x="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";v.plugins.dialogadvtab&&(x+=";iframe"+v.plugins.dialogadvtab.allowedContent({id:1,classes:1,styles:1}));CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js");v.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:x,requiredContent:"iframe"}));v.ui.addButton&&v.ui.addButton("Iframe",{label:t.toolbar,command:"iframe",toolbar:"insert,80"});v.on("doubleclick",function(B){var y=B.data.element;y.is("img")&&"iframe"==y.data("cke-real-element-type")&&(B.data.dialog="iframe")});v.addMenuItems&&v.addMenuItems({iframe:{label:t.title,command:"iframe",group:"image"}});v.contextMenu&&v.contextMenu.addListener(function(y){if(y&&y.is("img")&&"iframe"==y.data("cke-real-element-type")){return{iframe:CKEDITOR.TRISTATE_OFF}}})},afterInit:function(v){var t=v.dataProcessor;(t=t&&t.dataFilter)&&t.addRules({elements:{iframe:function(x){return v.createFakeParserElement(x,"cke_iframe","iframe",!0)}}})}});var gl=function(v){var t=this.editor,F=v.document,E=F.body;(v=F.getElementById("cke_actscrpt"))&&v.parentNode.removeChild(v);(v=F.getElementById("cke_shimscrpt"))&&v.parentNode.removeChild(v);CKEDITOR.env.gecko&&(E.contentEditable=!1,20000>CKEDITOR.env.version&&(E.innerHTML=E.innerHTML.replace(/^.*<\!-- cke-content-start --\>/,""),setTimeout(function(){var G=new CKEDITOR.dom.range(new CKEDITOR.dom.document(F));G.setStart(new CKEDITOR.dom.node(E),0);t.getSelection().selectRanges([G])},0)));E.contentEditable=!0;CKEDITOR.env.ie&&(E.hideFocus=!0,E.disabled=!0,E.removeAttribute("disabled"));delete this._.isLoadingData;this.$=E;F=new CKEDITOR.dom.document(F);this.setup();CKEDITOR.env.ie&&(F.getDocumentElement().addClass(F.$.compatMode),t.config.enterMode!=CKEDITOR.ENTER_P&&this.attachListener(F,"selectionchange",function(){var G=F.getBody(),I=t.getSelection(),H=I&&I.getRanges()[0];H&&G.getHtml().match(/^<p>(?:&nbsp;|<br>)<\/p>$/i)&&H.startContainer.equals(G)&&setTimeout(function(){H=t.getSelection().getRanges()[0];H.startContainer.equals("body")||(G.getFirst().remove(1),H.moveToElementEditEnd(G),H.select())},0)}));if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version){F.getDocumentElement().on("mousedown",function(G){G.data.getTarget().is("html")&&setTimeout(function(){t.editable().focus()})})}try{t.document.$.execCommand("2D-position",!1,!0)}catch(B){}try{t.document.$.execCommand("enableInlineTableEditing",!1,!t.config.disableNativeTableHandles)}catch(y){}if(t.config.disableObjectResizing){try{this.getDocument().$.execCommand("enableObjectResizing",!1,!1)}catch(x){this.attachListener(this,CKEDITOR.env.ie?"resizestart":"resize",function(G){G.data.preventDefault()})}}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==t.document.$.compatMode)&&this.attachListener(this,"keydown",function(G){var I=G.data.getKeystroke();if(33==I||34==I){if(CKEDITOR.env.ie){setTimeout(function(){t.getSelection().scrollIntoView()},0)}else{if(t.window.$.innerHeight>this.$.offsetHeight){var H=t.createRange();H[33==I?"moveToElementEditStart":"moveToElementEditEnd"](this);H.select();G.data.preventDefault()}}}});CKEDITOR.env.ie&&this.attachListener(F,"blur",function(){try{F.$.selection.empty()}catch(G){}});t.document.getElementsByTag("title").getItem(0).data("cke-title",t.document.$.title);CKEDITOR.env.ie&&(t.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){t.fire("contentDom");this._.isPendingFocus&&(t.focus(),this._.isPendingFocus=!1);setTimeout(function(){t.fire("dataReady")},0);CKEDITOR.env.ie&&setTimeout(function(){if(t.document){var G=t.document.$.body;G.runtimeStyle.marginBottom="0px";G.runtimeStyle.marginBottom=""}},1000)},0,this)},fT=function(){var v=[];if(8<=CKEDITOR.document.$.documentMode){v.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var t=[],x;for(x in CKEDITOR.dtd.$removeEmpty){t.push("html.CSS1Compat "+x+"[contenteditable=false]")}v.push(t.join(",")+"{display:inline-block}")}else{CKEDITOR.env.gecko&&(v.push("html{height:100% !important}"),v.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"))}v.push("html{cursor:text;*cursor:auto}");v.push("img,input,textarea{cursor:default}");return v.join("\n")};CKEDITOR.plugins.add("wysiwygarea",{init:function(t){t.config.fullPage&&t.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});t.addMode("wysiwyg",function(v){function H(I){I&&I.removeListener();t.editable(new jo(t,F.$.contentWindow.document.body));t.setData(t.getData(1),v)}var G="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",G=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(G)+"}())":"",F=CKEDITOR.dom.element.createFromHtml('<iframe src="'+G+'" frameBorder="0"></iframe>');F.setStyles({width:"100%",height:"100%"});F.addClass("cke_wysiwyg_frame cke_reset");var E=t.ui.space("contents");E.append(F);if(G=CKEDITOR.env.ie||CKEDITOR.env.gecko){F.on("load",H)}var B=t.title,y=t.lang.common.editorHelp;B&&(CKEDITOR.env.ie&&(B+=", "+y),F.setAttribute("title",B));var B=CKEDITOR.tools.getNextId(),x=CKEDITOR.dom.element.createFromHtml('<span id="'+B+'" class="cke_voice_label">'+y+"</span>");E.append(x,1);t.on("beforeModeUnload",function(I){I.removeListener();x.remove()});F.setAttributes({"aria-describedby":B,tabIndex:t.tabIndex,allowTransparency:"true"});!G&&H();CKEDITOR.env.webkit&&(G=function(){E.setStyle("width","100%");F.hide();F.setSize("width",E.getSize("width"));E.removeStyle("width");F.show()},F.setCustomData("onResize",G),CKEDITOR.document.getWindow().on("resize",G));t.fire("ariaWidget",F)})}});var jo=CKEDITOR.tools.createClass({$:function(t){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(v){CKEDITOR.tools.setTimeout(gl,0,this,v)},this);this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(I,H){var G=this.editor;if(H){this.setHtml(I),G.fire("dataReady")}else{this._.isLoadingData=!0;G._.dataStore={id:1};var F=G.config,E=F.fullPage,B=F.docType,y=CKEDITOR.tools.buildStyleHtml(fT()).replace(/<style>/,'<style data-cke-temp="1">');E||(y+=CKEDITOR.tools.buildStyleHtml(G.config.contentsCss));var x=F.baseHref?'<base href="'+F.baseHref+'" data-cke-temp="1" />':"";E&&(I=I.replace(/<!DOCTYPE[^>]*>/i,function(J){G.docType=B=J;return""}).replace(/<\?xml\s[^\?]*\?>/i,function(J){G.xmlDeclaration=J;return""}));I=G.dataProcessor.toHtml(I);E?(/<body[\s|>]/.test(I)||(I="<body>"+I),/<html[\s|>]/.test(I)||(I="<html>"+I+"</html>"),/<head[\s|>]/.test(I)?/<title[\s|>]/.test(I)||(I=I.replace(/<head[^>]*>/,"$&<title></title>")):I=I.replace(/<html[^>]*>/,"$&<head><title></title></head>"),x&&(I=I.replace(/<head>/,"$&"+x)),I=I.replace(/<\/head\s*>/,y+"$&"),I=B+I):I=F.docType+'<html dir="'+F.contentsLangDirection+'" lang="'+(F.contentsLanguage||G.langCode)+'"><head><title>'+this._.docTitle+"</title>"+x+y+"</head><body"+(F.bodyId?' id="'+F.bodyId+'"':"")+(F.bodyClass?' class="'+F.bodyClass+'"':"")+">"+I+"</body></html>";CKEDITOR.env.gecko&&(I=I.replace(/<body/,'<body contenteditable="true" '),20000>CKEDITOR.env.version&&(I=I.replace(/<body[^>]*>/,"$&\x3c!-- cke-content-start --\x3e")));F='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"\x3c/script>";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(F+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)\x3c/script>');I=I.replace(/(?=\s*<\/(:?head)>)/,F);this.clearCustomData();this.clearListeners();G.fire("contentDomUnload");var v=this.getDocument();try{v.write(I)}catch(t){setTimeout(function(){v.write(I)},0)}}},getData:function(v){if(v){return this.getHtml()}v=this.editor;var t=v.config,E=t.fullPage,B=E&&v.docType,y=E&&v.xmlDeclaration,x=this.getDocument(),E=E?x.getDocumentElement().getOuterHtml():x.getBody().getHtml();CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(E=E.replace(/<br>(?=\s*(:?$|<\/body>))/,""));E=v.dataProcessor.toDataFormat(E);y&&(E=y+"\n"+E);B&&(E=B+"\n"+E);return E},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:jo.baseProto.focus.call(this)},detach:function(){var v=this.editor,t=v.document,v=v.window.getFrame();jo.baseProto.detach.call(this);this.clearCustomData();t.getDocumentElement().clearCustomData();v.clearCustomData();CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);(t=v.removeCustomData("onResize"))&&t.removeListener();v.remove()}}});CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css");var iL=function(v,t){t||(t=v.getSelection().getSelectedElement());if(t&&t.is("img")&&!t.data("cke-realelement")&&!t.isReadOnly()){return t}},hT=function(v){var t=v.getStyle("float");if("inherit"==t||"none"==t){t=0}t||(t=v.getAttribute("align"));return t};CKEDITOR.plugins.add("image",{requires:"dialog",init:function(v){if(!v.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var t="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(v,"image","advanced")&&(t="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)");v.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:t,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]}));v.ui.addButton&&v.ui.addButton("Image",{label:v.lang.common.image,command:"image",toolbar:"insert,10"});v.on("doubleclick",function(y){var x=y.data.element;x.is("img")&&!x.data("cke-realelement")&&!x.isReadOnly()&&(y.data.dialog="image")});v.addMenuItems&&v.addMenuItems({image:{label:v.lang.image.menu,command:"image",group:"image"}});v.contextMenu&&v.contextMenu.addListener(function(x){if(iL(v,x)){return{image:CKEDITOR.TRISTATE_OFF}}})}},afterInit:function(v){function t(x){var y=v.getCommand("justify"+x);if(y){if("left"==x||"right"==x){y.on("exec",function(F){var E=iL(v),B;E&&(B=hT(E),B==x?(E.removeStyle("float"),x==hT(E)&&E.removeAttribute("align")):E.setStyle("float",x),F.cancel())})}y.on("refresh",function(E){var B=iL(v);B&&(B=hT(B),this.setState(B==x?CKEDITOR.TRISTATE_ON:"right"==x||"left"==x?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),E.cancel())})}}v.plugins.image2||(t("left"),t("right"),t("center"),t("block"))}});CKEDITOR.config.image_removeLinkByEmptyURL=!0;var iI=function(v,t){var y,x;t.on("refresh",function(E){var B=[aY],F;for(F in E.data.states){B.push(E.data.states[F])}this.setState(CKEDITOR.tools.search(B,jl)?jl:aY)},t,null,100);t.on("exec",function(B){y=v.getSelection();x=y.createBookmarks(1);B.data||(B.data={});B.data.done=!1},t,null,0);t.on("exec",function(){v.forceNextSelectionCheck();y.selectBookmarks(x)},t,null,100)},aY=CKEDITOR.TRISTATE_DISABLED,jl=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(v){var t=CKEDITOR.plugins.indent.genericDefinition;iI(v,v.addCommand("indent",new t(!0)));iI(v,v.addCommand("outdent",new t));v.ui.addButton&&(v.ui.addButton("Indent",{label:v.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),v.ui.addButton("Outdent",{label:v.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));v.on("dirChanged",function(x){var I=v.createRange(),H=x.data.node;I.setStartBefore(H);I.setEndAfter(H);for(var G=new CKEDITOR.dom.walker(I),F;F=G.next();){if(F.type==CKEDITOR.NODE_ELEMENT){if(!F.equals(H)&&F.getDirection()){I.setStartAfter(F),G=new CKEDITOR.dom.walker(I)}else{var E=v.config.indentClasses;if(E){for(var B="ltr"==x.data.dir?["_rtl",""]:["","_rtl"],y=0;y<E.length;y++){F.hasClass(E[y]+B[0])&&(F.removeClass(E[y]+B[0]),F.addClass(E[y]+B[1]))}}E=F.getStyle("margin-right");B=F.getStyle("margin-left");E?F.setStyle("margin-left",E):F.removeStyle("margin-left");B?F.setStyle("margin-right",B):F.removeStyle("margin-right")}}}})}});CKEDITOR.plugins.indent={genericDefinition:function(t){this.isIndent=!!t;this.startDisabled=!this.isIndent},specificDefinition:function(v,t,x){this.name=t;this.editor=v;this.jobs={};this.enterBr=v.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!x;this.relatedGlobal=x?"indent":"outdent";this.indentKey=x?9:CKEDITOR.SHIFT+9;this.database={}},registerCommands:function(v,t){v.on("pluginsLoaded",function(){for(var x in t){(function(B,y){var F=B.getCommand(y.relatedGlobal),E;for(E in y.jobs){F.on("exec",function(G){G.data.done||(B.fire("lockSnapshot"),y.execJob(B,E)&&(G.data.done=!0),B.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(y.database))},this,null,E),F.on("refresh",function(G){G.data.states||(G.data.states={});G.data.states[y.name+"@"+E]=y.refreshJob(B,E,G.data.path)},this,null,E)}B.addFeature(y)})(this,t[x])}})}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(v,t){var x=this.jobs[t];if(x.state!=aY){return x.exec.call(this,v)}},refreshJob:function(v,t,x){t=this.jobs[t];t.state=v.activeFilter.checkFeature(this)?t.refresh.call(this,v,x):aY;return t.state},getContext:function(t){return t.contains(this.context)}};var ht=function(v,t,E){if(!v.getCustomData("indent_processed")){var B=this.editor,y=this.isIndent;if(t){B=v.$.className.match(this.classNameRegex);E=0;B&&(B=B[1],E=CKEDITOR.tools.indexOf(t,B)+1);if(0>(E+=y?1:-1)){return}E=Math.min(E,t.length);E=Math.max(E,0);v.$.className=CKEDITOR.tools.ltrim(v.$.className.replace(this.classNameRegex,""));0<E&&v.addClass(t[E-1])}else{t=hQ(v,E);E=parseInt(v.getStyle(t),10);var x=B.config.indentOffset||40;isNaN(E)&&(E=0);E+=(y?1:-1)*x;if(0>E){return}E=Math.max(E,0);E=Math.ceil(E/x)*x;v.setStyle(t,E?E+(B.config.indentUnit||"px"):"");""===v.getAttribute("style")&&v.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,v,"indent_processed",1)}},hQ=function(v,t){return"ltr"==(t||v.getComputedStyle("direction"))?"margin-left":"margin-right"},g0=CKEDITOR.dtd.$listItem,fA=CKEDITOR.dtd.$list,aG=CKEDITOR.TRISTATE_DISABLED,gI=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(v){function t(E,B){y.specificDefinition.apply(this,arguments);this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:!x?"margin-left,margin-right":null,classes:x||null}};this.enterBr&&(this.allowedContent.div=!0);this.requiredContent=(this.enterBr?"div":"p")+(x?"("+x.join(",")+")":"{margin-left}");this.jobs={20:{refresh:function(G,F){var J=F.block||F.blockLimit;if(J.is(g0)){J=J.getParent()}else{if(J.getAscendant(g0)){return aG}}if(!this.enterBr&&!this.getContext(F)){return aG}if(x){var I;I=x;var J=J.$.className.match(this.classNameRegex),H=this.isIndent;return(I=J?H?J[1]!=I.slice(-1):!0:H)?gI:aG}return this.isIndent?gI:J?CKEDITOR[0>=(parseInt(J.getStyle(hQ(J)),10)||0)?"TRISTATE_DISABLED":"TRISTATE_OFF"]:aG},exec:function(G){var F=G.getSelection(),F=F&&F.getRanges()[0],H;if(H=G.elementPath().contains(fA)){ht.call(this,H,x)}else{F=F.createIterator();G=G.config.enterMode;F.enforceRealBlocks=!0;for(F.enlargeBr=G!=CKEDITOR.ENTER_BR;H=F.getNextParagraph(G==CKEDITOR.ENTER_P?"p":"div");){H.isReadOnly()||ht.call(this,H,x)}}return !0}}}}var y=CKEDITOR.plugins.indent,x=v.config.indentClasses;y.registerCommands(v,{indentblock:new t(v,"indentblock",!0),outdentblock:new t(v,"outdentblock")});CKEDITOR.tools.extend(t.prototype,y.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:x?RegExp("(?:^|\\s+)("+x.join("|")+")(?=$|\\s)"):null})}});var eQ=function(H){function G(O){for(var N=x.startContainer,M=x.endContainer;N&&!N.getParent().equals(O);){N=N.getParent()}for(;M&&!M.getParent().equals(O);){M=M.getParent()}if(!N||!M){return !1}for(var L=N,N=[],K=!1;!K;){L.equals(M)&&(K=!0),N.push(L),L=L.getNext()}if(1>N.length){return !1}L=O.getParents(!0);for(M=0;M<L.length;M++){if(L[M].getName&&B[L[M].getName()]){O=L[M];break}}for(var L=F.isIndent?1:-1,M=N[0],N=N[N.length-1],K=CKEDITOR.plugins.list.listToArray(O,E),J=K[N.getCustomData("listarray_index")].indent,M=M.getCustomData("listarray_index");M<=N.getCustomData("listarray_index");M++){if(K[M].indent+=L,0<L){var I=K[M].parent;K[M].parent=new CKEDITOR.dom.element(I.getName(),I.getDocument())}}for(M=N.getCustomData("listarray_index")+1;M<K.length&&K[M].indent>J;M++){K[M].indent+=L}N=CKEDITOR.plugins.list.arrayToList(K,E,null,H.config.enterMode,O.getDirection());if(!F.isIndent){var R;if((R=O.getParent())&&R.is("li")){for(var L=N.listNode.getChildren(),Q=[],P,M=L.count()-1;0<=M;M--){(P=L.getItem(M))&&P.is&&P.is("li")&&Q.push(P)}}}N&&N.listNode.replace(O);if(Q&&Q.length){for(M=0;M<Q.length;M++){for(P=O=Q[M];(P=P.getNext())&&P.is&&P.getName() in B;){CKEDITOR.env.needsNbspFiller&&!O.getFirst(e8)&&O.append(x.document.createText("\u00a0")),O.append(P)}O.insertAfter(R)}}N&&H.fire("contentDomInvalidated");return !0}for(var F=this,E=this.database,B=this.context,y=H.getSelection(),y=(y&&y.getRanges()).createIterator(),x;x=y.getNextRange();){for(var v=x.getCommonAncestor();v&&!(v.type==CKEDITOR.NODE_ELEMENT&&B[v.getName()]);){v=v.getParent()}v||(v=x.startPath().contains(B))&&x.setEndAt(v,CKEDITOR.POSITION_BEFORE_END);if(!v){var t=x.getEnclosedNode();t&&t.type==CKEDITOR.NODE_ELEMENT&&t.getName() in B&&(x.setStartAt(t,CKEDITOR.POSITION_AFTER_START),x.setEndAt(t,CKEDITOR.POSITION_BEFORE_END),v=t)}v&&x.startContainer.type==CKEDITOR.NODE_ELEMENT&&x.startContainer.getName() in B&&(t=new CKEDITOR.dom.walker(x),t.evaluator=hw,x.startContainer=t.next());v&&x.endContainer.type==CKEDITOR.NODE_ELEMENT&&x.endContainer.getName() in B&&(t=new CKEDITOR.dom.walker(x),t.evaluator=hw,x.endContainer=t.previous());if(v){return G(v)}}return 0},gp=function(v,t){t||(t=v.contains(this.context));return t&&v.block&&v.block.equals(t.getFirst(hw))},hw=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.is("li")},e8=function(t){return ey(t)&&d6(t)},ey=CKEDITOR.dom.walker.whitespaces(!0),d6=CKEDITOR.dom.walker.bookmark(!1,!0),fX=CKEDITOR.TRISTATE_DISABLED,fE=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(v){function t(B,y){x.specificDefinition.apply(this,arguments);this.requiredContent=["ul","ol"];B.on("key",function(E){if("wysiwyg"==B.mode&&E.data.keyCode==this.indentKey){var F=this.getContext(B.elementPath());if(F&&(!this.isIndent||!gp.call(this,B.elementPath(),F))){B.execCommand(this.relatedGlobal),E.cancel()}}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(F,E){var H=this.getContext(E),G=gp.call(this,E,H);return !H||!this.isIndent||G?fX:fE}:function(F,E){return !this.getContext(E)||this.isIndent?fX:fE},exec:CKEDITOR.tools.bind(eQ,this)}}var x=CKEDITOR.plugins.indent;x.registerCommands(v,{indentlist:new t(v,"indentlist",!0),outdentlist:new t(v,"outdentlist")});CKEDITOR.tools.extend(t.prototype,x.specificDefinition.prototype,{context:{ol:1,ul:1}})}});CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(t){t.config.smiley_path=t.config.smiley_path||this.path+"images/";t.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"}));t.ui.addButton&&t.ui.addButton("Smiley",{label:t.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"});CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}});CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" ");CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";");var fm=function(v,t){t=void 0===t||t;var x;if(t){x=v.getComputedStyle("text-align")}else{for(;!v.hasAttribute||!v.hasAttribute("align")&&!v.getStyle("text-align");){x=v.getParent();if(!x){break}v=x}x=v.getStyle("text-align")||v.getAttribute("align")||""}x&&(x=x.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,""));!x&&t&&(x="rtl"==v.getComputedStyle("direction")?"right":"left");return x},eY=function(v,t,y){this.editor=v;this.name=t;this.value=y;this.context="p";t=v.config.justifyClasses;var x=v.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(t){switch(y){case"left":this.cssClassName=t[0];break;case"center":this.cssClassName=t[1];break;case"right":this.cssClassName=t[2];break;case"justify":this.cssClassName=t[3]}this.cssClassRegex=RegExp("(?:^|\\s+)(?:"+t.join("|")+")(?=$|\\s)");this.requiredContent=x+"("+this.cssClassName+")"}else{this.requiredContent=x+"{text-align}"}this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}};v.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)},dO=function(v){var t=v.editor,E=t.createRange();E.setStartBefore(v.data.node);E.setEndAfter(v.data.node);for(var B=new CKEDITOR.dom.walker(E),y;y=B.next();){if(y.type==CKEDITOR.NODE_ELEMENT){if(!y.equals(v.data.node)&&y.getDirection()){E.setStartAfter(y),B=new CKEDITOR.dom.walker(E)}else{var x=t.config.justifyClasses;x&&(y.hasClass(x[0])?(y.removeClass(x[0]),y.addClass(x[2])):y.hasClass(x[2])&&(y.removeClass(x[2]),y.addClass(x[0])));x=y.getStyle("text-align");"left"==x?y.setStyle("text-align","right"):"right"==x&&y.setStyle("text-align","left")}}}};eY.prototype={exec:function(K){var J=K.getSelection(),I=K.config.enterMode;if(J){for(var H=J.createBookmarks(),G=J.getRanges(),F=this.cssClassName,E,B,y=K.config.useComputedState,y=void 0===y||y,x=G.length-1;0<=x;x--){E=G[x].createIterator();for(E.enlargeBr=I!=CKEDITOR.ENTER_BR;B=E.getNextParagraph(I==CKEDITOR.ENTER_P?"p":"div");){if(!B.isReadOnly()){B.removeAttribute("align");B.removeStyle("text-align");var v=F&&(B.$.className=CKEDITOR.tools.ltrim(B.$.className.replace(this.cssClassRegex,""))),t=this.state==CKEDITOR.TRISTATE_OFF&&(!y||fm(B,!0)!=this.value);F?t?B.addClass(F):v||B.removeAttribute("class"):t&&B.setStyle("text-align",this.value)}}}K.focus();K.forceNextSelectionCheck();J.selectBookmarks(H)}},refresh:function(v,t){var x=t.block||t.blockLimit;this.setState("body"!=x.getName()&&fm(x,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("justify",{init:function(v){if(!v.blockless){var t=new eY(v,"justifyleft","left"),B=new eY(v,"justifycenter","center"),y=new eY(v,"justifyright","right"),x=new eY(v,"justifyblock","justify");v.addCommand("justifyleft",t);v.addCommand("justifycenter",B);v.addCommand("justifyright",y);v.addCommand("justifyblock",x);v.ui.addButton&&(v.ui.addButton("JustifyLeft",{label:v.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),v.ui.addButton("JustifyCenter",{label:v.lang.justify.center,command:"justifycenter",toolbar:"align,20"}),v.ui.addButton("JustifyRight",{label:v.lang.justify.right,command:"justifyright",toolbar:"align,30"}),v.ui.addButton("JustifyBlock",{label:v.lang.justify.block,command:"justifyblock",toolbar:"align,40"}));v.on("dirChanged",dO)}}});CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var t=function(v){var y=this._,x=y.menu;y.state!==CKEDITOR.TRISTATE_DISABLED&&(y.on&&x?x.hide():(y.previousState=y.state,x||(x=y.menu=new CKEDITOR.menu(v,{panel:{className:"cke_menu_panel",attributes:{"aria-label":v.lang.common.options}}}),x.onHide=CKEDITOR.tools.bind(function(){var B=this.command?v.getCommand(this.command).modes:this.modes;this.setState(!B||B[v.mode]?y.previousState:CKEDITOR.TRISTATE_DISABLED);y.on=0},this),this.onMenu&&x.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),y.on=1,setTimeout(function(){x.show(CKEDITOR.document.getById(y.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(v){delete v.panel;this.base(v);this.hasArrow=!0;this.click=t},statics:{handler:{create:function(v){return new CKEDITOR.ui.menuButton(v)}}}})},beforeInit:function(t){t.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});CKEDITOR.UI_MENUBUTTON="menubutton";CKEDITOR.plugins.add("language",{requires:"menubutton",init:function(H){var G=H.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],F=this,E=H.lang.language,B={},y,x,v,t;H.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(J,I){var K=B["language_"+I];if(K){J[K.style.checkActive(J.elementPath())?"removeStyle":"applyStyle"](K.style)}},refresh:function(I){this.setState(F.getCurrentLangElement(I)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}});for(t=0;t<G.length;t++){y=G[t].split(":"),x=y[0],v="language_"+x,B[v]={label:y[1],langId:x,group:"language",order:t,ltr:"rtl"!=(""+y[2]).toLowerCase(),onClick:function(){H.execCommand("language",this.langId)},role:"menuitemcheckbox"},B[v].style=new CKEDITOR.style({element:"span",attributes:{lang:x,dir:B[v].ltr?"ltr":"rtl"}})}B.language_remove={label:E.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:B.length,onClick:function(){var I=F.getCurrentLangElement(H);I&&H.execCommand("language",I.getAttribute("lang"))}};H.addMenuGroup("language",1);H.addMenuGroup("language_remove");H.addMenuItems(B);H.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:E.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var I={},K=F.getCurrentLangElement(H),J;for(J in B){I[J]=CKEDITOR.TRISTATE_OFF}I.language_remove=K?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;K&&(I["language_"+K.getAttribute("lang")]=CKEDITOR.TRISTATE_ON);return I}})},getCurrentLangElement:function(v){var t=v.elementPath();v=t&&t.elements;var y;if(t){for(var x=0;x<v.length;x++){t=v[x],!y&&"span"==t.getName()&&(t.hasAttribute("dir")&&t.hasAttribute("lang"))&&(y=t)}}return y}});CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function v(y){return x.replace(/%1/g,"rtl"==y?"right":"left").replace(/%2/g,"cke_contents_"+y)}var t="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",x=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+t+"padding-%1:18px;cursor:auto;}"+(CKEDITOR.plugins.link.synAnchorSelector?"a.cke_anchor_empty{display:inline-block;"+(CKEDITOR.env.ie&&10<CKEDITOR.env.version?"min-height:16px;vertical-align:middle":"")+"}":"")+".%2 img.cke_anchor{"+t+"width:16px;min-height:15px;height:1.15em;vertical-align:"+(CKEDITOR.env.opera?"middle":"text-bottom")+";}";CKEDITOR.addCss(v("ltr")+v("rtl"))},init:function(v){var t="a[!href]";CKEDITOR.dialog.isTabEnabled(v,"link","advanced")&&(t=t.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)"));CKEDITOR.dialog.isTabEnabled(v,"link","target")&&(t=t.replace("]",",target,onclick]"));v.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:t,requiredContent:"a[href]"}));v.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));v.addCommand("unlink",new CKEDITOR.unlinkCommand);v.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand);v.setKeystroke(CKEDITOR.CTRL+76,"link");v.ui.addButton&&(v.ui.addButton("Link",{label:v.lang.link.toolbar,command:"link",toolbar:"links,10"}),v.ui.addButton("Unlink",{label:v.lang.link.unlink,command:"unlink",toolbar:"links,20"}),v.ui.addButton("Anchor",{label:v.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js");v.on("doubleclick",function(x){var y=CKEDITOR.plugins.link.getSelectedLink(v)||x.data.element;y.isReadOnly()||(y.is("a")?(x.data.dialog=y.getAttribute("name")&&(!y.getAttribute("href")||!y.getChildCount())?"anchor":"link",v.getSelection().selectElement(y)):CKEDITOR.plugins.link.tryRestoreFakeAnchor(v,y)&&(x.data.dialog="anchor"))});v.addMenuItems&&v.addMenuItems({anchor:{label:v.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:v.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:v.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:v.lang.link.unlink,command:"unlink",group:"link",order:5}});v.contextMenu&&v.contextMenu.addListener(function(x){if(!x||x.isReadOnly()){return null}x=CKEDITOR.plugins.link.tryRestoreFakeAnchor(v,x);if(!x&&!(x=CKEDITOR.plugins.link.getSelectedLink(v))){return null}var y={};x.getAttribute("href")&&x.getChildCount()&&(y={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});x&&x.hasAttribute("name")&&(y.anchor=y.removeAnchor=CKEDITOR.TRISTATE_OFF);return y})},afterInit:function(v){var t=v.dataProcessor,y=t&&t.dataFilter,t=t&&t.htmlFilter,x=v._.elementsPath&&v._.elementsPath.filters;y&&y.addRules({elements:{a:function(B){var G=B.attributes;if(!G.name){return null}var F=!B.children.length;if(CKEDITOR.plugins.link.synAnchorSelector){B=F?"cke_anchor_empty":"cke_anchor";var E=G["class"];if(G.name&&(!E||0>E.indexOf(B))){G["class"]=(E||"")+" "+B}F&&CKEDITOR.plugins.link.emptyAnchorFix&&(G.contenteditable="false",G["data-cke-editable"]=1)}else{if(CKEDITOR.plugins.link.fakeAnchor&&F){return v.createFakeParserElement(B,"cke_anchor","anchor")}}return null}}});CKEDITOR.plugins.link.emptyAnchorFix&&t&&t.addRules({elements:{a:function(B){delete B.attributes.contenteditable}}});x&&x.push(function(B,E){if("a"==E&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(v,B)||B.getAttribute("name")&&(!B.getAttribute("href")||!B.getChildCount()))){return"anchor"}})}});CKEDITOR.plugins.link={getSelectedLink:function(v){var t=v.getSelection(),x=t.getSelectedElement();return x&&x.is("a")?x:(t=t.getRanges()[0])?(t.shrink(CKEDITOR.SHRINK_TEXT),v.elementPath(t.getCommonAncestor()).contains("a",1)):null},fakeAnchor:CKEDITOR.env.opera||CKEDITOR.env.webkit,synAnchorSelector:CKEDITOR.env.ie,emptyAnchorFix:CKEDITOR.env.ie&&8>CKEDITOR.env.version,tryRestoreFakeAnchor:function(v,t){if(t&&t.data("cke-real-element-type")&&"anchor"==t.data("cke-real-element-type")){var x=v.restoreRealElement(t);if(x.data("cke-saved-name")){return x}}}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype={exec:function(v){var t=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});v.removeStyle(t)},refresh:function(v,t){var x=t.lastElement&&t.lastElement.getAscendant("a",!0);x&&"a"==x.getName()&&x.getAttribute("href")&&x.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(v){var t=v.getSelection(),y=t.createBookmarks(),x;if(t&&(x=t.getSelectedElement())&&(CKEDITOR.plugins.link.fakeAnchor&&!x.getChildCount()?CKEDITOR.plugins.link.tryRestoreFakeAnchor(v,x):x.is("a"))){x.remove(1)}else{if(x=CKEDITOR.plugins.link.getSelectedLink(v)){x.hasAttribute("href")?(x.removeAttributes({name:1,"data-cke-saved-name":1}),x.removeClass("cke_anchor")):x.remove(1)}}t.selectBookmarks(y)},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0});var dm=function(J,I,H){function G(K){if((v=x[K?"getFirst":"getLast"]())&&(!v.is||!v.isBlockBoundary())&&(t=I.root[K?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))&&(!t.is||!t.isBlockBoundary({br:1}))){J.document.createElement("br")[K?"insertBefore":"insertAfter"](v)}}for(var F=CKEDITOR.plugins.list.listToArray(I.root,H),E=[],B=0;B<I.contents.length;B++){var y=I.contents[B];if((y=y.getAscendant("li",!0))&&!y.getCustomData("list_item_processed")){E.push(y),CKEDITOR.dom.element.setMarker(H,y,"list_item_processed",!0)}}y=null;for(B=0;B<E.length;B++){y=E[B].getCustomData("listarray_index"),F[y].indent=-1}for(B=y+1;B<F.length;B++){if(F[B].indent>F[B-1].indent+1){E=F[B-1].indent+1-F[B].indent;for(y=F[B].indent;F[B]&&F[B].indent>=y;){F[B].indent+=E,B++}B--}}var x=CKEDITOR.plugins.list.arrayToList(F,H,null,J.config.enterMode,I.root.getAttribute("dir")).listNode,v,t;G(!0);G();x.replace(I.root);J.fire("contentDomInvalidated")},g3=function(v,t){this.name=v;this.context=this.type=t;this.allowedContent=t+" li";this.requiredContent=t},eU=function(v,t,E,B){for(var y,x;y=v[B?"getLast":"getFirst"](cV);){(x=y.getDirection(1))!==t.getDirection(1)&&y.setAttribute("dir",x),y.remove(),E?y[B?"insertBefore":"insertAfter"](E):t.append(y,B)}},eB=function(v){var t;(t=function(x){var y=v[x?"getPrevious":"getNext"](h9);y&&y.type==CKEDITOR.NODE_ELEMENT&&y.is(v.getName())&&(eU(v,y,null,!x),v.remove(),v=y)})();t(1)},ef=function(t){return t.type==CKEDITOR.NODE_ELEMENT&&(t.getName() in CKEDITOR.dtd.$block||t.getName() in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[t.getName()]["#"]},gL=function(H,G,F){H.fire("saveSnapshot");F.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var E=F.extractContents();G.trim(!1,!0);var B=G.createBookmark(),y=new CKEDITOR.dom.elementPath(G.startContainer),x=y.block,y=y.lastElement.getAscendant("li",1)||x,v=new CKEDITOR.dom.elementPath(F.startContainer),t=v.contains(CKEDITOR.dtd.$listItem),v=v.contains(CKEDITOR.dtd.$list);x?(x=x.getBogus())&&x.remove():v&&(x=v.getPrevious(h9))&&an(x)&&x.remove();(x=E.getLast())&&x.type==CKEDITOR.NODE_ELEMENT&&x.is("br")&&x.remove();(x=G.startContainer.getChild(G.startOffset))?E.insertBefore(x):G.startContainer.append(E);if(t&&(E=k(t))){y.contains(t)?(eU(E,t.getParent(),t),E.remove()):y.append(E)}for(;F.checkStartOfBlock()&&F.checkEndOfBlock();){v=F.startPath();E=v.block;if(!E){break}E.is("li")&&(y=E.getParent(),E.equals(y.getLast(h9))&&E.equals(y.getFirst(h9))&&(E=y));F.moveToPosition(E,CKEDITOR.POSITION_BEFORE_START);E.remove()}F=F.clone();E=H.editable();F.setEndAt(E,CKEDITOR.POSITION_BEFORE_END);F=new CKEDITOR.dom.walker(F);F.evaluator=function(I){return h9(I)&&!an(I)};(F=F.next())&&F.type==CKEDITOR.NODE_ELEMENT&&F.getName() in CKEDITOR.dtd.$list&&eB(F);G.moveToBookmark(B);G.select();H.fire("saveSnapshot")},k=function(t){return(t=t.getLast(h9))&&t.type==CKEDITOR.NODE_ELEMENT&&t.getName() in it?t:null},it={ol:1,ul:1},cD=CKEDITOR.dom.walker.whitespaces(),dS=CKEDITOR.dom.walker.bookmark(),h9=function(t){return !(cD(t)||dS(t))},an=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(K,J,I,H,G){if(!it[K.getName()]){return[]}H||(H=0);I||(I=[]);for(var F=0,E=K.getChildCount();F<E;F++){var B=K.getChild(F);B.type==CKEDITOR.NODE_ELEMENT&&B.getName() in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(B,J,I,H+1);if("li"==B.$.nodeName.toLowerCase()){var y={parent:K,indent:H,element:B,contents:[]};G?y.grandparent=G:(y.grandparent=K.getParent(),y.grandparent&&"li"==y.grandparent.$.nodeName.toLowerCase()&&(y.grandparent=y.grandparent.getParent()));J&&CKEDITOR.dom.element.setMarker(J,B,"listarray_index",I.length);I.push(y);for(var x=0,v=B.getChildCount(),t;x<v;x++){t=B.getChild(x),t.type==CKEDITOR.NODE_ELEMENT&&it[t.getName()]?CKEDITOR.plugins.list.listToArray(t,J,I,H+1,y.grandparent):y.contents.push(t)}}}return I},arrayToList:function(ab,aa,Z,Y,X){Z||(Z=0);if(!ab||ab.length<Z+1){return null}for(var W,V=ab[Z].parent.getDocument(),U=new CKEDITOR.dom.documentFragment(V),T=null,S=Z,R=Math.max(ab[Z].indent,0),Q=null,O,P,N=Y==CKEDITOR.ENTER_P?"p":"div";;){var L=ab[S];W=L.grandparent;O=L.element.getDirection(1);if(L.indent==R){if(!T||ab[S].parent.getName()!=T.getName()){T=ab[S].parent.clone(!1,1),X&&T.setAttribute("dir",X),U.append(T)}Q=T.append(L.element.clone(0,1));O!=T.getDirection(1)&&Q.setAttribute("dir",O);for(W=0;W<L.contents.length;W++){Q.append(L.contents[W].clone(1,1))}S++}else{if(L.indent==Math.max(R,0)+1){L=ab[S-1].element.getDirection(1),S=CKEDITOR.plugins.list.arrayToList(ab,null,S,Y,L!=O?O:null),!Q.getChildCount()&&CKEDITOR.env.needsNbspFiller&&!(7<V.$.documentMode)&&Q.append(V.createText("\u00a0")),Q.append(S.listNode),S=S.nextIndex}else{if(-1==L.indent&&!Z&&W){it[W.getName()]?(Q=L.element.clone(!1,!0),O!=W.getDirection(1)&&Q.setAttribute("dir",O)):Q=new CKEDITOR.dom.documentFragment(V);var T=W.getDirection(1)!=O,K=L.element,J=K.getAttribute("class"),I=K.getAttribute("style"),H=Q.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(Y!=CKEDITOR.ENTER_BR||T||I||J),E,G=L.contents.length,F;for(W=0;W<G;W++){if(E=L.contents[W],dS(E)&&1<G){H?F=E.clone(1,1):Q.append(E.clone(1,1))}else{if(E.type==CKEDITOR.NODE_ELEMENT&&E.isBlockBoundary()){T&&!E.getDirection()&&E.setAttribute("dir",O);P=E;var M=K.getAttribute("style");M&&P.setAttribute("style",M.replace(/([^;])$/,"$1;")+(P.getAttribute("style")||""));J&&E.addClass(J);P=null;F&&(Q.append(F),F=null);Q.append(E.clone(1,1))}else{H?(P||(P=V.createElement(N),Q.append(P),T&&P.setAttribute("dir",O)),I&&P.setAttribute("style",I),J&&P.setAttribute("class",J),F&&(P.append(F),F=null),P.append(E.clone(1,1))):Q.append(E.clone(1,1))}}}F&&((P||Q).append(F),F=null);Q.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&S!=ab.length-1&&(CKEDITOR.env.needsBrFiller&&(O=Q.getLast())&&O.type==CKEDITOR.NODE_ELEMENT&&O.is("br")&&O.remove(),O=Q.getLast(h9),(!O||!(O.type==CKEDITOR.NODE_ELEMENT&&O.is(CKEDITOR.dtd.$block)))&&Q.append(V.createElement("br")));O=Q.$.nodeName.toLowerCase();("div"==O||"p"==O)&&Q.appendBogus();U.append(Q);T=null;S++}else{return null}}}P=null;if(ab.length<=S||Math.max(ab[S].indent,0)<R){break}}if(aa){for(ab=U.getFirst();ab;){if(ab.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(aa,ab),ab.getName() in CKEDITOR.dtd.$listItem&&(Z=ab,V=Y=void 0,Y=Z.getDirection()))){for(X=Z.getParent();X&&!(V=X.getDirection());){X=X.getParent()}Y==V&&Z.removeAttribute("dir")}ab=ab.getNextSourceNode()}}return{listNode:U,nextIndex:S}}};var cl=/^h[1-6]$/,cV=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);g3.prototype={exec:function(O){this.refresh(O,O.elementPath());var N=O.config,M=O.getSelection(),L=M&&M.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var K=O.editable();if(K.getFirst(h9)){var J=1==L.length&&L[0];(N=J&&J.getEnclosedNode())&&N.is&&this.type==N.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else{N.enterMode==CKEDITOR.ENTER_BR?K.appendBogus():L[0].fixBlock(1,N.enterMode==CKEDITOR.ENTER_P?"p":"div"),M.selectRanges(L)}}for(var N=M.createBookmarks(!0),K=[],I={},L=L.createIterator(),H=0;(J=L.getNextRange())&&++H;){var G=J.getBoundaryNodes(),F=G.startNode,E=G.endNode;F.type==CKEDITOR.NODE_ELEMENT&&"td"==F.getName()&&J.setStartAt(G.startNode,CKEDITOR.POSITION_AFTER_START);E.type==CKEDITOR.NODE_ELEMENT&&"td"==E.getName()&&J.setEndAt(G.endNode,CKEDITOR.POSITION_BEFORE_END);J=J.createIterator();for(J.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;G=J.getNextParagraph();){if(!G.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(I,G,"list_block",1);for(var B=O.elementPath(G),F=B.elements,E=0,B=B.blockLimit,x,y=F.length-1;0<=y&&(x=F[y]);y--){if(it[x.getName()]&&B.contains(x)){B.removeCustomData("list_group_object_"+H);(F=x.getCustomData("list_group_object"))?F.contents.push(G):(F={root:x,contents:[G]},K.push(F),CKEDITOR.dom.element.setMarker(I,x,"list_group_object",F));E=1;break}}E||(E=B,E.getCustomData("list_group_object_"+H)?E.getCustomData("list_group_object_"+H).contents.push(G):(F={root:E,contents:[G]},CKEDITOR.dom.element.setMarker(I,E,"list_group_object_"+H,F),K.push(F)))}}}for(x=[];0<K.length;){if(F=K.shift(),this.state==CKEDITOR.TRISTATE_OFF){if(it[F.root.getName()]){L=O;H=F;F=I;J=x;E=CKEDITOR.plugins.list.listToArray(H.root,F);B=[];for(G=0;G<H.contents.length;G++){if(y=H.contents[G],(y=y.getAscendant("li",!0))&&!y.getCustomData("list_item_processed")){B.push(y),CKEDITOR.dom.element.setMarker(F,y,"list_item_processed",!0)}}for(var y=H.root.getDocument(),v=void 0,t=void 0,G=0;G<B.length;G++){var P=B[G].getCustomData("listarray_index"),v=E[P].parent;v.is(this.type)||(t=y.createElement(this.type),v.copyAttributes(t,{start:1,type:1}),t.removeStyle("list-style-type"),E[P].parent=t)}F=CKEDITOR.plugins.list.arrayToList(E,F,null,L.config.enterMode);E=void 0;B=F.listNode.getChildCount();for(G=0;G<B&&(E=F.listNode.getChild(G));G++){E.getName()==this.type&&J.push(E)}F.listNode.replace(H.root);L.fire("contentDomInvalidated")}else{E=O;G=F;J=x;B=G.contents;L=G.root.getDocument();H=[];1==B.length&&B[0].equals(G.root)&&(F=L.createElement("div"),B[0].moveChildren&&B[0].moveChildren(F),B[0].append(F),B[0]=F);G=G.contents[0].getParent();for(y=0;y<B.length;y++){G=G.getCommonAncestor(B[y].getParent())}v=E.config.useComputedState;E=F=void 0;v=void 0===v||v;for(y=0;y<B.length;y++){for(t=B[y];P=t.getParent();){if(P.equals(G)){H.push(t);!E&&t.getDirection()&&(E=1);t=t.getDirection(v);null!==F&&(F=F&&F!=t?null:t);break}t=P}}if(!(1>H.length)){B=H[H.length-1].getNext();y=L.createElement(this.type);for(J.push(y);H.length;){J=H.shift(),v=L.createElement("li"),J.is("pre")||cl.test(J.getName())||"false"==J.getAttribute("contenteditable")?J.appendTo(v):(J.copyAttributes(v),F&&J.getDirection()&&(v.removeStyle("direction"),v.removeAttribute("dir")),J.moveChildren(v),J.remove()),v.appendTo(y)}F&&E&&y.setAttribute("dir",F);B?y.insertBefore(B):y.appendTo(G)}}}else{this.state==CKEDITOR.TRISTATE_ON&&it[F.root.getName()]&&dm.call(this,O,F,I)}}for(y=0;y<x.length;y++){eB(x[y])}CKEDITOR.dom.element.clearAllMarkers(I);M.selectBookmarks(N);O.focus()},refresh:function(v,t){var y=t.contains(it,1),x=t.blockLimit||t.root;y&&x.contains(y)?this.setState(y.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(t){t.blockless||(t.addCommand("numberedlist",new g3("numberedlist","ol")),t.addCommand("bulletedlist",new g3("bulletedlist","ul")),t.ui.addButton&&(t.ui.addButton("NumberedList",{label:t.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),t.ui.addButton("BulletedList",{label:t.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),t.on("key",function(I){var H=I.data.keyCode;if("wysiwyg"==t.mode&&H in {8:1,46:1}){var G=t.getSelection().getRanges()[0],F=G&&G.startPath();if(G&&G.collapsed){var F=new CKEDITOR.dom.elementPath(G.startContainer),E=8==H,B=t.editable(),y=new CKEDITOR.dom.walker(G.clone());y.evaluator=function(J){return h9(J)&&!an(J)};y.guard=function(K,J){return !(J&&K.type==CKEDITOR.NODE_ELEMENT&&K.is("table"))};H=G.clone();if(E){var x,v;if((x=F.contains(it))&&G.checkBoundaryOfElement(x,CKEDITOR.START)&&(x=x.getParent())&&x.is("li")&&(x=k(x))){v=x,x=x.getPrevious(h9),H.moveToPosition(x&&an(x)?x:v,CKEDITOR.POSITION_BEFORE_START)}else{if(y.range.setStartAt(B,CKEDITOR.POSITION_AFTER_START),y.range.setEnd(G.startContainer,G.startOffset),(x=y.previous())&&x.type==CKEDITOR.NODE_ELEMENT&&(x.getName() in it||x.is("li"))){x.is("li")||(y.range.selectNodeContents(x),y.reset(),y.evaluator=ef,x=y.previous()),v=x,H.moveToElementEditEnd(v)}}if(v){gL(t,H,G),I.cancel()}else{if((H=F.contains(it))&&G.checkBoundaryOfElement(H,CKEDITOR.START)){v=H.getFirst(h9),G.checkBoundaryOfElement(v,CKEDITOR.START)&&(x=H.getPrevious(h9),k(v)?x&&(G.moveToElementEditEnd(x),G.select()):t.execCommand("outdent"),I.cancel())}}}else{if(v=F.contains("li")){y.range.setEndAt(B,CKEDITOR.POSITION_BEFORE_END),B=(F=v.getLast(h9))&&ef(F)?F:v,v=0,(x=y.next())&&x.type==CKEDITOR.NODE_ELEMENT&&x.getName() in it&&x.equals(F)?(v=1,x=y.next()):G.checkBoundaryOfElement(B,CKEDITOR.END)&&(v=1),v&&x&&(G=G.clone(),G.moveToElementEditStart(x),gL(t,H,G),I.cancel())}else{if(y.range.setEndAt(B,CKEDITOR.POSITION_BEFORE_END),(x=y.next())&&x.type==CKEDITOR.NODE_ELEMENT&&x.is(it)){x=x.getFirst(h9),F.block&&G.checkStartOfBlock()&&G.checkEndOfBlock()?(F.block.remove(),G.moveToElementEditStart(x),G.select()):k(x)?(G.moveToElementEditStart(x),G.select()):(G=G.clone(),G.moveToElementEditStart(x),gL(t,H,G)),I.cancel()}}}setTimeout(function(){t.selectionChange(1)})}}}))}});CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(v){if(!v.blockless){var t;t=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"});t=v.addCommand("numberedListStyle",t);v.addFeature(t);CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js");t=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}"});t=v.addCommand("bulletedListStyle",t);v.addFeature(t);CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js");v.addMenuGroup("list",108);v.addMenuItems({numberedlist:{label:v.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:v.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}});v.contextMenu.addListener(function(y){if(!y||y.isReadOnly()){return null}for(;y;){var x=y.getName();if("ol"==x){return{numberedlist:CKEDITOR.TRISTATE_OFF}}if("ul"==x){return{bulletedlist:CKEDITOR.TRISTATE_OFF}}y=y.getParent()}return null})}}};CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle);var dr=function(v,t,x){return iw(t)&&iw(x)&&x.equals(t.getNext(function(y){return !(jx(y)||iV(y)||hV(y))}))},l=function(t){this.upper=t[0];this.lower=t[1];this.set.apply(this,t.slice(2))},f0=function(v){var t=v.element;if(t&&iw(t)&&(t=t.getAscendant(v.triggers,!0))&&v.editable.contains(t)){var x=gs(t,!0);if("true"==x.getAttribute("contenteditable")){return t}if(x.is(v.triggers)){return x}}return null},bJ=function(v,t,x){il(v,t);il(v,x);v=t.size.bottom;x=x.size.top;return v&&x?0|(v+x)/2:v||x},cU=function(v,t,x){return t=t[x?"getPrevious":"getNext"](function(y){return y&&y.type==CKEDITOR.NODE_TEXT&&!jx(y)||iw(y)&&!hV(y)&&!jy(v,y)})},gs=function(v,t){if(v.data("cke-editable")){return null}for(t||(v=v.getParent());v&&!v.data("cke-editable");){if(v.hasAttribute("contenteditable")){return v}v=v.getParent()}return null},fp=function(v,t,E){var B=new CKEDITOR.dom.range(v.doc),y=v.editor,x;ip.ie&&v.enterMode==CKEDITOR.ENTER_BR?x=v.doc.createText(b0):(x=(x=gs(v.element,!0))&&x.data("cke-enter-mode")||v.enterMode,x=new fH(bz[x],v.doc),x.is("br")||v.doc.createText(b0).appendTo(x));E&&y.fire("saveSnapshot");t(x);B.moveToPosition(x,CKEDITOR.POSITION_AFTER_START);y.getSelection().selectRanges([B]);v.hotNode=x;E&&y.fire("saveSnapshot")},co=function(v,t){var x=function(E){var B=ip.ie&&9>ip.version?" ":b0,y=v.hotNode&&v.hotNode.getText()==B&&v.element.equals(v.hotNode)&&v.lastCmdDirection===!!t;fp(v,function(F){y&&v.hotNode&&v.hotNode.remove();F[t?"insertAfter":"insertBefore"](E);F.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!t});v.lastCmdDirection=!!t});!ip.ie&&v.enterMode!=CKEDITOR.ENTER_BR&&v.hotNode.scrollIntoView();v.line.detach()};return{canUndo:!0,modes:{wysiwyg:1},exec:function(E){E=E.getSelection().getStartElement();var B;E=E.getAscendant(cY,1);if(!cG(v,E)&&E&&!E.equals(v.editable)&&!E.contains(v.editable)){if((B=gs(E))&&"false"==B.getAttribute("contenteditable")){E=B}v.element=E;B=cU(v,E,!t);var y;iw(B)&&B.is(v.triggers)&&B.is(dx)&&(!cU(v,B,!t)||(y=cU(v,B,!t))&&iw(y)&&y.is(v.triggers))?x(B):(y=f0(v,E),iw(y)&&(cU(v,y,!t)?(E=cU(v,y,!t))&&iw(E)&&E.is(v.triggers)&&x(y):x(y)))}}}},jy=function(v,t){if(!t||!(t.type==CKEDITOR.NODE_ELEMENT&&t.$)){return !1}var x=v.line;return x.wrap.equals(t)||x.wrap.contains(t)},iw=function(t){return t&&t.type==CKEDITOR.NODE_ELEMENT&&t.$},hV=function(v){if(!iw(v)){return !1}var t;if(!(t=bN(v))){iw(v)?(t={left:1,right:1,center:1},t=!(!t[v.getComputedStyle("float")]&&!t[v.getAttribute("align")])):t=!1}return t},bN=function(t){return !!{absolute:1,fixed:1}[t.getComputedStyle("position")]},cG=function(v,t){if(!t){return !1}for(var B=t.getParents(1),y=B.length;y--;){for(var x=v.tabuList.length;x--;){if(B[y].hasAttribute(v.tabuList[x])){return !0}}}return !1},i0=function(v){var t=v.editable,E=v.mouse,B=v.view,y=v.triggerOffset;a7(v);var x=E.y>(v.inInlineMode?B.editable.top+B.editable.height/2:Math.min(B.editable.height,B.pane.height)/2),t=t[x?"getLast":"getFirst"](function(F){return !(jx(F)||iV(F))});if(!t){return null}jy(v,t)&&(t=v.line.wrap[x?"getPrevious":"getNext"](function(F){return !(jx(F)||iV(F))}));if(!iw(t)||hV(t)||!iw(t)||!t.is(v.triggers)){return null}il(v,t);return !x&&0<=t.size.top&&0<E.y&&E.y<t.size.top+y?(v=v.inInlineMode||0===B.scroll.y?eG:cC,new l([null,t,aP,ax,v])):x&&t.size.bottom<=B.pane.height&&E.y>t.size.bottom-y&&E.y<B.pane.height?(v=v.inInlineMode||t.size.bottom>B.pane.height-y&&t.size.bottom<B.pane.height?eo:cC,new l([t,null,dA,ax,v])):null},hG=function(I){var H=I.mouse,G=I.view,F=I.triggerOffset,E=f0(I);if(!E){return null}il(I,E);var F=Math.min(F,0|E.size.outerHeight/2),B=[],y,x;if(H.y>E.size.top-1&&H.y<E.size.top+F){x=!1}else{if(H.y>E.size.bottom-F&&H.y<E.size.bottom+1){x=!0}else{return null}}var v;if(!(v=hV(E))){var t=x;(v=E[t?"getLast":"getFirst"](function(J){return I.isRelevant(J)&&!J.is(iW)}))?(il(I,v),v=t?v.size.top>I.mouse.y:v.size.bottom<I.mouse.y):v=!1;v=v||E.getParent().is(ir)}if(v){return null}if(v=cU(I,E,!x)){if(v&&v.type==CKEDITOR.NODE_TEXT){return null}if(iw(v)){if(hV(v)||!iw(v)||!v.is(I.triggers)||v.getParent().is(ir)){return null}B=[v,E][x?"reverse":"concat"]().concat([eX,ax])}}else{E.equals(I.editable[x?"getLast":"getFirst"](I.isRelevant))?(a7(I),x&&H.y>E.size.bottom-F&&H.y<G.pane.height&&E.size.bottom>G.pane.height-F&&E.size.bottom<G.pane.height?y=eo:0<H.y&&H.y<E.size.top+F&&(y=eG)):y=cC,B=[null,E][x?"reverse":"concat"]().concat([x?dA:aP,ax,y,E.equals(I.editable[x?"getLast":"getFirst"](I.isRelevant))?x?eo:eG:cC])}return 0 in B?new l(B):null},eE=function(K,J,I,H){var G,F=ip.ie?J.$.currentStyle:K.win.$.getComputedStyle(J.$,"");G=ip.ie?function(L){return F[CKEDITOR.tools.cssStyleToDomStyle(L)]}:function(L){return F.getPropertyValue(L)};for(var E=J.getDocumentPosition(),B={},y={},x={},v={},t=ck.length;t--;){B[ck[t]]=parseInt(G("border-"+ck[t]+"-width"),10)||0,x[ck[t]]=parseInt(G("padding-"+ck[t]),10)||0,y[ck[t]]=parseInt(G("margin-"+ck[t]),10)||0}(!I||H)&&u(K,H);v.top=E.y-(I?0:K.view.scroll.y);v.left=E.x-(I?0:K.view.scroll.x);v.outerWidth=J.$.offsetWidth;v.outerHeight=J.$.offsetHeight;v.height=v.outerHeight-(x.top+x.bottom+B.top+B.bottom);v.width=v.outerWidth-(x.left+x.right+B.left+B.right);v.bottom=v.top+v.outerHeight;v.right=v.left+v.outerWidth;K.inInlineMode&&(v.scroll={top:J.$.scrollTop,left:J.$.scrollLeft});return i6({border:B,padding:x,margin:y,ignoreScroll:I},v,!0)},il=function(v,t,x){if(!iw(t)){return t.size=null}if(t.size){if(t.size.ignoreScroll==x&&t.size.date>new Date-g9){return null}}else{t.size={}}return i6(t.size,eE(v,t,x),{date:+new Date},!0)},a7=function(v,t){v.view.editable=eE(v,v.editable,t,!0)},u=function(v,t){v.view||(v.view={});var y=v.view;if(t||!(y&&y.date>new Date-g9)){var x=v.win,y=x.getScrollPosition(),x=x.getViewPaneSize();i6(v.view,{scroll:{x:y.x,y:y.y,width:v.doc.$.documentElement.scrollWidth-x.width,height:v.doc.$.documentElement.scrollHeight-x.height},pane:{width:x.width,height:x.height,bottom:x.height+y.y},date:+new Date},!0)}};CKEDITOR.plugins.add("magicline",{init:function(v){var t=v.config,F=t.magicline_triggerOffset||30,E={editor:v,enterMode:t.enterMode,triggerOffset:F,holdDistance:0|F*(t.magicline_holdDistance||0.5),boxColor:t.magicline_color||"#ff0000",rtl:"rtl"==t.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(t.magicline_tabuList||[]),triggers:t.magicline_everywhere?cY:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},B,y,x;E.isRelevant=function(G){return iw(G)&&!jy(E,G)&&!hV(G)};v.on("contentDom",function(){var L=v.editable(),J=v.document,I=v.window;i6(E,{editable:L,inInlineMode:L.isInline(),doc:J,win:I,hotNode:null},!0);E.boundary=E.inInlineMode?E.editable:E.doc.getDocumentElement();if(!L.is(iX.$inline)){E.inInlineMode&&!bN(L)&&L.setStyles({position:"relative",top:null,left:null});var H=E.doc,G=b('<span contenteditable="false" style="'+em+"position:absolute;border-top:1px dashed "+E.boxColor+'"></span>',H),K=this.path+"images/"+(ip.hidpi?"hidpi/":"")+"icon.png";i6(G,{attach:function(){this.wrap.getParent()||this.wrap.appendTo(E.editable,!0);return this},lineChildren:[i6(b('<span title="'+E.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',H),{base:em+"height:17px;width:17px;"+(E.rtl?"left":"right")+":17px;background:url("+K+") center no-repeat "+E.boxColor+";cursor:pointer;"+(ip.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(ip.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px",1),"top:-17px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px 2px 0px 0px",1),"top:-1px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","0px 0px 2px 2px",1)]}),i6(b(gR,H),{base:gy+"left:0px;border-left-color:"+E.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),i6(b(gR,H),{base:gy+"right:0px;border-right-color:"+E.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){this.wrap.getParent()&&this.wrap.remove();return this},mouseNear:function(){il(E,this);var N=E.holdDistance,M=this.size;return M&&E.mouse.y>M.top-N&&E.mouse.y<M.bottom+N&&E.mouse.x>M.left-N&&E.mouse.x<M.right+N?!0:!1},place:function(){var U=E.view,T=E.editable,S=E.trigger,R=S.upper,Q=S.lower,P=R||Q,O=P.getParent(),N={};this.trigger=S;R&&il(E,R,!0);Q&&il(E,Q,!0);il(E,O,!0);E.inInlineMode&&a7(E,!0);O.equals(T)?(N.left=U.scroll.x,N.right=-U.scroll.x,N.width=""):(N.left=P.size.left-P.size.margin.left+U.scroll.x-(E.inInlineMode?U.editable.left+U.editable.border.left:0),N.width=P.size.outerWidth+P.size.margin.left+P.size.margin.right+U.scroll.x,N.right="");R&&Q?N.top=R.size.margin.bottom===Q.size.margin.top?0|R.size.bottom+R.size.margin.bottom/2:R.size.margin.bottom<Q.size.margin.top?R.size.bottom+R.size.margin.bottom:R.size.bottom+R.size.margin.bottom-Q.size.margin.top:R?Q||(N.top=R.size.bottom+R.size.margin.bottom):N.top=Q.size.top-Q.size.margin.top;S.is(eG)||N.top>U.scroll.y-15&&N.top<U.scroll.y+5?(N.top=E.inInlineMode?0:U.scroll.y,this.look(eG)):S.is(eo)||N.top>U.pane.bottom-5&&N.top<U.pane.bottom+15?(N.top=E.inInlineMode?U.editable.height+U.editable.padding.top+U.editable.padding.bottom:U.pane.bottom-1,this.look(eo)):(E.inInlineMode&&(N.top-=U.editable.top+U.editable.border.top),this.look(cC));E.inInlineMode&&(N.top--,N.top+=U.editable.scroll.top,N.left+=U.editable.scroll.left);for(var M in N){N[M]=CKEDITOR.tools.cssLength(N[M])}this.setStyles(N)},look:function(N){if(this.oldLook!=N){for(var M=this.lineChildren.length,O;M--;){(O=this.lineChildren[M]).setAttribute("style",O.base+O.looks[0|N/2])}this.oldLook=N}},wrap:new fH("span",E.doc)});for(H=G.lineChildren.length;H--;){G.lineChildren[H].appendTo(G)}G.look(cC);G.appendTo(G.wrap);G.unselectable();G.lineChildren[0].on("mouseup",function(M){G.detach();fp(E,function(O){var N=E.line.trigger;O[N.is(aP)?"insertBefore":"insertAfter"](N.is(aP)?N.lower:N.upper)},!0);E.editor.focus();!ip.ie&&E.enterMode!=CKEDITOR.ENTER_BR&&E.hotNode.scrollIntoView();M.data.preventDefault(!0)});G.on("mousedown",function(M){M.data.preventDefault(!0)});E.line=G;u(E);L.attachListener(v,"beforeUndoImage",function(){E.line.detach()});L.attachListener(v,"beforeGetData",function(){E.line.wrap.getParent()&&(E.line.detach(),v.once("getData",function(){E.line.attach()},null,null,1000))},null,null,0);L.attachListener(E.inInlineMode?J:J.getWindow().getFrame(),"mouseout",function(M){if("wysiwyg"==v.mode){if(E.inInlineMode){var P=M.data.$.clientX;M=M.data.$.clientY;u(E);a7(E,!0);var O=E.view.editable,N=E.view.scroll;if(!(P>O.left-N.x&&P<O.right-N.x)||!(M>O.top-N.y&&M<O.bottom-N.y)){clearTimeout(x),x=null,E.line.detach()}}else{clearTimeout(x),x=null,E.line.detach()}}});L.attachListener(L,"keyup",function(){E.hiddenMode=0});L.attachListener(L,"keydown",function(M){if("wysiwyg"==v.mode){switch(M=M.data.getKeystroke(),v.getSelection().getStartElement(),M){case 2228240:case 16:E.hiddenMode=1,E.line.detach()}}});L.attachListener(E.inInlineMode?L:J,"mousemove",function(M){y=!0;if(!("wysiwyg"!=v.mode||v.readOnly||x)){var N={x:M.data.$.clientX,y:M.data.$.clientY};x=setTimeout(function(){E.mouse=N;x=E.trigger=null;u(E);if(y&&!E.hiddenMode&&v.focusManager.hasFocus&&!E.line.mouseNear()&&(E.element=dV(E,!0))){(E.trigger=i0(E)||hG(E)||du(E))&&!cG(E,E.trigger.upper||E.trigger.lower)?E.line.attach().place():(E.trigger=null,E.line.detach()),y=!1}},30)}});L.attachListener(I,"scroll",function(){"wysiwyg"==v.mode&&(E.line.detach(),ip.webkit&&(E.hiddenMode=1,clearTimeout(B),B=setTimeout(function(){E.mouseDown||(E.hiddenMode=0)},50)))});L.attachListener(f5?J:I,"mousedown",function(){"wysiwyg"==v.mode&&(E.line.detach(),E.hiddenMode=1,E.mouseDown=1)});L.attachListener(f5?J:I,"mouseup",function(){E.hiddenMode=0;E.mouseDown=0});v.addCommand("accessPreviousSpace",co(E));v.addCommand("accessNextSpace",co(E,!0));v.setKeystroke([[t.magicline_keystrokePrevious,"accessPreviousSpace"],[t.magicline_keystrokeNext,"accessNextSpace"]]);v.on("loadSnapshot",function(){var M,P,O,N;for(N in {p:1,br:1,div:1}){M=v.document.getElementsByTag(N);for(O=M.count();O--;){if((P=M.getItem(O)).data("cke-magicline-hot")){E.hotNode=P;E.lastCmdDirection="true"===P.data("cke-magicline-dir")?!0:!1;return}}}});this.backdoor={accessFocusSpace:fp,boxTrigger:l,isLine:jy,getAscendantTrigger:f0,getNonEmptyNeighbour:cU,getSize:eE,that:E,triggerEdge:hG,triggerEditable:i0,triggerExpand:du}}},this)}});var i6=CKEDITOR.tools.extend,fH=CKEDITOR.dom.element,b=fH.createFromHtml,ip=CKEDITOR.env,f5=CKEDITOR.env.ie&&9>CKEDITOR.env.version,iX=CKEDITOR.dtd,bz={},aP=128,dA=64,eX=32,ax=16,eG=4,eo=2,cC=1,b0="\u00a0",ir=iX.$listItem,iW=iX.$tableContent,dx=i6({},iX.$nonEditable,iX.$empty),cY=iX.$block,g9=100,em="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",gy=em+"border-color:transparent;display:block;border-style:solid;",gR="<span>"+b0+"</span>";bz[CKEDITOR.ENTER_BR]="br";bz[CKEDITOR.ENTER_P]="p";bz[CKEDITOR.ENTER_DIV]="div";l.prototype={set:function(v,t,x){this.properties=v+t+(x||cC);return this},is:function(t){return(this.properties&t)==t}};var dV=function(v,t,E){if(!v.mouse){return null}var B=v.doc,y=v.line.wrap;E=E||v.mouse;var x=new CKEDITOR.dom.element(B.$.elementFromPoint(E.x,E.y));t&&jy(v,x)&&(y.hide(),x=new CKEDITOR.dom.element(B.$.elementFromPoint(E.x,E.y)),y.show());return !x||!(x.type==CKEDITOR.NODE_ELEMENT&&x.$)||ip.ie&&9>ip.version&&!v.boundary.equals(x)&&!v.boundary.contains(x)?null:x},jx=CKEDITOR.dom.walker.whitespaces(),iV=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),du,ik=function(L){var K=L.element,J,I,H;if(!iw(K)||K.contains(L.editable)||K.isReadOnly()){return null}H=I=J=K;for(var G=0,F=!1,E=!1,B=L.view.pane.height,y=L.mouse;y.y+G<B&&0<y.y-G;){F||(F=!J.equals(I));E||(E=!J.equals(H));!F&&0<y.y-G&&(I=dV(L,!0,{x:y.x,y:y.y-G}));!E&&y.y+G<B&&(H=dV(L,!0,{x:y.x,y:y.y+G}));if(F&&E){break}G+=2}H=new l([I,H,null,null]);J=H.upper;I=H.lower;if(dr(L,J,I)){return H.set(eX,8)}if(J&&K.contains(J)){for(;!J.getParent().equals(K);){J=J.getParent()}}else{J=K.getFirst(function(M){return fN(L,M)})}if(I&&K.contains(I)){for(;!I.getParent().equals(K);){I=I.getParent()}}else{I=K.getLast(function(M){return fN(L,M)})}if(!J||!I){return null}il(L,J);il(L,I);if(!(L.mouse.y>J.size.top&&L.mouse.y<I.size.bottom)){return null}for(var K=Number.MAX_VALUE,x,v,t;I&&!I.equals(J)&&(x=J.getNext(L.isRelevant));){G=Math.abs(bJ(L,J,x)-L.mouse.y),G<K&&(K=G,v=J,t=x),J=x,il(L,J)}if(!v||!t||!(L.mouse.y>v.size.top&&L.mouse.y<t.size.bottom)){return null}H.upper=v;H.lower=t;return H.set(eX,8)},fN=function(v,t){return !(t&&t.type==CKEDITOR.NODE_TEXT||iV(t)||hV(t)||jy(v,t)||t.type==CKEDITOR.NODE_ELEMENT&&t.$&&t.is("br"))};du=function(v){var t=ik(v),y;if(y=t){y=t.upper;var x=t.lower;y=!y||!x||hV(x)||hV(y)||x.equals(y)||y.equals(x)||x.contains(y)||y.contains(x)?!1:iw(y)&&y.is(v.triggers)&&iw(x)&&x.is(v.triggers)&&dr(v,y,x)?!0:!1}return y?t:null};var ck=["top","left","right","bottom"];CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51;CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52;var fv=function(v){if(!v||v.type!=CKEDITOR.NODE_ELEMENT||"form"!=v.getName()){return[]}for(var t=[],B=["style","className"],y=0;y<B.length;y++){var x=v.$.elements.namedItem(B[y]);x&&(x=new CKEDITOR.dom.element(x),t.push([x,x.nextSibling]),x.remove())}return t},e2=function(v,t){if(v&&!(v.type!=CKEDITOR.NODE_ELEMENT||"form"!=v.getName())&&0<t.length){for(var B=t.length-1;0<=B;B--){var y=t[B][0],x=t[B][1];x?y.insertBefore(x):y.appendTo(v)}}},c1=function(v,t){var B=fv(v),y={},x=v.$;t||(y["class"]=x.className||"",x.className="");y.inline=x.style.cssText||"";t||(x.style.cssText="position: static; overflow: visible");e2(B);return y},eK=function(v,t){var y=fv(v),x=v.$;"class" in t&&(x.className=t["class"]);"inline" in t&&(x.style.cssText=t.inline);e2(y)},es=function(v){if(!v.editable().isInline()){var t=CKEDITOR.instances,y;for(y in t){var x=t[y];"wysiwyg"==x.mode&&!x.readOnly&&(x=x.document.getBody(),x.setAttribute("contentEditable",!1),x.setAttribute("contentEditable",!0))}v.editable().hasFocus&&(v.toolbox.focus(),v.focus())}};CKEDITOR.plugins.add("maximize",{init:function(H){function G(){var I=B.getViewPaneSize();H.resize(I.width,I.height,null,!0)}if(H.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var F=H.lang,E=CKEDITOR.document,B=E.getWindow(),y,x,v,t=CKEDITOR.TRISTATE_OFF;H.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var K=H.container.getChild(1),J=H.ui.space("contents");if("wysiwyg"==H.mode){var I=H.getSelection();y=I&&I.getRanges();x=B.getScrollPosition()}else{var L=H.editable().$;y=!CKEDITOR.env.ie&&[L.selectionStart,L.selectionEnd];x=[L.scrollLeft,L.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){B.on("resize",G);v=B.getScrollPosition();for(I=H.container;I=I.getParent();){I.setCustomData("maximize_saved_styles",c1(I)),I.setStyle("z-index",H.config.baseFloatZIndex-5)}J.setCustomData("maximize_saved_styles",c1(J,!0));K.setCustomData("maximize_saved_styles",c1(K,!0));J={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};E.getDocumentElement().setStyles(J);!CKEDITOR.env.gecko&&E.getDocumentElement().setStyle("position","fixed");(!CKEDITOR.env.gecko||!CKEDITOR.env.quirks)&&E.getBody().setStyles(J);CKEDITOR.env.ie?setTimeout(function(){B.$.scrollTo(0,0)},0):B.$.scrollTo(0,0);K.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");K.$.offsetLeft;K.setStyles({"z-index":H.config.baseFloatZIndex-5,left:"0px",top:"0px"});K.addClass("cke_maximized");G();J=K.getDocumentPosition();K.setStyles({left:-1*J.x+"px",top:-1*J.y+"px"});CKEDITOR.env.gecko&&es(H)}else{if(this.state==CKEDITOR.TRISTATE_ON){B.removeListener("resize",G);J=[J,K];for(I=0;I<J.length;I++){eK(J[I],J[I].getCustomData("maximize_saved_styles")),J[I].removeCustomData("maximize_saved_styles")}for(I=H.container;I=I.getParent();){eK(I,I.getCustomData("maximize_saved_styles")),I.removeCustomData("maximize_saved_styles")}CKEDITOR.env.ie?setTimeout(function(){B.$.scrollTo(v.x,v.y)},0):B.$.scrollTo(v.x,v.y);K.removeClass("cke_maximized");CKEDITOR.env.webkit&&(K.setStyle("display","inline"),setTimeout(function(){K.setStyle("display","block")},0));H.fire("resize")}}this.toggleState();if(I=this.uiItems[0]){J=this.state==CKEDITOR.TRISTATE_OFF?F.maximize.maximize:F.maximize.minimize,I=CKEDITOR.document.getById(I._.id),I.getChild(1).setHtml(J),I.setAttribute("title",J),I.setAttribute("href",'javascript:void("'+J+'");')}"wysiwyg"==H.mode?y?(CKEDITOR.env.gecko&&es(H),H.getSelection().selectRanges(y),(L=H.getSelection().getStartElement())&&L.scrollIntoView(!0)):B.$.scrollTo(x.x,x.y):(y&&(L.selectionStart=y[0],L.selectionEnd=y[1]),L.scrollLeft=x[0],L.scrollTop=x[1]);y=x=null;t=this.state;H.fire("maximize",this.state)},canUndo:!1});H.ui.addButton&&H.ui.addButton("Maximize",{label:F.maximize.maximize,command:"maximize",toolbar:"tools,10"});H.on("mode",function(){var I=H.getCommand("maximize");I.setState(I.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:t)},null,null,100)}}});CKEDITOR.plugins.add("newpage",{init:function(t){t.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(v){var x=this;v.setData(v.config.newpage_html||"",function(){v.focus();setTimeout(function(){v.fire("afterCommandExec",{name:"newpage",command:x});v.selectionChange()},200)})},async:!0});t.ui.addButton&&t.ui.addButton("NewPage",{label:t.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}});var d0=function(t){return{"aria-label":t,"class":"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:t}};CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var t=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:5px;cursor:default;").replace(/;/g," !important;");CKEDITOR.addCss("div.cke_pagebreak{"+t+"}")},init:function(t){t.blockless||(t.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),t.ui.addButton&&t.ui.addButton("PageBreak",{label:t.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.opera&&t.on("contentDom",function(){t.document.on("click",function(v){v=v.data.getTarget();v.is("div")&&v.hasClass("cke_pagebreak")&&t.getSelection().selectElement(v)})}))},afterInit:function(v){function t(F){CKEDITOR.tools.extend(F.attributes,d0(v.lang.pagebreak.alt),!0);F.children.length=0}var E=v.dataProcessor,B=E&&E.dataFilter,E=E&&E.htmlFilter,y=/page-break-after\s*:\s*always/i,x=/display\s*:\s*none/i;E&&E.addRules({attributes:{"class":function(G,F){var I=G.replace("cke_pagebreak","");if(I!=G){var H=CKEDITOR.htmlParser.fragment.fromHtml('<span style="display: none;">&nbsp;</span>').children[0];F.children.length=0;F.add(H);H=F.attributes;delete H["aria-label"];delete H.contenteditable;delete H.title}return I}}},{applyToAll:!0,priority:5});B&&B.addRules({elements:{div:function(F){if(F.attributes["data-cke-pagebreak"]){t(F)}else{if(y.test(F.attributes.style)){var G=F.children[0];G&&"span"==G.name&&x.test(G.attributes.style)&&t(F)}}}}})}});CKEDITOR.plugins.pagebreakCmd={exec:function(v){var t=v.document.createElement("div",{attributes:d0(v.lang.pagebreak.alt)});v.insertElement(t)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(t){return(t=t.parent)&&"div"==t.name&&t.styles["page-break-after"]},styles:"display"}},requiredContent:"div{page-break-after}"};var dI={canUndo:!1,async:!0,exec:function(t){t.getClipboardData({title:t.lang.pastetext.title},function(v){v&&t.fire("paste",{type:"text",dataValue:v.dataValue});t.fire("afterCommandExec",{name:"pastetext",command:dI,returnValue:!!v})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(t){t.addCommand("pastetext",dI);t.ui.addButton&&t.ui.addButton("PasteText",{label:t.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"});if(t.config.forcePasteAsPlainText){t.on("beforePaste",function(v){"html"!=v.data.type&&(v.data.type="text")})}t.on("pasteState",function(v){t.getCommand("pastetext").setState(v.data)})}});var hD=function(t){t.data.type="html"};CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(v){var t=0,x=this.path;v.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(y){var B=this;t=1;y.once("beforePaste",hD);y.getClipboardData({title:y.lang.pastefromword.title},function(E){E&&y.fire("paste",{type:"html",dataValue:E.dataValue});y.fire("afterCommandExec",{name:"pastefromword",command:B,returnValue:!!E})})}});v.ui.addButton&&v.ui.addButton("PasteFromWord",{label:v.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"});v.on("pasteState",function(y){v.getCommand("pastefromword").setState(y.data)});v.on("paste",function(I){var H=I.data,G=H.dataValue;if(G&&(t||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(G))){var F,E=v,B=function(){if(F){v.fire("paste",H)}else{if(!v.config.pasteFromWordPromptCleanup||t||confirm(v.lang.pastefromword.confirmCleanup)){H.dataValue=CKEDITOR.cleanWord(G,v)}}},y=CKEDITOR.cleanWord;y?B():(E=CKEDITOR.getUrl(E.config.pasteFromWordCleanupFile||x+"filter/default.js"),CKEDITOR.scriptLoader.load(E,B,null,!0));(F=!y)&&I.cancel()}},null,null,3)}});var c6,g6={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(v){var t,G=v.config,F=G.baseHref?'<base href="'+G.baseHref+'"/>':"";if(G.fullPage){t=v.getData().replace(/<head>/,"$&"+F).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+v.lang.preview.preview)}else{var G="<body ",E=v.document&&v.document.getBody();E&&(E.getAttribute("id")&&(G+='id="'+E.getAttribute("id")+'" '),E.getAttribute("class")&&(G+='class="'+E.getAttribute("class")+'" '));t=v.config.docType+'<html dir="'+v.config.contentsLangDirection+'"><head>'+F+"<title>"+v.lang.preview.preview+"</title>"+CKEDITOR.tools.buildStyleHtml(v.config.contentsCss)+"</head>"+(G+">")+v.getData()+"</body></html>"}F=640;G=420;E=80;try{var B=window.screen,F=Math.round(0.8*B.width),G=Math.round(0.7*B.height),E=Math.round(0.1*B.width)}catch(y){}if(!v.fire("contentPreview",v={dataValue:t})){return !1}var B="",x;CKEDITOR.env.ie&&(window._cke_htmlToLoad=v.dataValue,x="javascript:void( (function(){document.open();"+("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )",B="");CKEDITOR.env.gecko&&(window._cke_htmlToLoad=v.dataValue,B=c6+"preview.html");B=window.open(B,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+F+",height="+G+",left="+E);CKEDITOR.env.ie&&(B.location=x);!CKEDITOR.env.ie&&!CKEDITOR.env.gecko&&(x=B.document,x.open(),x.write(v.dataValue),x.close());return !0}};CKEDITOR.plugins.add("preview",{init:function(t){t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(c6=this.path,t.addCommand("preview",g6),t.ui.addButton&&t.ui.addButton("Preview",{label:t.lang.preview.preview,command:"preview",toolbar:"document,40"}))}});CKEDITOR.plugins.add("print",{init:function(t){t.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(t.addCommand("print",CKEDITOR.plugins.print),t.ui.addButton&&t.ui.addButton("Print",{label:t.lang.print.toolbar,command:"print",toolbar:"document,50"}))}});CKEDITOR.plugins.print={exec:function(t){CKEDITOR.env.opera||(CKEDITOR.env.gecko?t.window.$.print():t.document.$.execCommand("Print"))},canUndo:!1,readOnly:1,modes:{wysiwyg:!CKEDITOR.env.opera}};CKEDITOR.plugins.add("removeformat",{init:function(t){t.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);t.ui.addButton&&t.ui.addButton("RemoveFormat",{label:t.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}});CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(J){for(var I=J._.removeFormatRegex||(J._.removeFormatRegex=RegExp("^(?:"+J.config.removeFormatTags.replace(/,/g,"|")+")$","i")),H=J._.removeAttributes||(J._.removeAttributes=J.config.removeFormatAttributes.split(",")),G=CKEDITOR.plugins.removeformat.filter,F=J.getSelection().getRanges(1),E=F.createIterator(),B;B=E.getNextRange();){B.collapsed||B.enlarge(CKEDITOR.ENLARGE_ELEMENT);var y=B.createBookmark(),x=y.startNode,v=y.endNode,t=function(O){for(var N=J.elementPath(O),M=N.elements,L=1,K;(K=M[L])&&!K.equals(N.block)&&!K.equals(N.blockLimit);L++){I.test(K.getName())&&G(J,K)&&O.breakParent(K)}};t(x);if(v){t(v);for(x=x.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);x&&!x.equals(v);){t=x.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),!("img"==x.getName()&&x.data("cke-realelement"))&&G(J,x)&&(I.test(x.getName())?x.remove(1):(x.removeAttributes(H),J.fire("removeFormatCleanup",x))),x=t}}B.moveToBookmark(y)}J.forceNextSelectionCheck();J.getSelection().selectRanges(F)}}},filter:function(v,t){for(var y=v._.removeFormatFilters||[],x=0;x<y.length;x++){if(!1===y[x](t)){return !1}}return !0}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(t){this._.removeFormatFilters||(this._.removeFormatFilters=[]);this._.removeFormatFilters.push(t)};CKEDITOR.config.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var";CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";var gO={readOnly:1,exec:function(v){if(v.fire("save")&&(v=v.element.$.form)){try{v.submit()}catch(t){v.submit.click&&v.submit.click()}}}};CKEDITOR.plugins.add("save",{init:function(t){t.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(t.addCommand("save",gO).modes={wysiwyg:!!t.element.$.form},t.ui.addButton&&t.ui.addButton("Save",{label:t.lang.save.toolbar,command:"save",toolbar:"document,10"}))}});CKEDITOR.plugins.add("selectall",{init:function(t){t.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(v){var y=v.editable();if(y.is("textarea")){v=y.$,CKEDITOR.env.ie?v.createTextRange().execCommand("SelectAll"):(v.selectionStart=0,v.selectionEnd=v.value.length),v.focus()}else{if(y.is("body")){v.document.$.execCommand("SelectAll",!1,null)}else{var x=v.createRange();x.selectNodeContents(y);x.select()}v.forceNextSelectionCheck();v.selectionChange()}},canUndo:!1});t.ui.addButton&&t.ui.addButton("SelectAll",{label:t.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}});var gv={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(t){this.toggleState();this.refresh(t)},refresh:function(v){if(v.document){var t=this.state==CKEDITOR.TRISTATE_ON&&(v.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE||v.focusManager.hasFocus)?"attachClass":"removeClass";v.editable()[t]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var I="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),H,G,F,E,B=CKEDITOR.getUrl(this.path),y=!(CKEDITOR.env.ie&&9>CKEDITOR.env.version),x=y?":not([contenteditable=false]):not(.cke_show_blocks_off)":"",v,t;for(H=G=F=E="";v=I.pop();){t=I.length?",":"",H+=".cke_show_blocks "+v+x+t,F+=".cke_show_blocks.cke_contents_ltr "+v+x+t,E+=".cke_show_blocks.cke_contents_rtl "+v+x+t,G+=".cke_show_blocks "+v+x+"{background-image:url("+B+"images/block_"+v+".png)}"}CKEDITOR.addCss((H+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(G,F+"{background-position:top left;padding-left:8px}",E+"{background-position:top right;padding-right:8px}"));y||CKEDITOR.addCss(".cke_show_blocks [contenteditable=false],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable=false],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable=false],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(v){function t(){x.refresh(v)}if(!v.blockless){var x=v.addCommand("showblocks",gv);x.canUndo=!1;v.config.startupOutlineBlocks&&x.setState(CKEDITOR.TRISTATE_ON);v.ui.addButton&&v.ui.addButton("ShowBlocks",{label:v.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"});v.on("mode",function(){x.state!=CKEDITOR.TRISTATE_DISABLED&&x.refresh(v)});v.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(v.on("focus",t),v.on("blur",t));v.on("contentDom",function(){x.state!=CKEDITOR.TRISTATE_DISABLED&&x.refresh(v)})}}});var f2={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(t){this.toggleState();this.refresh(t)},refresh:function(v){if(v.document){var t=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";v.editable()[t]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var t;t=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders ");CKEDITOR.addCss(t)},init:function(v){var t=v.addCommand("showborders",f2);t.canUndo=!1;!1!==v.config.startupShowBorders&&t.setState(CKEDITOR.TRISTATE_ON);v.on("mode",function(){t.state!=CKEDITOR.TRISTATE_DISABLED&&t.refresh(v)},null,null,100);v.on("contentDom",function(){t.state!=CKEDITOR.TRISTATE_DISABLED&&t.refresh(v)});v.on("removeFormatCleanup",function(x){x=x.data;v.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&x.is("table")&&(!x.hasAttribute("border")||0>=parseInt(x.getAttribute("border"),10))&&x.addClass("cke_show_border")})},afterInit:function(v){var t=v.dataProcessor;v=t&&t.dataFilter;t=t&&t.htmlFilter;v&&v.addRules({elements:{table:function(y){y=y.attributes;var x=y["class"],B=parseInt(y.border,10);if((!B||0>=B)&&(!x||-1==x.indexOf("cke_show_border"))){y["class"]=(x||"")+" cke_show_border"}}}});t&&t.addRules({elements:{table:function(y){y=y.attributes;var x=y["class"];x&&(y["class"]=x.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}});CKEDITOR.on("dialogDefinition",function(v){var t=v.data.name;if("table"==t||"tableProperties"==t){if(v=v.data.definition,t=v.getContents("info").get("txtBorder"),t.commit=CKEDITOR.tools.override(t.commit,function(x){return function(y,E){x.apply(this,arguments);var B=parseInt(this.getValue(),10);E[!B||0>=B?"addClass":"removeClass"]("cke_show_border")}}),v=(v=v.getContents("advanced"))&&v.get("advCSSClasses")){v.setup=CKEDITOR.tools.override(v.setup,function(x){return function(){x.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}}),v.commit=CKEDITOR.tools.override(v.commit,function(x){return function(y,B){x.apply(this,arguments);parseInt(B.getAttribute("border"),10)||B.addClass("cke_show_border")}})}}});CKEDITOR.plugins.add("sourcearea",{init:function(v){function t(){this.hide();this.setStyle("height",this.getParent().$.clientHeight+"px");this.setStyle("width",this.getParent().$.clientWidth+"px");this.show()}if(v.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var x=CKEDITOR.plugins.sourcearea;v.addMode("source",function(B){var y=v.ui.space("contents").getDocument().createElement("textarea");y.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",v.config.sourceAreaTabSize||4)));y.setAttribute("dir","ltr");y.addClass("cke_source cke_reset cke_enable_context_menu");v.ui.space("contents").append(y);y=v.editable(new cO(v,y));y.setData(v.getData(1));CKEDITOR.env.ie&&(y.attachListener(v,"resize",t,y),y.attachListener(CKEDITOR.document.getWindow(),"resize",t,y),CKEDITOR.tools.setTimeout(t,0,y));v.fire("ariaWidget",this);B()});v.addCommand("source",x.commands.source);v.ui.addButton&&v.ui.addButton("Source",{label:v.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"});v.on("mode",function(){v.getCommand("source").setState("source"==v.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)})}}});var cO=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(t){this.setValue(t);this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(t){this[(t?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){cO.baseProto.detach.call(this);this.clearCustomData();this.remove()}}});CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(t){"wysiwyg"==t.mode&&t.fire("saveSnapshot");t.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);t.setMode("source"==t.mode?"wysiwyg":"source")},canUndo:!1}}};CKEDITOR.plugins.add("specialchar",{availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,de:1,el:1,en:1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ku:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(v){var t=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");v.addCommand("specialchar",{exec:function(){var x=v.langCode,x=t.availableLangs[x]?x:t.availableLangs[x.replace(/-.*/,"")]?x.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t.path+"dialogs/lang/"+x+".js"),function(){CKEDITOR.tools.extend(v.lang.specialchar,t.langEntries[x]);v.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1});v.ui.addButton&&v.ui.addButton("SpecialChar",{label:v.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}});CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" ");var b1=function(v,t){var y=0,x;for(x in t){if(t[x]==v){y=1;break}}return y},dX="",cJ=function(){function v(){E.once("focus",B);E.once("blur",t)}function t(F){F=F.editor;var H=hA.getScayt(F),G=F.elementMode==CKEDITOR.ELEMENT_MODE_INLINE;H&&(hA.setPaused(F,!H.disabled),hA.setControlId(F,H.id),H.destroy(!0),delete hA.instances[F.name],G&&v())}var E=this,B=function(){if(!("undefined"!=typeof hA.instances[E.name]||null!=hA.instances[E.name])){var G=E.config,F={};F.srcNodeRef="BODY"==E.editable().$.nodeName?E.document.getWindow().$.frameElement:E.editable().$;F.assocApp="CKEDITOR."+CKEDITOR.version+"@"+CKEDITOR.revision;F.customerid=G.scayt_customerid||"1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2";F.customDictionaryIds=G.scayt_customDictionaryIds||"";F.userDictionaryName=G.scayt_userDictionaryName||"";F.sLang=G.scayt_sLang||"en_US";F.onLoad=function(){CKEDITOR.env.ie&&8>CKEDITOR.env.version||this.addStyle(this.selectorCss(),"padding-bottom: 2px !important;");E.editable().hasFocus&&!hA.isControlRestored(E)&&this.focus()};G=window.scayt_custom_params;if("object"==typeof G){for(var J in G){F[J]=G[J]}}hA.getControlId(E)&&(F.id=hA.getControlId(E));var I=new window.scayt(F);I.afterMarkupRemove.push(function(K){(new CKEDITOR.dom.element(K,I.document)).mergeSiblings()});if(F=hA.instances[E.name]){I.sLang=F.sLang,I.option(F.option()),I.paused=F.paused}hA.instances[E.name]=I;try{I.setDisabled(!1===hA.isPaused(E))}catch(H){}E.fire("showScaytState")}};E.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?v():E.on("contentDom",B);E.on("contentDomUnload",function(){for(var G=CKEDITOR.document.getElementsByTag("script"),F=/^dojoIoScript(\d+)$/i,L=/^https?:\/\/svc\.webspellchecker\.net\/spellcheck\/script\/ssrv\.cgi/i,K=0;K<G.count();K++){var J=G.getItem(K),H=J.getId(),I=J.getAttribute("src");H&&I&&(H.match(F)&&I.match(L))&&J.remove()}});E.on("beforeCommandExec",function(F){"source"==F.data.name&&"source"==E.mode&&hA.markControlRestore(E)});E.on("afterCommandExec",function(F){if(hA.isScaytEnabled(E)&&"wysiwyg"==E.mode&&("undo"==F.data.name||"redo"==F.data.name)){hA.getScayt(E).setDisabled(!0),hA.refresh_timeout&&window.clearTimeout(hA.refresh_timeout),hA.refresh_timeout=window.setTimeout(function(){hA.getScayt(E).setDisabled(!1);hA.getScayt(E).focus();hA.getScayt(E).refresh()},10)}});E.on("destroy",t);E.on("setData",t);E.on("insertElement",function(){var F=hA.getScayt(E);hA.isScaytEnabled(E)&&(CKEDITOR.env.ie&&E.getSelection().unlock(!0),window.setTimeout(function(){F.focus();F.refresh()},10))},this,null,50);E.on("insertHtml",function(){var F=hA.getScayt(E);hA.isScaytEnabled(E)&&(CKEDITOR.env.ie&&E.getSelection().unlock(!0),window.setTimeout(function(){F.focus();F.refresh()},10))},this,null,50);E.on("scaytDialog",function(F){F.data.djConfig=window.djConfig;F.data.scayt_control=hA.getScayt(E);F.data.tab=dX;F.data.scayt=window.scayt});var y=E.dataProcessor;(y=y&&y.htmlFilter)&&y.addRules({elements:{span:function(F){if(F.attributes["data-scayt_word"]&&F.attributes["data-scaytid"]){return delete F.name,F}}}});var y=CKEDITOR.plugins.undo.Image.prototype,x="function"==typeof y.equalsContent?"equalsContent":"equals";y[x]=CKEDITOR.tools.override(y[x],function(F){return function(G){var J=this.contents,I=G.contents,H=hA.getScayt(this.editor);H&&hA.isScaytReady(this.editor)&&(this.contents=H.reset(J)||"",G.contents=H.reset(I)||"");H=F.apply(this,arguments);this.contents=J;G.contents=I;return H}});y=CKEDITOR.editor.prototype;y.checkDirty=CKEDITOR.tools.override(y.checkDirty,function(F){return function(){var G=null,H=hA.getScayt(this);H&&hA.isScaytReady(this)?(G=H.reset(this.getSnapshot()),H=H.reset(this._.previousValue),G=G!==H):G=F.apply(this);return G}});E.document&&(E.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE||E.focusManager.hasFocus)&&B()};CKEDITOR.plugins.scayt={engineLoaded:!1,instances:{},controlInfo:{},setControlInfo:function(v,t){v&&v.name&&"object"!=typeof this.controlInfo[v.name]&&(this.controlInfo[v.name]={});for(var x in t){this.controlInfo[v.name][x]=t[x]}},isControlRestored:function(t){return t&&t.name&&this.controlInfo[t.name]?this.controlInfo[t.name].restored:!1},markControlRestore:function(t){this.setControlInfo(t,{restored:!0})},setControlId:function(v,t){this.setControlInfo(v,{id:t})},getControlId:function(t){return t&&t.name&&this.controlInfo[t.name]&&this.controlInfo[t.name].id?this.controlInfo[t.name].id:null},setPaused:function(v,t){this.setControlInfo(v,{paused:t})},isPaused:function(t){if(t&&t.name&&this.controlInfo[t.name]){return this.controlInfo[t.name].paused}},getScayt:function(t){return this.instances[t.name]},isScaytReady:function(t){return !0===this.engineLoaded&&"undefined"!==typeof window.scayt&&this.getScayt(t)},isScaytEnabled:function(t){return(t=this.getScayt(t))?!1===t.disabled:!1},getUiTabs:function(v){var t=[],y=v.config.scayt_uiTabs||"1,1,1",y=y.split(",");y[3]="1";for(var x=0;4>x;x++){t[x]="undefined"!=typeof window.scayt&&"undefined"!=typeof window.scayt.uiTags?parseInt(y[x],10)&&window.scayt.uiTags[x]:parseInt(y[x],10)}"object"==typeof v.plugins.wsc?t.push(1):t.push(0);return t},loadEngine:function(v){if(CKEDITOR.env.gecko&&10900>CKEDITOR.env.version||CKEDITOR.env.opera||CKEDITOR.env.air){return v.fire("showScaytState")}if(!0===this.engineLoaded){return cJ.apply(v)}if(-1==this.engineLoaded){return CKEDITOR.on("scaytReady",function(){cJ.apply(v)})}CKEDITOR.on("scaytReady",cJ,v);CKEDITOR.on("scaytReady",function(){this.engineLoaded=!0},this,null,0);this.engineLoaded=-1;var t=document.location.protocol,t=-1!=t.search(/https?:/)?t:"http:",t=v.config.scayt_srcUrl||t+"//svc.webspellchecker.net/scayt26/loader__base.js",x=hA.parseUrl(t).path+"/";void 0==window.scayt?(CKEDITOR._djScaytConfig={baseUrl:x,addOnLoad:[function(){CKEDITOR.fireOnce("scaytReady")}],isDebug:!1},CKEDITOR.document.getHead().append(CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",async:"true",src:t}}))):CKEDITOR.fireOnce("scaytReady");return null},parseUrl:function(v){var t;return v.match&&(t=v.match(/(.*)[\/\\](.*?\.\w+)$/))?{path:t[1],file:t[2]}:v}};var hA=CKEDITOR.plugins.scayt,bA=function(v,t,F,E,B,y,x){v.addCommand(E,B);v.addMenuItem(E,{label:F,command:E,group:y,order:x})},fK={preserveState:!0,editorFocus:!1,canUndo:!1,exec:function(v){if(hA.isScaytReady(v)){var t=hA.isScaytEnabled(v);this.setState(t?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_ON);v=hA.getScayt(v);v.focus();v.setDisabled(t)}else{!v.config.scayt_autoStartup&&0<=hA.engineLoaded&&(v.focus(),this.setState(CKEDITOR.TRISTATE_DISABLED),hA.loadEngine(v))}}};CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",beforeInit:function(v){var t=v.config.scayt_contextMenuItemsOrder||"suggest|moresuggest|control",y="";if((t=t.split("|"))&&t.length){for(var x=0;x<t.length;x++){y+="scayt_"+t[x]+(t.length!=parseInt(x,10)+1?",":"")}}v.config.menu_groups=y+","+v.config.menu_groups},checkEnvironment:function(){return CKEDITOR.env.opera||CKEDITOR.env.air?0:1},init:function(v){var t=v.dataProcessor&&v.dataProcessor.dataFilter,F={elements:{span:function(H){var G=H.attributes;G&&G["data-scaytid"]&&delete H.name}}};t&&t.addRules(F);var E={},B={},y=v.addCommand("scaytcheck",fK);CKEDITOR.dialog.add("scaytcheck",CKEDITOR.getUrl(this.path+"dialogs/options.js"));t=hA.getUiTabs(v);v.addMenuGroup("scaytButton");v.addMenuGroup("scayt_suggest",-10);v.addMenuGroup("scayt_moresuggest",-9);v.addMenuGroup("scayt_control",-8);var F={},x=v.lang.scayt;F.scaytToggle={label:x.enable,command:"scaytcheck",group:"scaytButton"};1==t[0]&&(F.scaytOptions={label:x.options,group:"scaytButton",onClick:function(){dX="options";v.openDialog("scaytcheck")}});1==t[1]&&(F.scaytLangs={label:x.langs,group:"scaytButton",onClick:function(){dX="langs";v.openDialog("scaytcheck")}});1==t[2]&&(F.scaytDict={label:x.dictionariesTab,group:"scaytButton",onClick:function(){dX="dictionaries";v.openDialog("scaytcheck")}});F.scaytAbout={label:v.lang.scayt.about,group:"scaytButton",onClick:function(){dX="about";v.openDialog("scaytcheck")}};1==t[4]&&(F.scaytWSC={label:v.lang.wsc.toolbar,group:"scaytButton",command:"checkspell"});v.addMenuItems(F);v.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:x.title,title:CKEDITOR.env.opera?x.opera_title:x.title,modes:{wysiwyg:this.checkEnvironment()},toolbar:"spellchecker,20",onRender:function(){y.on("state",function(){this.setState(y.state)},this)},onMenu:function(){var G=hA.isScaytEnabled(v);v.getMenuItem("scaytToggle").label=x[G?"disable":"enable"];var H=hA.getUiTabs(v);return{scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:G&&H[0]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:G&&H[1]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:G&&H[2]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:G&&H[3]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytWSC:H[4]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}});v.contextMenu&&v.addMenuItems&&v.contextMenu.addListener(function(O,N){if(!hA.isScaytEnabled(v)||N.getRanges()[0].checkReadOnly()){return null}var M=hA.getScayt(v),L=M.getScaytNode();if(!L){return null}var K=M.getWord(L);if(!K){return null}var I=M.getLang(),J=v.config.scayt_contextCommands||"all",K=window.scayt.getSuggestion(K,I),J=J.split("|"),H;for(H in E){delete v._.menuItems[H],delete v.commands[H]}for(H in B){delete v._.menuItems[H],delete v.commands[H]}if(!K||!K.length){bA(v,"no_sugg",x.noSuggestions,"scayt_no_sugg",{exec:function(){}},"scayt_control",1,!0),B.scayt_no_sugg=CKEDITOR.TRISTATE_OFF}else{E={};B={};H=v.config.scayt_moreSuggestions||"on";var I=!1,G=v.config.scayt_maxSuggestions;"number"!=typeof G&&(G=5);!G&&(G=K.length);for(var S=0,R=K.length;S<R;S+=1){var Q="scayt_suggestion_"+K[S].replace(" ","_"),P=function(U,T){return{exec:function(){M.replace(U,T)}}}(L,K[S]);S<G?(bA(v,"button_"+Q,K[S],Q,P,"scayt_suggest",S+1),B[Q]=CKEDITOR.TRISTATE_OFF):"on"==H&&(bA(v,"button_"+Q,K[S],Q,P,"scayt_moresuggest",S+1),E[Q]=CKEDITOR.TRISTATE_OFF,I=!0)}I&&(v.addMenuItem("scayt_moresuggest",{label:x.moreSuggestions,group:"scayt_moresuggest",order:10,getItems:function(){return E}}),B.scayt_moresuggest=CKEDITOR.TRISTATE_OFF)}if(b1("all",J)||b1("ignore",J)){bA(v,"ignore",x.ignore,"scayt_ignore",{exec:function(){M.ignore(L)}},"scayt_control",2),B.scayt_ignore=CKEDITOR.TRISTATE_OFF}if(b1("all",J)||b1("ignoreall",J)){bA(v,"ignore_all",x.ignoreAll,"scayt_ignore_all",{exec:function(){M.ignoreAll(L)}},"scayt_control",3),B.scayt_ignore_all=CKEDITOR.TRISTATE_OFF}if(b1("all",J)||b1("add",J)){bA(v,"add_word",x.addWord,"scayt_add_word",{exec:function(){window.scayt.addWordToUserDictionary(L)}},"scayt_control",4),B.scayt_add_word=CKEDITOR.TRISTATE_OFF}M.fireOnContextMenu&&M.fireOnContextMenu(v);return B});t=function(G){G.removeListener();CKEDITOR.env.opera||CKEDITOR.env.air?y.setState(CKEDITOR.TRISTATE_DISABLED):y.setState(hA.isScaytEnabled(v)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)};v.on("showScaytState",t);v.on("instanceReady",t);if(v.config.scayt_autoStartup){v.on("instanceReady",function(){hA.loadEngine(v)})}},afterInit:function(v){var t,x=function(y){if(y.hasAttribute("data-scaytid")){return !1}};v._.elementsPath&&(t=v._.elementsPath.filters)&&t.push(x);v.addRemoveFormatFilter&&v.addRemoveFormatFilter(x)}});CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(v){var t=v.config,E=v.lang.stylescombo,B={},y=[],x=[];v.on("stylesSet",function(J){if(J=J.data.styles){for(var I,H,G=0,F=J.length;G<F;G++){if(I=J[G],!(v.blockless&&I.element in CKEDITOR.dtd.$block)&&(H=I.name,I=new CKEDITOR.style(I),!v.filter.customConfig||v.filter.check(I))){I._name=H,I._.enterMode=t.enterMode,I._.weight=G+1000*(I.type==CKEDITOR.STYLE_OBJECT?1:I.type==CKEDITOR.STYLE_BLOCK?2:3),B[H]=I,y.push(I),x.push(I)}}y.sort(function(L,K){return L._.weight-K._.weight})}});v.ui.addRichCombo("Styles",{label:E.label,title:E.panelTitle,toolbar:"styles,10",allowedContent:x,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(t.contentsCss),multiSelect:!0,attributes:{"aria-label":E.panelTitle}},init:function(){var I,G,K,J,H,F;H=0;for(F=y.length;H<F;H++){I=y[H],G=I._name,J=I.type,J!=K&&(this.startGroup(E["panelTitle"+J]),K=J),this.add(G,I.type==CKEDITOR.STYLE_OBJECT?G:I.buildPreview(),G)}this.commit()},onClick:function(F){v.focus();v.fire("saveSnapshot");F=B[F];var G=v.elementPath();v[F.checkActive(G)?"removeStyle":"applyStyle"](F);v.fire("saveSnapshot")},onRender:function(){v.on("selectionChange",function(H){var G=this.getValue();H=H.data.path.elements;for(var K=0,J=H.length,I;K<J;K++){I=H[K];for(var F in B){if(B[F].checkElementRemovable(I,!0)){F!=G&&this.setValue(F);return}}}this.setValue("")},this)},onOpen:function(){var F=v.getSelection().getSelectedElement(),F=v.elementPath(F),J=[0,0,0,0];this.showAll();this.unmarkAll();for(var I in B){var H=B[I],G=H.type;H.checkApplicable(F,v.activeFilter)?J[G]++:this.hideItem(I);H.checkActive(F)&&this.mark(I)}J[CKEDITOR.STYLE_BLOCK]||this.hideGroup(E["panelTitle"+CKEDITOR.STYLE_BLOCK]);J[CKEDITOR.STYLE_INLINE]||this.hideGroup(E["panelTitle"+CKEDITOR.STYLE_INLINE]);J[CKEDITOR.STYLE_OBJECT]||this.hideGroup(E["panelTitle"+CKEDITOR.STYLE_OBJECT])},refresh:function(){var F=v.elementPath();if(F){for(var G in B){if(B[G].checkApplicable(F,v.activeFilter)){return}}this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){B={};y=[]}})}});var cw=function(t){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(v){if(v.editable().hasFocus){var G=v.getSelection(),F;if(F=(new CKEDITOR.dom.elementPath(G.getCommonAncestor(),G.root)).contains({td:1,th:1},1)){var G=v.createRange(),E=CKEDITOR.tools.tryThese(function(){var H=F.getParent().$.cells[F.$.cellIndex+(t?-1:1)];H.parentNode.parentNode;return H},function(){var H=F.getParent(),H=H.getAscendant("table").$.rows[H.$.rowIndex+(t?-1:1)];return H.cells[t?H.cells.length-1:0]});if(!E&&!t){for(var B=F.getAscendant("table").$,E=F.getParent().$.cells,B=new CKEDITOR.dom.element(B.insertRow(-1),v.document),y=0,x=E.length;y<x;y++){B.append((new CKEDITOR.dom.element(E[y],v.document)).clone(!1,!1)).appendBogus()}G.moveToElementEditStart(B)}else{if(E){E=new CKEDITOR.dom.element(E),G.moveToElementEditStart(E),(!G.checkStartOfBlock()||!G.checkEndOfBlock())&&G.selectNodeContents(E)}else{return !0}}G.select(!0);return !0}}return !1}}},b4={editorFocus:!1,modes:{wysiwyg:1,source:1}},fs={exec:function(t){t.container.focusNext(!0,t.tabIndex)}},eZ={exec:function(t){t.container.focusPrevious(!0,t.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(v){for(var t=!1!==v.config.enableTabKeyTools,y=v.config.tabSpaces||0,x="";y--;){x+="\u00a0"}if(x){v.on("key",function(B){9==B.data.keyCode&&(v.insertHtml(x),B.cancel())})}if(t){v.on("key",function(B){(9==B.data.keyCode&&v.execCommand("selectNextCell")||B.data.keyCode==CKEDITOR.SHIFT+9&&v.execCommand("selectPreviousCell"))&&B.cancel()})}v.addCommand("blur",CKEDITOR.tools.extend(fs,b4));v.addCommand("blurBack",CKEDITOR.tools.extend(eZ,b4));v.addCommand("selectNextCell",cw());v.addCommand("selectPreviousCell",cw(!0))}});CKEDITOR.dom.element.prototype.focusNext=function(H,G){var F=void 0===G?this.getTabIndex():G,E,B,y,x,v,t;if(0>=F){for(v=this.getNextSourceNode(H,CKEDITOR.NODE_ELEMENT);v;){if(v.isVisible()&&0===v.getTabIndex()){y=v;break}v=v.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}}else{for(v=this.getDocument().getBody().getFirst();v=v.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!E){if(!B&&v.equals(this)){if(B=!0,H){if(!(v=v.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT))){break}E=1}}else{B&&!this.contains(v)&&(E=1)}}if(v.isVisible()&&!(0>(t=v.getTabIndex()))){if(E&&t==F){y=v;break}t>F&&(!y||!x||t<x)?(y=v,x=t):!y&&0===t&&(y=v,x=t)}}}y&&y.focus()};CKEDITOR.dom.element.prototype.focusPrevious=function(H,G){for(var F=void 0===G?this.getTabIndex():G,E,B,y,x=0,v,t=this.getDocument().getBody().getLast();t=t.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!E){if(!B&&t.equals(this)){if(B=!0,H){if(!(t=t.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT))){break}E=1}}else{B&&!this.contains(t)&&(E=1)}}if(t.isVisible()&&!(0>(v=t.getTabIndex()))){if(0>=F){if(E&&0===v){y=t;break}v>x&&(y=t,x=v)}else{if(E&&v==F){y=t;break}if(v<F&&(!y||v>x)){y=t,x=v}}}}y&&y.focus()};CKEDITOR.plugins.add("table",{requires:"dialog",init:function(v){function t(y){return CKEDITOR.tools.extend(y||{},{contextSensitive:1,refresh:function(E,B){this.setState(B.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!v.blockless){var x=v.lang.table;v.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(v.plugins.dialogadvtab?"table"+v.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]}));v.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",t()));v.addCommand("tableDelete",t({exec:function(B){var y=B.elementPath().contains("table",1);if(y){var E=y.getParent();1==E.getChildCount()&&!E.is("body","td","th")&&(y=E);B=B.createRange();B.moveToPosition(y,CKEDITOR.POSITION_BEFORE_START);y.remove();B.select()}}}));v.ui.addButton&&v.ui.addButton("Table",{label:x.toolbar,command:"table",toolbar:"insert,30"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");v.addMenuItems&&v.addMenuItems({table:{label:x.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:x.deleteTable,command:"tableDelete",group:"table",order:1}});v.on("doubleclick",function(y){y.data.element.is("table")&&(y.data.dialog="tableProperties")});v.contextMenu&&v.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}});var h5=function(v){function t(G){!(0<F.length)&&G.type==CKEDITOR.NODE_ELEMENT&&(eH.test(G.getName())&&!G.getCustomData("selected_cell"))&&(CKEDITOR.dom.element.setMarker(E,G,"selected_cell",!0),F.push(G))}v=v.getRanges();for(var F=[],E={},B=0;B<v.length;B++){var y=v[B];if(y.collapsed){y=y.getCommonAncestor(),(y=y.getAscendant("td",!0)||y.getAscendant("th",!0))&&F.push(y)}else{var y=new CKEDITOR.dom.walker(y),x;for(y.guard=t;x=y.next();){if(x.type!=CKEDITOR.NODE_ELEMENT||!x.is(CKEDITOR.dtd.table)){if((x=x.getAscendant("td",!0)||x.getAscendant("th",!0))&&!x.getCustomData("selected_cell")){CKEDITOR.dom.element.setMarker(E,x,"selected_cell",!0),F.push(x)}}}}}CKEDITOR.dom.element.clearAllMarkers(E);return F},bD=function(H,G){for(var F=h5(H),E=F[0],B=E.getAscendant("table"),E=E.getDocument(),y=F[0].getParent(),x=y.$.rowIndex,F=F[F.length-1],v=F.getParent().$.rowIndex+F.$.rowSpan-1,F=new CKEDITOR.dom.element(B.$.rows[v]),x=G?x:v,y=G?y:F,F=CKEDITOR.tools.buildTableMap(B),B=F[x],x=G?F[x-1]:F[x+1],F=F[0].length,E=E.createElement("tr"),v=0;B[v]&&v<F;v++){var t;1<B[v].rowSpan&&x&&B[v]==x[v]?(t=B[v],t.rowSpan+=1):(t=(new CKEDITOR.dom.element(B[v])).clone(),t.removeAttribute("rowSpan"),t.appendBogus(),E.append(t),t=t.$);v+=t.colSpan-1}G?E.insertBefore(y):E.insertAfter(y)},bl=function(J){if(J instanceof CKEDITOR.dom.selection){var I=h5(J),H=I[0].getAscendant("table"),G=CKEDITOR.tools.buildTableMap(H);J=I[0].getParent().$.rowIndex;for(var I=I[I.length-1],F=I.getParent().$.rowIndex+I.$.rowSpan-1,I=[],E=J;E<=F;E++){for(var B=G[E],y=new CKEDITOR.dom.element(H.$.rows[E]),x=0;x<B.length;x++){var v=new CKEDITOR.dom.element(B[x]),t=v.getParent().$.rowIndex;1==v.$.rowSpan?v.remove():(v.$.rowSpan-=1,t==E&&(t=G[E+1],t[x-1]?v.insertAfter(new CKEDITOR.dom.element(t[x-1])):(new CKEDITOR.dom.element(H.$.rows[E+1])).append(v,1)));x+=v.$.colSpan-1}I.push(y)}G=H.$.rows;H=new CKEDITOR.dom.element(G[F+1]||(0<J?G[J-1]:null)||H.$.parentNode);for(E=I.length;0<=E;E--){bl(I[E])}return H}J instanceof CKEDITOR.dom.element&&(H=J.getAscendant("table"),1==H.$.rows.length?H.remove():J.remove());return null},aT=function(I,H){for(var G=H?Infinity:0,F=0;F<I.length;F++){var E;E=I[F];for(var B=H,y=E.getParent().$.cells,x=0,v=0;v<y.length;v++){var t=y[v],x=x+(B?1:t.colSpan);if(t==E.$){break}}E=x-1;if(H?E<G:E>G){G=E}}return G},aB=function(v,t){for(var G=h5(v),F=G[0].getAscendant("table"),E=aT(G,1),G=aT(G),E=t?E:G,B=CKEDITOR.tools.buildTableMap(F),F=[],G=[],y=B.length,x=0;x<y;x++){F.push(B[x][E]),G.push(t?B[x][E-1]:B[x][E+1])}for(x=0;x<y;x++){F[x]&&(1<F[x].colSpan&&G[x]==F[x]?(E=F[x],E.colSpan+=1):(E=(new CKEDITOR.dom.element(F[x])).clone(),E.removeAttribute("colSpan"),E.appendBogus(),E[t?"insertBefore":"insertAfter"].call(E,new CKEDITOR.dom.element(F[x])),E=E.$),x+=E.rowSpan-1)}},C=function(v,t){var y=v.getStartElement();if(y=y.getAscendant("td",1)||y.getAscendant("th",1)){var x=y.clone();x.appendBogus();t?x.insertBefore(y):x.insertAfter(y)}},f=function(v){if(v instanceof CKEDITOR.dom.selection){v=h5(v);var t=v[0]&&v[0].getAscendant("table"),F;v:{var E=0;F=v.length-1;for(var B={},y,x;y=v[E++];){CKEDITOR.dom.element.setMarker(B,y,"delete_cell",!0)}for(E=0;y=v[E++];){if((x=y.getPrevious())&&!x.getCustomData("delete_cell")||(x=y.getNext())&&!x.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(B);F=x;break v}}CKEDITOR.dom.element.clearAllMarkers(B);x=v[0].getParent();(x=x.getPrevious())?F=x.getLast():(x=v[F].getParent(),F=(x=x.getNext())?x.getChild(0):null)}for(x=v.length-1;0<=x;x--){f(v[x])}F?gW(F,!0):t&&t.remove()}else{v instanceof CKEDITOR.dom.element&&(t=v.getParent(),1==t.getChildCount()?t.remove():v.remove())}},gW=function(v,t){var y=v.getDocument(),x=CKEDITOR.document;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(x.focus(),y.focus());y=new CKEDITOR.dom.range(y);if(!y["moveToElementEdit"+(t?"End":"Start")](v)){y.selectNodeContents(v),y.collapse(t?!1:!0)}y.select(!0)},a8=function(v,t,x){v=v[t];if("undefined"==typeof x){return v}for(t=0;v&&t<v.length;t++){if(x.is&&v[t]==x.$){return t}if(t==x){return new CKEDITOR.dom.element(v[t])}}return x.is?-1:null},aQ=function(Y,X,W){var V=h5(Y),U;if((X?1!=V.length:2>V.length)||(U=Y.getCommonAncestor())&&U.type==CKEDITOR.NODE_ELEMENT&&U.is("table")){return !1}var T;Y=V[0];U=Y.getAscendant("table");var S=CKEDITOR.tools.buildTableMap(U),R=S.length,Q=S[0].length,P=Y.getParent().$.rowIndex,O=a8(S,P,Y);if(X){var N;try{var L=parseInt(Y.getAttribute("rowspan"),10)||1;T=parseInt(Y.getAttribute("colspan"),10)||1;N=S["up"==X?P-L:"down"==X?P+L:P]["left"==X?O-T:"right"==X?O+T:O]}catch(M){return !1}if(!N||Y.$==N){return !1}V["up"==X||"left"==X?"unshift":"push"](new CKEDITOR.dom.element(N))}X=Y.getDocument();var K=P,L=N=0,J=!W&&new CKEDITOR.dom.documentFragment(X),I=0;for(X=0;X<V.length;X++){T=V[X];var H=T.getParent(),G=T.getFirst(),F=T.$.colSpan,E=T.$.rowSpan,H=H.$.rowIndex,B=a8(S,H,T),I=I+F*E,L=Math.max(L,B-O+F);N=Math.max(N,H-P+E);if(!W){F=T;(E=F.getBogus())&&E.remove();F.trim();if(T.getChildren().count()){if(H!=K&&G&&(!G.isBlockBoundary||!G.isBlockBoundary({br:1}))){(K=J.getLast(CKEDITOR.dom.walker.whitespaces(!0)))&&(!K.is||!K.is("br"))&&J.append("br")}T.moveChildren(J)}X?T.remove():T.setHtml("")}K=H}if(W){return N*L==I}J.moveChildren(Y);Y.appendBogus();L>=Q?Y.removeAttribute("rowSpan"):Y.$.rowSpan=N;N>=R?Y.removeAttribute("colSpan"):Y.$.colSpan=L;W=new CKEDITOR.dom.nodeList(U.$.rows);V=W.count();for(X=V-1;0<=X;X--){U=W.getItem(X),U.$.cells.length||(U.remove(),V++)}return Y},jt=function(J,I){var H=h5(J);if(1<H.length){return !1}if(I){return !0}var H=H[0],G=H.getParent(),F=G.getAscendant("table"),E=CKEDITOR.tools.buildTableMap(F),B=G.$.rowIndex,y=a8(E,B,H),x=H.$.rowSpan,v;if(1<x){v=Math.ceil(x/2);for(var x=Math.floor(x/2),G=B+v,F=new CKEDITOR.dom.element(F.$.rows[G]),E=a8(E,G),t,G=H.clone(),B=0;B<E.length;B++){if(t=E[B],t.parentNode==F.$&&B>y){G.insertBefore(new CKEDITOR.dom.element(t));break}else{t=null}}t||F.append(G,!0)}else{x=v=1;F=G.clone();F.insertAfter(G);F.append(G=H.clone());t=a8(E,B);for(y=0;y<t.length;y++){t[y].rowSpan++}}G.appendBogus();H.$.rowSpan=v;G.$.rowSpan=x;1==v&&H.removeAttribute("rowSpan");1==x&&G.removeAttribute("rowSpan");return G},iQ=function(I,H){var G=h5(I);if(1<G.length){return !1}if(H){return !0}var G=G[0],F=G.getParent(),E=F.getAscendant("table"),E=CKEDITOR.tools.buildTableMap(E),B=a8(E,F.$.rowIndex,G),y=G.$.colSpan;if(1<y){F=Math.ceil(y/2),y=Math.floor(y/2)}else{for(var y=F=1,x=[],v=0;v<E.length;v++){var t=E[v];x.push(t[B]);1<t[B].rowSpan&&(v+=t[B].rowSpan-1)}for(E=0;E<x.length;E++){x[E].colSpan++}}E=G.clone();E.insertAfter(G);E.appendBogus();G.$.colSpan=F;E.$.colSpan=y;1==F&&G.removeAttribute("colSpan");1==y&&E.removeAttribute("colSpan");return E},eH=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(v){function t(B){return CKEDITOR.tools.extend(B||{},{contextSensitive:1,refresh:function(F,E){this.setState(E.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function y(B,F){var E=v.addCommand(B,F);v.addFeature(E)}var x=v.lang.table;y("cellProperties",new CKEDITOR.dialogCommand("cellProperties",t({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"})));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");y("rowDelete",t({requiredContent:"table",exec:function(B){B=B.getSelection();gW(bl(B))}}));y("rowInsertBefore",t({requiredContent:"table",exec:function(B){B=B.getSelection();bD(B,!0)}}));y("rowInsertAfter",t({requiredContent:"table",exec:function(B){B=B.getSelection();bD(B)}}));y("columnDelete",t({requiredContent:"table",exec:function(N){N=N.getSelection();N=h5(N);var M=N[0],L=N[N.length-1];N=M.getAscendant("table");for(var K=CKEDITOR.tools.buildTableMap(N),J,I,H=[],G=0,E=K.length;G<E;G++){for(var F=0,B=K[G].length;F<B;F++){K[G][F]==M.$&&(J=F),K[G][F]==L.$&&(I=F)}}for(G=J;G<=I;G++){for(F=0;F<K.length;F++){L=K[F],M=new CKEDITOR.dom.element(N.$.rows[F]),L=new CKEDITOR.dom.element(L[G]),L.$&&(1==L.$.colSpan?L.remove():L.$.colSpan-=1,F+=L.$.rowSpan-1,M.$.cells.length||H.push(M))}}I=N.$.rows[0]&&N.$.rows[0].cells;J=new CKEDITOR.dom.element(I[J]||(J?I[J-1]:N.$.parentNode));H.length==E&&N.remove();J&&gW(J,!0)}}));y("columnInsertBefore",t({requiredContent:"table",exec:function(B){B=B.getSelection();aB(B,!0)}}));y("columnInsertAfter",t({requiredContent:"table",exec:function(B){B=B.getSelection();aB(B)}}));y("cellDelete",t({requiredContent:"table",exec:function(B){B=B.getSelection();f(B)}}));y("cellMerge",t({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(B){gW(aQ(B.getSelection()),!0)}}));y("cellMergeRight",t({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(B){gW(aQ(B.getSelection(),"right"),!0)}}));y("cellMergeDown",t({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(B){gW(aQ(B.getSelection(),"down"),!0)}}));y("cellVerticalSplit",t({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(B){gW(jt(B.getSelection()))}}));y("cellHorizontalSplit",t({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(B){gW(iQ(B.getSelection()))}}));y("cellInsertBefore",t({requiredContent:"table",exec:function(B){B=B.getSelection();C(B,!0)}}));y("cellInsertAfter",t({requiredContent:"table",exec:function(B){B=B.getSelection();C(B)}}));v.addMenuItems&&v.addMenuItems({tablecell:{label:x.cell.menu,group:"tablecell",order:1,getItems:function(){var B=v.getSelection(),E=h5(B);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:aQ(B,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:aQ(B,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:aQ(B,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:jt(B,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:iQ(B,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<E.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:x.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:x.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:x.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:x.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:x.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:x.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:x.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:x.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:x.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:x.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:x.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:x.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:x.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:x.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:x.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:x.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:x.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});v.contextMenu&&v.contextMenu.addListener(function(E,B,F){return(E=F.contains({td:1,th:1},1))&&!E.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:h5};CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools);CKEDITOR.tools.buildTableMap=function(I){I=I.$.rows;for(var H=-1,G=[],F=0;F<I.length;F++){H++;!G[H]&&(G[H]=[]);for(var E=-1,B=0;B<I[F].cells.length;B++){var y=I[F].cells[B];for(E++;G[H][E];){E++}for(var x=isNaN(y.colSpan)?1:y.colSpan,y=isNaN(y.rowSpan)?1:y.rowSpan,v=0;v<y;v++){G[H+v]||(G[H+v]=[]);for(var t=0;t<x;t++){G[H+v][E+t]=I[F].cells[B]}}E+=x-1}}return G};var bV=function(t){this.editor=t;this.reset()};CKEDITOR.plugins.add("undo",{init:function(v){function t(F){B.enabled&&!1!==F.data.command.canUndo&&B.save()}function E(){B.enabled=v.readOnly?!1:"wysiwyg"==v.mode;B.onChange()}var B=v.undoManager=new bV(v),y=v.addCommand("undo",{exec:function(){B.undo()&&(v.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),x=v.addCommand("redo",{exec:function(){B.redo()&&(v.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});v.setKeystroke([[CKEDITOR.CTRL+90,"undo"],[CKEDITOR.CTRL+89,"redo"],[CKEDITOR.CTRL+CKEDITOR.SHIFT+90,"redo"]]);B.onChange=function(){y.setState(B.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);x.setState(B.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};v.on("beforeCommandExec",t);v.on("afterCommandExec",t);v.on("saveSnapshot",function(F){B.save(F.data&&F.data.contentOnly)});v.on("contentDom",function(){v.editable().on("keydown",function(F){F=F.data.getKey();(8==F||46==F)&&B.type(F,0)});v.editable().on("keypress",function(F){B.type(F.data.getKey(),1)})});v.on("beforeModeUnload",function(){"wysiwyg"==v.mode&&B.save(!0)});v.on("mode",E);v.on("readOnly",E);v.ui.addButton&&(v.ui.addButton("Undo",{label:v.lang.undo.undo,command:"undo",toolbar:"undo,10"}),v.ui.addButton("Redo",{label:v.lang.undo.redo,command:"redo",toolbar:"undo,20"}));v.resetUndo=function(){B.reset();v.fire("saveSnapshot")};v.on("updateSnapshot",function(){B.currentImage&&B.update()});v.on("lockSnapshot",function(F){B.lock(F.data&&F.data.dontUpdate)});v.on("unlockSnapshot",B.unlock,B)}});CKEDITOR.plugins.undo={};var ay=CKEDITOR.plugins.undo.Image=function(v,t){this.editor=v;v.fire("beforeUndoImage");var x=v.getSnapshot();CKEDITOR.env.ie&&x&&(x=x.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=x;t||(this.bookmarks=(x=x&&v.getSelection())&&x.createBookmarks2(!0));v.fire("afterUndoImage")},bu=/\b(?:href|src|name)="[^"]*?"/gi;ay.prototype={equalsContent:function(v){var t=this.contents;v=v.contents;if(CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)){t=t.replace(bu,""),v=v.replace(bu,"")}return t!=v?!1:!0},equalsSelection:function(v){var t=this.bookmarks;v=v.bookmarks;if(t||v){if(!t||!v||t.length!=v.length){return !1}for(var B=0;B<t.length;B++){var y=t[B],x=v[B];if(y.startOffset!=x.startOffset||y.endOffset!=x.endOffset||!CKEDITOR.tools.arrayCompare(y.start,x.start)||!CKEDITOR.tools.arrayCompare(y.end,x.end)){return !1}}}return !0}};bV.prototype={type:function(v,t){var E=!t&&v!=this.lastKeystroke,B=this.editor;if(!this.typing||t&&!this.wasCharacter||E){var y=new ay(B),x=this.snapshots.length;CKEDITOR.tools.setTimeout(function(){var F=B.getSnapshot();CKEDITOR.env.ie&&(F=F.replace(/\s+data-cke-expando=".*?"/g,""));y.contents!=F&&x==this.snapshots.length&&(this.typing=!0,this.save(!1,y,!1)||this.snapshots.splice(this.index+1,this.snapshots.length-this.index-1),this.hasUndo=!0,this.hasRedo=!1,this.modifiersCount=this.typesCount=1,this.onChange())},0,this)}this.lastKeystroke=v;(this.wasCharacter=t)?(this.modifiersCount=0,this.typesCount++,25<this.typesCount?(this.save(!1,null,!1),this.typesCount=1):setTimeout(function(){B.fire("change")},0)):(this.typesCount=0,this.modifiersCount++,25<this.modifiersCount?(this.save(!1,null,!1),this.modifiersCount=1):setTimeout(function(){B.fire("change")},0))},reset:function(){this.lastKeystroke=0;this.snapshots=[];this.index=-1;this.limit=this.editor.config.undoStackSize||20;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType()},resetType:function(){this.typing=!1;delete this.lastKeystroke;this.modifiersCount=this.typesCount=0},fireChange:function(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(v,t,y){if(this.locked){return !1}var x=this.snapshots;t||(t=new ay(this.editor));if(!1===t.contents){return !1}if(this.currentImage){if(t.equalsContent(this.currentImage)){if(v||t.equalsSelection(this.currentImage)){return !1}}else{this.editor.fire("change")}}x.splice(this.index+1,x.length-this.index-1);x.length==this.limit&&x.shift();this.index=x.push(t)-1;this.currentImage=t;!1!==y&&this.fireChange();return !0},restoreImage:function(v){var t=this.editor,x;v.bookmarks&&(t.focus(),x=t.getSelection());this.locked=1;this.editor.loadSnapshot(v.contents);v.bookmarks?x.selectBookmarks(v.bookmarks):CKEDITOR.env.ie&&(x=this.editor.document.getBody().$.createTextRange(),x.collapse(!0),x.select());this.locked=0;this.index=v.index;this.currentImage=this.snapshots[this.index];this.update();this.fireChange();t.fire("change")},getNextImage:function(v){var t=this.snapshots,y=this.currentImage,x;if(y){if(v){for(x=this.index-1;0<=x;x--){if(v=t[x],!y.equalsContent(v)){return v.index=x,v}}}else{for(x=this.index+1;x<t.length;x++){if(v=t[x],!y.equalsContent(v)){return v.index=x,v}}}}return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var t=this.getNextImage(!0);if(t){return this.restoreImage(t),!0}}return !1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var t=this.getNextImage(!1);if(t){return this.restoreImage(t),!0}}return !1},update:function(v){if(!this.locked){v||(v=new ay(this.editor));for(var t=this.index,x=this.snapshots;0<t&&this.currentImage.equalsContent(x[t-1]);){t-=1}x.splice(t,this.index-t+1,v);this.index=t;this.currentImage=v}},lock:function(t){this.locked?this.locked.level++:t?this.locked={level:1}:(t=new ay(this.editor,!0),this.locked={update:this.currentImage&&this.currentImage.equalsContent(t)?t:null,level:1})},unlock:function(){if(this.locked&&!--this.locked.level){var v=this.locked.update,t=v&&new ay(this.editor,!0);this.locked=null;v&&!v.equalsContent(t)&&this.update()}}};CKEDITOR.config.wsc_removeGlobalVariable=!0;CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(t){t.config.wsc_onFinish="function"===typeof t.config.wsc_onFinish?t.config.wsc_onFinish:function(){};t.config.wsc_onClose="function"===typeof t.config.wsc_onClose?t.config.wsc_onClose:function(){}},parseConfig:function(t){t.config.wsc_customerId=t.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk";t.config.wsc_customDictionaryIds=t.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"";t.config.wsc_userDictionaryName=t.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"";t.config.wsc_customLoaderScript=t.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript;CKEDITOR.config.wsc_cmd=t.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell";CKEDITOR.config.wsc_version="v4.3.0-1e748a6"},init:function(t){this.parseConfig(t);this.parseApi(t);t.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname};"undefined"==typeof t.plugins.scayt&&t.ui.addButton&&t.ui.addButton("SpellChecker",{label:t.lang.wsc.toolbar,command:"checkspell",toolbar:"spellchecker,10"});CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&8>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}});CKEDITOR.config.plugins="dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,div,resize,toolbar,elementspath,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,undo,wsc";CKEDITOR.config.skin="moono";var a2=function(v,t){var y=CKEDITOR.getUrl("plugins/"+t);v=v.split(",");for(var x=0;x<v.length;x++){CKEDITOR.skin.icons[v[x]]={path:y,offset:-v[++x],bgsize:v[++x]}}};CKEDITOR.env.hidpi?a2("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,creatediv,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,smiley,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastetext-rtl,1512,,pastetext,1536,,pastefromword-rtl,1560,,pastefromword,1584,,preview-rtl,1608,,preview,1632,,print,1656,,removeformat,1680,,save,1704,,selectall,1728,,showblocks-rtl,1752,,showblocks,1776,,source-rtl,1800,,source,1824,,specialchar,1848,,scayt,1872,,table,1896,,redo-rtl,1920,,redo,1944,,undo-rtl,1968,,undo,1992,,spellchecker,2016,","icons_hidpi.png"):a2("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,creatediv,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,smiley,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastetext-rtl,1512,auto,pastetext,1536,auto,pastefromword-rtl,1560,auto,pastefromword,1584,auto,preview-rtl,1608,auto,preview,1632,auto,print,1656,auto,removeformat,1680,auto,save,1704,auto,selectall,1728,auto,showblocks-rtl,1752,auto,showblocks,1776,auto,source-rtl,1800,auto,source,1824,auto,specialchar,1848,auto,scayt,1872,auto,table,1896,auto,redo-rtl,1920,auto,redo,1944,auto,undo-rtl,1968,auto,undo,1992,auto,spellchecker,2016,auto","icons.png");CKEDITOR.lang.languages={af:1,sq:1,ar:1,eu:1,bn:1,bs:1,bg:1,ca:1,"zh-cn":1,zh:1,hr:1,cs:1,da:1,nl:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,et:1,fo:1,fi:1,fr:1,"fr-ca":1,gl:1,ka:1,de:1,el:1,gu:1,he:1,hi:1,hu:1,is:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lv:1,lt:1,mk:1,ms:1,mn:1,no:1,nb:1,fa:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sr:1,"sr-latn":1,si:1,sk:1,sl:1,es:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,cy:1}}})();